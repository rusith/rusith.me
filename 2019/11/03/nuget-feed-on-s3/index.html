<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link href="https://gmpg.org/xfn/11" rel="profile"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5GDZWWBRFX"></script><script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-5GDZWWBRFX');
                </script><link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://rusith.me/icons/favicon-144-image.png"/><link rel="shortcut icon" href="https://rusith.me/favicon.ico"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/><meta property="twitter:creator" content="@rusith_"/><meta name="robots" content="index,follow"/><title>Running a Nuget Feed on S3 with Automated Deployments</title><meta name="description" content="There are many ways of creating a Nuget feed. but did you know that you can run a Nuget feed on S3 without any computing infrastructure? In this post, I will show you how you can create a Nuget feed on S3 using Sleet and automate the deployment process for packages."/><link rel="canonical" href="https://rusith.me/blog/nuget-feed-on-s3"/><meta property="og:title" content="Running a Nuget Feed on S3 with Automated Deployments"/><meta property="og:url" content="https://rusith.me/blog/nuget-feed-on-s3"/><meta property="og:description" content="There are many ways of creating a Nuget feed. but did you know that you can run a Nuget feed on S3 without any computing infrastructure? In this post, I will show you how you can create a Nuget feed on S3 using Sleet and automate the deployment process for packages."/><meta property="og:site_name" content="Rusith&#x27;s blog"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="blog"/><meta property="twitter:description" content="Creating a Nuget feed on an AWS S3 bucket using Sleet"/><meta property="og:image" content="/post-data/2019-11-03-nuget-feed-s3/banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Running a Nuget Feed on S3 with Automated Deployments"/><meta name="twitter:image" content="/post-data/2019-11-03-nuget-feed-s3/banner.png"/><meta name="twitter:site" content="@rusith_"/><script type="application/ld+json">{"@type":"BlogPosting","@context":"https://schema.org","headline":"Running a Nuget Feed on S3 with Automated Deployments","author":{"@type":"Person","name":"Shanaka Rusith","url":"https://rusith.me/about"},"keywords":"programming,dotnet,s3,aws,nuget","url":"https://rusith.me/blog/nuget-feed-on-s3","description":"There are many ways of creating a Nuget feed. but did you know that you can run a Nuget feed on S3 without any computing infrastructure? In this post, I will show you how you can create a Nuget feed on S3 using Sleet and automate the deployment process for packages.","copyrightHolder":{"@type":"Person","name":"Shanaka Rusith","url":"https://rusith.me/about"},"copyrightYear":"2021","mainEntityOfPage":{"@type":"WebPage","@id":"https://rusith.me"},"publisher":{"@type":"Organization","name":"Shanaka Rusith","url":"https://rusith.me/about","logo":{"@type":"ImageObject","url":"https://rusith.me/images/rusith/picture.jpg"}},"image":"/post-data/2019-11-03-nuget-feed-s3/banner.png","about":"Creating a Nuget feed on an AWS S3 bucket using Sleet","datePublished":"Sat Nov 02 2019 00:00:00 GMT+0000 (Coordinated Universal Time)","dateModified":"Sat Nov 02 2019 00:00:00 GMT+0000 (Coordinated Universal Time)"}</script><meta name="next-head-count" content="27"/><link rel="preload" href="/_next/static/css/7220332d6168fb06.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7220332d6168fb06.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0662676664ee362f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0662676664ee362f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-05c0aa1e498fcb8c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f89480c30d9a5d02.js" defer=""></script><script src="/_next/static/chunks/947-277c090e7d6803d0.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...path%5D%5D-d5cf2aa81a49e144.js" defer=""></script><script src="/_next/static/PaoTT2YDvwYY_jbobaNoC/_buildManifest.js" defer=""></script><script src="/_next/static/PaoTT2YDvwYY_jbobaNoC/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Sidebar_r__IEuUi"><div class="Sidebar_sticky__RE23V"><div class="Sidebar_about__s_kM6"><h2><a href="/">Rusith.me</a></h2><div class="Sidebar_socialButtons__XcH6p"><a href="https://www.linkedin.com/in/shanaka-rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="LinkedIn icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MTYsMzJIMzEuOUMxNC4zLDMyLDAsNDYuNSwwLDY0LjN2MzgzLjRDMCw0NjUuNSwxNC4zLDQ4MCwzMS45LDQ4MEg0MTZjMTcuNiwwLDMyLTE0LjUsMzItMzIuM1Y2NC4zCglDNDQ4LDQ2LjUsNDMzLjYsMzIsNDE2LDMyeiBNMTM1LjQsNDE2SDY5VjIwMi4yaDY2LjVWNDE2SDEzNS40eiBNMTAyLjIsMTczYy0yMS4zLDAtMzguNS0xNy4zLTM4LjUtMzguNVM4MC45LDk2LDEwMi4yLDk2CgljMjEuMiwwLDM4LjUsMTcuMywzOC41LDM4LjVDMTQwLjcsMTU1LjgsMTIzLjUsMTczLDEwMi4yLDE3M3ogTTM4NC4zLDQxNmgtNjYuNFYzMTJjMC0yNC44LTAuNS01Ni43LTM0LjUtNTYuNwoJYy0zNC42LDAtMzkuOSwyNy0zOS45LDU0LjlWNDE2aC02Ni40VjIwMi4yaDYzLjd2MjkuMmgwLjljOC45LTE2LjgsMzAuNi0zNC41LDYyLjktMzQuNWM2Ny4yLDAsNzkuNyw0NC4zLDc5LjcsMTAxLjlWNDE2eiIvPgo8L3N2Zz4K"/></a><a href="https://github.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Github icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMzUyYzI2LjUsMCw0OC0yMS41LDQ4LTQ4VjgwCglDNDQ4LDUzLjUsNDI2LjUsMzIsNDAwLDMyeiBNMjc3LjMsNDE1LjdjLTguNCwxLjUtMTEuNS0zLjctMTEuNS04YzAtNS40LDAuMi0zMywwLjItNTUuM2MwLTE1LjYtNS4yLTI1LjUtMTEuMy0zMC43CgljMzctNC4xLDc2LTkuMiw3Ni03My4xYzAtMTguMi02LjUtMjcuMy0xNy4xLTM5YzEuNy00LjMsNy40LTIyLTEuNy00NWMtMTMuOS00LjMtNDUuNywxNy45LTQ1LjcsMTcuOWMtMTMuMi0zLjctMjcuNS01LjYtNDEuNi01LjYKCXMtMjguNCwxLjktNDEuNiw1LjZjMCwwLTMxLjgtMjIuMi00NS43LTE3LjljLTkuMSwyMi45LTMuNSw0MC42LTEuNyw0NWMtMTAuNiwxMS43LTE1LjYsMjAuOC0xNS42LDM5YzAsNjMuNiwzNy4zLDY5LDc0LjMsNzMuMQoJYy00LjgsNC4zLTkuMSwxMS43LTEwLjYsMjIuM2MtOS41LDQuMy0zMy44LDExLjctNDguMy0xMy45Yy05LjEtMTUuOC0yNS41LTE3LjEtMjUuNS0xNy4xYy0xNi4yLTAuMi0xLjEsMTAuMi0xLjEsMTAuMgoJYzEwLjgsNSwxOC40LDI0LjIsMTguNCwyNC4yYzkuNywyOS43LDU2LjEsMTkuNyw1Ni4xLDE5LjdjMCwxMy45LDAuMiwzNi41LDAuMiw0MC42YzAsNC4zLTMsOS41LTExLjUsOAoJYy02Ni0yMi4xLTExMi4yLTg0LjktMTEyLjItMTU4LjNjMC05MS44LDcwLjItMTYxLjUsMTYyLTE2MS41UzM4OCwxNjUuNiwzODgsMjU3LjRDMzg4LjEsMzMwLjgsMzQzLjMsMzkzLjcsMjc3LjMsNDE1Ljd6CgkgTTE3OS4yLDM1NC42Yy0xLjksMC40LTMuNy0wLjQtMy45LTEuN2MtMC4yLTEuNSwxLjEtMi44LDMtMy4yYzEuOS0wLjIsMy43LDAuNiwzLjksMS45QzE4Mi41LDM1Mi45LDE4MS4yLDM1NC4yLDE3OS4yLDM1NC42CglMMTc5LjIsMzU0LjZ6IE0xNjkuNywzNTMuN2MwLDEuMy0xLjUsMi40LTMuNSwyLjRjLTIuMiwwLjItMy43LTAuOS0zLjctMi40YzAtMS4zLDEuNS0yLjQsMy41LTIuNAoJQzE2Ny45LDM1MS4xLDE2OS43LDM1Mi4yLDE2OS43LDM1My43eiBNMTU2LDM1Mi42Yy0wLjQsMS4zLTIuNCwxLjktNC4xLDEuM2MtMS45LTAuNC0zLjItMS45LTIuOC0zLjJjMC40LTEuMywyLjQtMS45LDQuMS0xLjUKCUMxNTUuMiwzNDkuOCwxNTYuNSwzNTEuMywxNTYsMzUyLjZMMTU2LDM1Mi42eiBNMTQzLjcsMzQ3LjJjLTAuOSwxLjEtMi44LDAuOS00LjMtMC42Yy0xLjUtMS4zLTEuOS0zLjItMC45LTQuMQoJYzAuOS0xLjEsMi44LTAuOSw0LjMsMC42QzE0NC4xLDM0NC40LDE0NC42LDM0Ni40LDE0My43LDM0Ny4yeiBNMTM0LjYsMzM4LjFjLTAuOSwwLjYtMi42LDAtMy43LTEuNXMtMS4xLTMuMiwwLTMuOQoJYzEuMS0wLjksMi44LTAuMiwzLjcsMS4zQzEzNS43LDMzNS41LDEzNS43LDMzNy4zLDEzNC42LDMzOC4xeiBNMTI4LjEsMzI4LjRjLTAuOSwwLjktMi40LDAuNC0zLjUtMC42Yy0xLjEtMS4zLTEuMy0yLjgtMC40LTMuNQoJYzAuOS0wLjksMi40LTAuNCwzLjUsMC42QzEyOC44LDMyNi4yLDEyOSwzMjcuNywxMjguMSwzMjguNHogTTEyMS40LDMyMWMtMC40LDAuOS0xLjcsMS4xLTIuOCwwLjRjLTEuMy0wLjYtMS45LTEuNy0xLjUtMi42CgljMC40LTAuNiwxLjUtMC45LDIuOC0wLjRDMTIxLjIsMzE5LjEsMTIxLjgsMzIwLjIsMTIxLjQsMzIxeiIvPgo8L3N2Zz4K"/></a><a href="https://gitlab.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Gitlab icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUuMiwyNC45Yy0zLjEtOC45LTE1LjctOC45LTE4LjksMEwyOS44LDE5OS43aDEzMkMxNjEuNywxOTkuNywxMDUuMiwyNC45LDEwNS4yLDI0Ljl6IE0wLjksMjg3LjcKCWMtMi42LDgsMC4zLDE2LjksNy4xLDIybDI0Ny45LDE4NGwtMjI2LjItMjk0TDAuOSwyODcuN3ogTTE2MS43LDE5OS43bDk0LjMsMjk0bDk0LjMtMjk0SDE2MS43eiBNNTExLjEsMjg3LjdsLTI4LjgtODhMMjU2LDQ5My43CglsMjQ3LjktMTg0QzUxMC44LDMwNC42LDUxMy42LDI5NS43LDUxMS4xLDI4Ny43eiBNNDI1LjcsMjQuOWMtMy4xLTguOS0xNS43LTguOS0xOC45LDBsLTU2LjYsMTc0LjhoMTMyTDQyNS43LDI0Ljl6Ii8+Cjwvc3ZnPgo="/></a><a href="http://goodreads.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="GoodReads icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yOTkuOSwxOTEuMmM1LjEsMzcuMy00LjcsNzktMzUuOSwxMDAuN2MtMjIuMywxNS41LTUyLjgsMTQuMS03MC44LDUuN2MtMzcuMS0xNy4zLTQ5LjUtNTguNi00Ni44LTk3LjIKCWM0LjMtNjAuOSw0MC45LTg3LjksNzUuMy04Ny41QzI2OC42LDExMi43LDI5My41LDE0NC43LDI5OS45LDE5MS4yTDI5OS45LDE5MS4yeiBNNDQ4LDg4djMzNmMwLDMwLjktMjUuMSw1Ni01Niw1Nkg1NgoJYy0zMC45LDAtNTYtMjUuMS01Ni01NlY4OGMwLTMwLjksMjUuMS01Niw1Ni01NmgzMzZDNDIyLjksMzIsNDQ4LDU3LjEsNDQ4LDg4eiBNMzMwLDMxMy4yYzAsMC0wLjEtMzQtMC4xLTIxNy4zaC0yOXY0MC4zCgljLTAuOCwwLjMtMS4yLTAuNS0xLjYtMS4yYy05LjYtMjAuNy0zNS45LTQ2LjMtNzYtNDZjLTUxLjksMC40LTg3LjIsMzEuMi0xMDAuNiw3Ny44Yy00LjMsMTQuOS01LjgsMzAuMS01LjUsNDUuNgoJYzEuNyw3Ny45LDQ1LjEsMTE3LjgsMTEyLjQsMTE1LjJjMjguOS0xLjEsNTQuNS0xNyw2OS00NS4yYzAuNS0xLDEuMS0xLjksMS43LTIuOWMwLjIsMC4xLDAuNCwwLjEsMC42LDAuMgoJYzAuMywzLjgsMC4yLDMwLjcsMC4xLDM0LjVjLTAuMiwxNC44LTIsMjkuNS03LjIsNDMuNWMtNy44LDIxLTIyLjMsMzQuNy00NC41LDM5LjVjLTE3LjgsMy45LTM1LjYsMy44LTUzLjItMS4yCgljLTIxLjUtNi4xLTM2LjUtMTktNDEuMS00MS44Yy0wLjMtMS42LTEuMy0xLjMtMi4zLTEuM2gtMjYuOGMwLjgsMTAuNiwzLjIsMjAuMyw4LjUsMjkuMmMyNC4yLDQwLjUsODIuNyw0OC41LDEyOC4yLDM3LjQKCUMzMTIuNSw0MDcuMiwzMjkuOSwzNjQuNiwzMzAsMzEzLjJMMzMwLDMxMy4yeiIvPgo8L3N2Zz4K"/></a><a href="https://twitter.com/rusith_" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Twitter icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMzUyYzI2LjUsMCw0OC0yMS41LDQ4LTQ4VjgwCglDNDQ4LDUzLjUsNDI2LjUsMzIsNDAwLDMyeiBNMzUxLjEsMTkwLjhjMC4yLDIuOCwwLjIsNS43LDAuMiw4LjVjMCw4Ni43LTY2LDE4Ni42LTE4Ni42LDE4Ni42Yy0zNy4yLDAtNzEuNy0xMC44LTEwMC43LTI5LjQKCWM1LjMsMC42LDEwLjQsMC44LDE1LjgsMC44YzMwLjcsMCw1OC45LTEwLjQsODEuNC0yOGMtMjguOC0wLjYtNTMtMTkuNS02MS4zLTQ1LjVjMTAuMSwxLjUsMTkuMiwxLjUsMjkuNi0xLjIKCWMtMzAtNi4xLTUyLjUtMzIuNS01Mi41LTY0LjR2LTAuOGM4LjcsNC45LDE4LjksNy45LDI5LjYsOC4zYy0xOC4zLTEyLjItMjkuMi0zMi43LTI5LjItNTQuNmMwLTEyLjIsMy4yLTIzLjQsOC45LTMzLjEKCWMzMi4zLDM5LjgsODAuOCw2NS44LDEzNS4yLDY4LjZjLTkuMy00NC41LDI0LTgwLjYsNjQtODAuNmMxOC45LDAsMzUuOSw3LjksNDcuOSwyMC43YzE0LjgtMi44LDI5LTguMyw0MS42LTE1LjgKCWMtNC45LDE1LjItMTUuMiwyOC0yOC44LDM2LjFjMTMuMi0xLjQsMjYtNS4xLDM3LjgtMTAuMkMzNzUuMSwxNjkuOSwzNjMuOSwxODEuNSwzNTEuMSwxOTAuOHoiLz4KPC9zdmc+Cg=="/></a><a href="https://www.facebook.com/shanaka.rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Facebook icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMTM3LjNWMzI3LjdoLTYzVjI1Nmg2M3YtNTQuNgoJYzAtNjIuMiwzNy05Ni41LDkzLjctOTYuNWMyNy4xLDAsNTUuNSw0LjgsNTUuNSw0Ljh2NjFoLTMxLjNjLTMwLjgsMC00MC40LDE5LjEtNDAuNCwzOC43VjI1Nmg2OC44bC0xMSw3MS43aC01Ny44VjQ4MEg0MDAKCWMyNi41LDAsNDgtMjEuNSw0OC00OFY4MEM0NDgsNTMuNSw0MjYuNSwzMiw0MDAsMzJ6Ii8+Cjwvc3ZnPgo="/></a></div><p>A blog from a tech and art enthusiast</p></div><div class="Sidebar_nav__CTYKS"><div class="Sidebar_tagWrapper__w460D"><a href="/tag/programming/"><span class="Sidebar_tag__mAo8y">#<!-- -->programming</span></a><a href="/tag/aws/"><span class="Sidebar_tag__mAo8y">#<!-- -->aws</span></a><a href="/tag/web/"><span class="Sidebar_tag__mAo8y">#<!-- -->web</span></a><a href="/tag/machineLearning/"><span class="Sidebar_tag__mAo8y">#<!-- -->machineLearning</span></a><a href="/tag/react/"><span class="Sidebar_tag__mAo8y">#<!-- -->react</span></a><a href="/tag/javascript/"><span class="Sidebar_tag__mAo8y">#<!-- -->javascript</span></a><a href="/tag/dataScience/"><span class="Sidebar_tag__mAo8y">#<!-- -->dataScience</span></a><a href="/tag/typescript/"><span class="Sidebar_tag__mAo8y">#<!-- -->typescript</span></a><a href="/tag/r/"><span class="Sidebar_tag__mAo8y">#<!-- -->r</span></a><a href="/tag/csharp/"><span class="Sidebar_tag__mAo8y">#<!-- -->csharp</span></a></div></div></div></div><div class="comp_content__73ns2"><div><h1>Running a Nuget Feed on S3 with Automated Deployments</h1><div class="Post_tags__HKWUb"><a class="Post_tag__5GXoX" href="https://rusith.me/tag/programming">#<!-- -->programming</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/dotnet">#<!-- -->dotnet</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/s3">#<!-- -->s3</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/aws">#<!-- -->aws</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/nuget">#<!-- -->nuget</a></div><span class="Post_date__h8Of6">Sat, Nov 2, 2019</span><div><p><img alt="Page banner" class="Post_banner__soX4H" src="https://rusith.me/post-data/2019-11-03-nuget-feed-s3/banner.png"></p>
<p>Whenever you wanted to create a separate Nuget feed for your Nuget packages, there are Nuber of ways to do that. Most of them include some computing. which means you have to provision a server and run a Nuget application on a computer. But its also possible to create a static Nuget feed on a cloud file system like S3. One way to do this is by using the <a target="_blank" href="https://github.com/emgarten/Sleet">Sleet</a> tool. which is an open-source and free application.</p>
<h3 id="whatissleet">What is Sleet</h3>
<p>Sleet is a CLI tool that allows you to create Nuget feeds on <code>S3</code> or <code>Azure Storage</code> easily. Sleet creates a file system that doesn't require any computing (Serverless). Sleet also supports Symbols so you can create a symbol server easily.</p>
<h3 id="automating">Automating</h3>
<p>You can do everything Sleet can do with just your terminal and an S3 bucket. but this post is about automating that process with <code>Git</code>, <code>GitLab</code>(or any other CI provider). I am going to create a solution with few Class libraries and create a deployment pipeline to automatically deploy them as Nuget packages to our Nuget source which will be in <code>S3</code>.</p>
<p>Check the <a target="_blank" href="https://github.com/emgarten/Sleet/blob/master/doc/index.md">Sleet Documentation</a> for detailed information about Sleet.</p>
<h3 id="settingupthes3bucket">Setting up the S3 Bucket</h3>
<p>The first thing we have to do is to create the S3 bucket that we will be using to create the Nuget feed. I am going to name mine as <code>rusith.nugetpackages</code>. To access the bucket, you will have to make it public. You can limit it to an IP range if you want to increase security. So change the bucket policy to something like below. It will allow access to the bucket from anywhere.</p>
<pre><code class="hljs json language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;Version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2012-10-17&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;Statement&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;Sid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;AddPerm&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Effect&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Allow&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Principal&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;*&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;s3:GetObject&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Resource&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;arn:aws:s3:::&lt;your bucket name&gt;/*&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="iamsettings">IAM Settings</h3>
<p>Now our bucket is all setup. Now we need a way to modify the content of the bucket from the CI server. for this, we can create an IAM policy that will give access to the S3 bucket and then, create a user with that policy attached. Then we can use the credentials of that user from the CI server to upload files.</p>
<p>The IAM policy should be something like below. It will give write access to the source bucket that we have created.</p>
<pre><code class="hljs json language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;Version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2012-10-17&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;Statement&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;Sid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;VisualEditor0&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Effect&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Allow&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;s3:PutObject&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;s3:GetObjectAcl&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;s3:GetObject&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;s3:ListBucket&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;s3:DeleteObject&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Resource&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;arn:aws:s3:::&lt;bucket name&gt;/*&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;arn:aws:s3:::&lt;bucket name&gt;&quot;</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;Sid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;VisualEditor1&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Effect&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Allow&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">&quot;s3:GetAccountPublicAccessBlock&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:ListAllMyBuckets&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:ListJobs&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:CreateJob&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:HeadBucket&quot;</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Resource&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;*&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>IAM policy is now ready to be used. Now we just have to create a new user and attach the policy to that user. Make sure you have given programmatic access to the user when creating. as we are going to use these credentials only through the API. it is necessary to have programmatic access.</p>
<p><img alt="Create a new IAM user" src="https://rusith.me/post-data/2019-11-03-nuget-feed-s3/iam-create-user.png"></p>
<p>And don't forget to attach the policy you just created.</p>
<p><img alt="Create user policy for IAM user" src="https://rusith.me/post-data/2019-11-03-nuget-feed-s3/iam-create-user-policy.png"></p>
<p>Once the user is created. don't forget to take a copy of the access keys of the user. Now the IAM part is done. we can go ahead and implement our packages.</p>
<h3 id="creatingthepackages">Creating the Packages</h3>
<p>For this demonstration, I will create a simple solution with only two class libraries that can be used as Nuget packages. Below commands will create the solution structure.</p>
<pre><code class="hljs sh language-sh">dotnet new sln --name NugetPackages
dotnet new classlib --name Rusith.FileHelpers
dotnet new classlib --name Rusith.EmailHelpers
dotnet sln ./NugetPackages.sln add ./Rusith.EmailHelpers/Rusith.EmailHelpers.csproj
dotnet sln ./NugetPackages.sln add ./Rusith.FileHelpers/Rusith.FileHelpers.csproj
</code></pre>
<p>Now you can write your code for each library that should be there in the 1.0 version if you like. And make sure you have filled the information required to create a Nuget package in each project.</p>
<p><img alt="Nuget feed project settings" src="https://rusith.me/post-data/2019-11-03-nuget-feed-s3/project-settings.png"></p>
<p>Now you will have to initialize the Git repository, create the origin repository and push the code if you haven't already.</p>
<h3 id="ci">CI</h3>
<p>Okay, now we have the projects with us, now we can go ahead and start creating the CI pipeline to automate the build process with <code>Gitlab</code>. My approach will be to create a single script that will go through all projects in the solution, push them to S3 using Sleet. The script for doing that would look like below.</p>
<pre><code class="hljs sh language-sh"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;<span class="hljs-variable">$PATH</span>:/root/.dotnet/tools&quot;</span>
dotnet tool install -g sleet <span class="hljs-comment"># Installing Sleet</span>

<span class="hljs-built_in">cd</span> ./source
dotnet build -c Release <span class="hljs-comment"># Build the solution with release configuration</span>

<span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$PWD</span>&quot;</span>/* <span class="hljs-comment"># For everything inside the folder</span>
<span class="hljs-keyword">do</span>
  <span class="hljs-keyword">if</span> [[ (-d <span class="hljs-variable">$path</span>) &amp;&amp; (<span class="hljs-variable">$path</span> != *.Tests) ]]; <span class="hljs-keyword">then</span> <span class="hljs-comment"># If the path is a directory</span>
    dotnet pack <span class="hljs-variable">$path</span> -c Release --force --include-symbols -o <span class="hljs-variable">$path</span>/package <span class="hljs-comment"># Package the project</span>
    nupkgs=`<span class="hljs-built_in">ls</span> <span class="hljs-variable">$path</span>/package/*.nupkg`
    <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> <span class="hljs-variable">$nupkgs</span> <span class="hljs-comment"># Go though the package files</span>
    <span class="hljs-keyword">do</span>
      sleet push <span class="hljs-variable">$f</span> --config ./sleet.json --<span class="hljs-built_in">source</span> NugetSource <span class="hljs-comment"># Push to the source</span>
    <span class="hljs-keyword">done</span>
  <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>
</code></pre>
<p>What does this do?</p>
<ul>
<li>It will find the project folders and create Nuget packages using the <code>dotnet pack</code> command.</li>
<li>Then it will find the <code>.nupkg</code> files and run <code>sleet push</code> using the <code>./sleet.json</code> file as the configuration. on each of them to the <code>NugetSource</code>.</li>
</ul>
<p>For this to work, we need the <code>sleet.json</code> file in the repository. This is the file where we specify the configuration for Sleet. Here we specify the sources that we are going to use. the source, for now, is the <code>NugetSource</code> which is the S3 bucket we have created. because we are not providing any credentials for S3 in this configuration, we will have to provide them as standard AWS environment variables later.</p>
<pre><code class="hljs json language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;username&gt;&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;useremail&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;email&gt;&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;sources&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;NugetSource&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;s3&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;bucketName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;your bucket name&gt;&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;region&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;your bucket region&gt;&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Now we just have to tell the CI server that we want to run the <code>push.sh</code> script every time we push to a release branch. I use this configuration below to do that in Gitlab CI.</p>
<pre><code class="hljs yml language-yml"><span class="hljs-attr">image:</span> <span class="hljs-string">microsoft/dotnet:latest</span>
<span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">build</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">release</span>

<span class="hljs-attr">build:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">build</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">dotnet</span> <span class="hljs-string">build</span>

<span class="hljs-attr">release:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">release</span>
  <span class="hljs-attr">only:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">release</span>
  <span class="hljs-attr">before_script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">chmod</span> <span class="hljs-string">+x</span> <span class="hljs-string">./push.sh</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">bash</span> <span class="hljs-string">./push.sh</span>
  <span class="hljs-attr">environment:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">Production</span>
</code></pre>
<p>What this does is it will run a build for every commit but only run the push script when we push our code to the <code>release</code> branch.</p>
<p>Now we have to add the credentials for the user that we created in the IAM console as environment variables in the CI server. the main two variables that are required are <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code>.</p>
<p><img alt="Secret variables" src="https://rusith.me/post-data/2019-11-03-nuget-feed-s3/variables.png"></p>
<p>Now, everything is ready to go. Push your code to the <code>release</code> branch and it will build the project and Sleet will do its magic to create the Nuget source on S3.</p>
<p>If you have done everything correctly, You will see an output like below in the CI console.</p>
<p><img alt="Pipeline result" src="https://rusith.me/post-data/2019-11-03-nuget-feed-s3/pipeline-result.png"></p>
<p>And the S3 Bucket content will be updated to look something like below.</p>
<p><img alt="S3 result" src="https://rusith.me/post-data/2019-11-03-nuget-feed-s3/s3-result.png"></p>
<p>Now you can use the Nuget packages you just created. for this, you must first add the URL to the <code>index.json</code> file of the S3 bucket as a Nuget source in your IDE. something like below (Rider).</p>
<p><img alt="Using the Nuget feed" src="https://rusith.me/post-data/2019-11-03-nuget-feed-s3/feed.png"></p>
<p>And now, you can use the Packages just like you would use a normal Nuget package.</p>
<p><img alt="Install packages using the new feed" src="https://rusith.me/post-data/2019-11-03-nuget-feed-s3/nuget-install.png"></p></div></div><div class="Post_related__V0k3K"><h2>Related Posts</h2><ul class="Post_relatedPosts__co9O7"><li><h3><a href="https://rusith.me/blog/deploy-app-on-aws-ecs-with-cdk-auto-scaling-and-load-balancing">Deploying an app on AWS ECS with CDK<small>Wed, Feb 15, 2023</small></a></h3></li><li><h3><a href="https://rusith.me/blog/building-a-website-on-s3">Deploying a Website on S3 With SSL, Continuous Integration<small>Mon, Aug 5, 2019</small></a></h3></li><li><h3><a href="https://rusith.me/blog/re-usable-presto-worker-image-ec2">Creating a Re-Usable Presto Worker Image in EC2<small>Thu, Jul 25, 2019</small></a></h3></li></ul></div><div id="disqus_thread"></div></div><div class="sbuttons"><a href="https://www.facebook.com/sharer/sharer.php?u=https://rusith.me/blog/nuget-feed-on-s3" target="_blank" class="sbutton fb" title="Share on Facebook" rel="noreferrer"><img alt="Facebook icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMjAgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMjAgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNzkuMSwyODhsMTQuMi05Mi43aC04OC45di02MC4xYzAtMjUuMywxMi40LTUwLjEsNTIuMi01MC4xaDQwLjRWNi4zYzAsMC0zNi43LTYuMy03MS43LTYuMwoJYy03My4yLDAtMTIxLjEsNDQuNC0xMjEuMSwxMjQuN3Y3MC42SDIyLjlWMjg4aDgxLjR2MjI0aDEwMC4yVjI4OEgyNzkuMXoiLz4KPC9zdmc+Cg=="/></a><a href="https://twitter.com/intent/tweet?text=https://rusith.me/blog/nuget-feed-on-s3" target="_blank" class="sbutton twitt" title="Share on Twitter" rel="noreferrer"><img alt="Twitter icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NTkuNCwxNTEuN2MwLjMsNC41LDAuMyw5LjEsMC4zLDEzLjZjMCwxMzguNy0xMDUuNiwyOTguNi0yOTguNiwyOTguNmMtNTkuNSwwLTExNC43LTE3LjItMTYxLjEtNDcuMQoJYzguNCwxLDE2LjYsMS4zLDI1LjMsMS4zYzQ5LjEsMCw5NC4yLTE2LjYsMTMwLjMtNDQuOGMtNDYuMS0xLTg0LjgtMzEuMi05OC4xLTcyLjhjNi41LDEsMTMsMS42LDE5LjgsMS42YzkuNCwwLDE4LjgtMS4zLDI3LjYtMy42CgljLTQ4LjEtOS43LTg0LjEtNTItODQuMS0xMDN2LTEuM2MxNCw3LjgsMzAuMiwxMi43LDQ3LjQsMTMuM2MtMjguMy0xOC44LTQ2LjgtNTEtNDYuOC04Ny40YzAtMTkuNSw1LjItMzcuNCwxNC4zLTUzCglDODcuNCwxMzAuOSwxNjUsMTcyLjUsMjUyLjEsMTc3LjFjLTEuNi03LjgtMi42LTE1LjktMi42LTI0YzAtNTcuOCw0Ni44LTEwNC45LDEwNC45LTEwNC45YzMwLjIsMCw1Ny41LDEyLjcsNzYuNywzMy4xCgljMjMuNy00LjUsNDYuNS0xMy4zLDY2LjYtMjUuM2MtNy44LDI0LjQtMjQuNCw0NC44LTQ2LjEsNTcuOGMyMS4xLTIuMyw0MS42LTguMSw2MC40LTE2LjJDNDk3LjcsMTE4LjMsNDc5LjgsMTM2LjgsNDU5LjQsMTUxLjcKCUw0NTkuNCwxNTEuN3oiLz4KPC9zdmc+Cg=="/></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://rusith.me/blog/nuget-feed-on-s3&amp;title=&amp;summary=&amp;source=" target="_blank" class="sbutton linkedin" title="Share on Linkedin" rel="noreferrer"><img alt="LinkedIn icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDAuMyw0NDhINy40VjE0OC45aDkyLjlWNDQ4eiBNNTMuOCwxMDguMUMyNC4xLDEwOC4xLDAsODMuNSwwLDUzLjhDMCwyNC4xLDI0LjEsMCw1My44LDAKCWMyOS43LDAsNTMuOCwyNC4xLDUzLjgsNTMuOEMxMDcuNiw4My41LDgzLjUsMTA4LjEsNTMuOCwxMDguMXogTTQ0Ny45LDQ0OGgtOTIuN1YzMDIuNGMwLTM0LjctMC43LTc5LjItNDguMy03OS4yCgljLTQ4LjMsMC01NS43LDM3LjctNTUuNyw3Ni43VjQ0OGgtOTIuOFYxNDguOWg4OS4xdjQwLjhoMS4zYzEyLjQtMjMuNSw0Mi43LTQ4LjMsODcuOS00OC4zYzk0LDAsMTExLjMsNjEuOSwxMTEuMywxNDIuM1Y0NDhINDQ3Ljl6CgkiLz4KPC9zdmc+Cg=="/></a><a target="_blank" class="sbutton mainsbutton"><img alt="Share button" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNTIsMzIwYy0yNS42LDAtNDguOSwxMC02Ni4xLDI2LjRsLTk4LjMtNjEuNWM1LjktMTguOCw1LjktMzkuMSwwLTU3LjhsOTguMy02MS41CglDMzAzLjEsMTgyLDMyNi40LDE5MiwzNTIsMTkyYzUzLDAsOTYtNDMsOTYtOTZTNDA1LDAsMzUyLDBzLTk2LDQzLTk2LDk2YzAsOS44LDEuNSwxOS42LDQuNCwyOC45bC05OC4zLDYxLjUKCUMxNDQuOSwxNzAsMTIxLjYsMTYwLDk2LDE2MGMtNTMsMC05Niw0My05Niw5NnM0Myw5Niw5Niw5NmMyNS42LDAsNDguOS0xMCw2Ni4xLTI2LjRsOTguMyw2MS41Yy0yLjksOS40LTQuNCwxOS4xLTQuNCwyOC45CgljMCw1Myw0Myw5Niw5Niw5NnM5Ni00Myw5Ni05NlM0MDUsMzIwLDM1MiwzMjBMMzUyLDMyMHogTTM1Miw0OGMyNi41LDAsNDgsMjEuNSw0OCw0OHMtMjEuNSw0OC00OCw0OHMtNDgtMjEuNS00OC00OAoJUzMyNS41LDQ4LDM1Miw0OHogTTk2LDMwNGMtMjYuNSwwLTQ4LTIxLjUtNDgtNDhzMjEuNS00OCw0OC00OHM0OCwyMS41LDQ4LDQ4UzEyMi41LDMwNCw5NiwzMDR6IE0zNTIsNDY0Yy0yNi41LDAtNDgtMjEuNS00OC00OAoJczIxLjUtNDgsNDgtNDhzNDgsMjEuNSw0OCw0OFMzNzguNSw0NjQsMzUyLDQ2NHoiLz4KPC9zdmc+Cg=="/></a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"fileName":"2019-11-03-nuget-feed-on-s3.md","fullPath":"/home/runner/work/rusith.me/rusith.me/modules/blog/posts/2019-11-03-nuget-feed-on-s3.md","title":"Running a Nuget Feed on S3 with Automated Deployments","tags":["programming","dotnet","s3","aws","nuget"],"comments":true,"description":"There are many ways of creating a Nuget feed. but did you know that you can run a Nuget feed on S3 without any computing infrastructure? In this post, I will show you how you can create a Nuget feed on S3 using Sleet and automate the deployment process for packages.","banner":"/post-data/2019-11-03-nuget-feed-s3/banner.png","dateCreated":"Sat Nov 02 2019 00:00:00 GMT+0000 (Coordinated Universal Time)","dateModified":"Sat Nov 02 2019 00:00:00 GMT+0000 (Coordinated Universal Time)","datePublished":"Sun Nov 03 2019 00:00:00 GMT+0000 (Coordinated Universal Time)","dependencies":"AWS","about":"Creating a Nuget feed on an AWS S3 bucket using Sleet","path":"/blog/nuget-feed-on-s3","oldPath":"/2019/11/03/nuget-feed-on-s3","dateCreatedFormatted":"Sat, Nov 2, 2019","fullUrl":"https://rusith.me/blog/nuget-feed-on-s3","fileContent":"---\ntitle: Running a Nuget Feed on S3 with Automated Deployments\ntags: programming dotnet s3 aws nuget\ncomments: true\ndescription: There are many ways of creating a Nuget feed. but did you know that you can run a Nuget feed on S3 without any computing infrastructure? In this post, I will show you how you can create a Nuget feed on S3 using Sleet and automate the deployment process for packages.\nbanner: /post-data/2019-11-03-nuget-feed-s3/banner.png\ndateCreated: 2019-11-02\ndateModified: 2019-11-02\ndatePublished: 2019-11-03\ndependencies: AWS\nabout: Creating a Nuget feed on an AWS S3 bucket using Sleet\npath: /nuget-feed-on-s3\noldPath: /2019/11/03/nuget-feed-on-s3\n---\n\n\u003cimg alt=\"Page banner\" class=\"$$styles.banner\" src=\"$$page_banner_full_path\"\u003e\n\nWhenever you wanted to create a separate Nuget feed for your Nuget packages, there are Nuber of ways to do that. Most of them include some computing. which means you have to provision a server and run a Nuget application on a computer. But its also possible to create a static Nuget feed on a cloud file system like S3. One way to do this is by using the \u003ca target=\"_blank\" href=\"https://github.com/emgarten/Sleet\"\u003eSleet\u003c/a\u003e tool. which is an open-source and free application.\n\n### What is Sleet\n\nSleet is a CLI tool that allows you to create Nuget feeds on `S3` or `Azure Storage` easily. Sleet creates a file system that doesn't require any computing (Serverless). Sleet also supports Symbols so you can create a symbol server easily.\n\n### Automating\n\nYou can do everything Sleet can do with just your terminal and an S3 bucket. but this post is about automating that process with `Git`, `GitLab`(or any other CI provider). I am going to create a solution with few Class libraries and create a deployment pipeline to automatically deploy them as Nuget packages to our Nuget source which will be in `S3`.\n\nCheck the \u003ca target=\"_blank\" href=\"https://github.com/emgarten/Sleet/blob/master/doc/index.md\"\u003eSleet Documentation\u003c/a\u003e for detailed information about Sleet.\n\n### Setting up the S3 Bucket\n\nThe first thing we have to do is to create the S3 bucket that we will be using to create the Nuget feed. I am going to name mine as `rusith.nugetpackages`. To access the bucket, you will have to make it public. You can limit it to an IP range if you want to increase security. So change the bucket policy to something like below. It will allow access to the bucket from anywhere.\n\n```json\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AddPerm\",\n      \"Effect\": \"Allow\",\n      \"Principal\": \"*\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::\u003cyour bucket name\u003e/*\"\n    }\n  ]\n}\n```\n\n### IAM Settings\n\nNow our bucket is all setup. Now we need a way to modify the content of the bucket from the CI server. for this, we can create an IAM policy that will give access to the S3 bucket and then, create a user with that policy attached. Then we can use the credentials of that user from the CI server to upload files.\n\nThe IAM policy should be something like below. It will give write access to the source bucket that we have created.\n\n```json\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\"s3:PutObject\", \"s3:GetObjectAcl\", \"s3:GetObject\", \"s3:ListBucket\", \"s3:DeleteObject\"],\n      \"Resource\": [\"arn:aws:s3:::\u003cbucket name\u003e/*\", \"arn:aws:s3:::\u003cbucket name\u003e\"]\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetAccountPublicAccessBlock\",\n        \"s3:ListAllMyBuckets\",\n        \"s3:ListJobs\",\n        \"s3:CreateJob\",\n        \"s3:HeadBucket\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n```\n\nIAM policy is now ready to be used. Now we just have to create a new user and attach the policy to that user. Make sure you have given programmatic access to the user when creating. as we are going to use these credentials only through the API. it is necessary to have programmatic access.\n\n\u003cimg alt=\"Create a new IAM user\" src=\"$$base_url/post-data/2019-11-03-nuget-feed-s3/iam-create-user.png\"\u003e\n\nAnd don't forget to attach the policy you just created.\n\n\u003cimg alt=\"Create user policy for IAM user\" src=\"$$base_url/post-data/2019-11-03-nuget-feed-s3/iam-create-user-policy.png\"\u003e\n\nOnce the user is created. don't forget to take a copy of the access keys of the user. Now the IAM part is done. we can go ahead and implement our packages.\n\n### Creating the Packages\n\nFor this demonstration, I will create a simple solution with only two class libraries that can be used as Nuget packages. Below commands will create the solution structure.\n\n```sh\ndotnet new sln --name NugetPackages\ndotnet new classlib --name Rusith.FileHelpers\ndotnet new classlib --name Rusith.EmailHelpers\ndotnet sln ./NugetPackages.sln add ./Rusith.EmailHelpers/Rusith.EmailHelpers.csproj\ndotnet sln ./NugetPackages.sln add ./Rusith.FileHelpers/Rusith.FileHelpers.csproj\n```\n\nNow you can write your code for each library that should be there in the 1.0 version if you like. And make sure you have filled the information required to create a Nuget package in each project.\n\n\u003cimg alt=\"Nuget feed project settings\" src=\"$$base_url/post-data/2019-11-03-nuget-feed-s3/project-settings.png\"\u003e\n\nNow you will have to initialize the Git repository, create the origin repository and push the code if you haven't already.\n\n### CI\n\nOkay, now we have the projects with us, now we can go ahead and start creating the CI pipeline to automate the build process with `Gitlab`. My approach will be to create a single script that will go through all projects in the solution, push them to S3 using Sleet. The script for doing that would look like below.\n\n```sh\nexport PATH=\"$PATH:/root/.dotnet/tools\"\ndotnet tool install -g sleet # Installing Sleet\n\ncd ./source\ndotnet build -c Release # Build the solution with release configuration\n\nfor path in \"$PWD\"/* # For everything inside the folder\ndo\n  if [[ (-d $path) \u0026\u0026 ($path != *.Tests) ]]; then # If the path is a directory\n    dotnet pack $path -c Release --force --include-symbols -o $path/package # Package the project\n    nupkgs=`ls $path/package/*.nupkg`\n    for f in $nupkgs # Go though the package files\n    do\n      sleet push $f --config ./sleet.json --source NugetSource # Push to the source\n    done\n  fi\ndone\n```\n\nWhat does this do?\n\n- It will find the project folders and create Nuget packages using the `dotnet pack` command.\n- Then it will find the `.nupkg` files and run `sleet push` using the `./sleet.json` file as the configuration. on each of them to the `NugetSource`.\n\nFor this to work, we need the `sleet.json` file in the repository. This is the file where we specify the configuration for Sleet. Here we specify the sources that we are going to use. the source, for now, is the `NugetSource` which is the S3 bucket we have created. because we are not providing any credentials for S3 in this configuration, we will have to provide them as standard AWS environment variables later.\n\n```json\n{\n  \"username\": \"\u003cusername\u003e\",\n  \"useremail\": \"\u003cemail\u003e\",\n  \"sources\": [\n    {\n      \"name\": \"NugetSource\",\n      \"type\": \"s3\",\n      \"bucketName\": \"\u003cyour bucket name\u003e\",\n      \"region\": \"\u003cyour bucket region\u003e\"\n    }\n  ]\n}\n```\n\nNow we just have to tell the CI server that we want to run the `push.sh` script every time we push to a release branch. I use this configuration below to do that in Gitlab CI.\n\n```yml\nimage: microsoft/dotnet:latest\nstages:\n  - build\n  - release\n\nbuild:\n  stage: build\n  script:\n    - dotnet build\n\nrelease:\n  stage: release\n  only:\n    - release\n  before_script:\n    - chmod +x ./push.sh\n  script:\n    - bash ./push.sh\n  environment:\n    name: Production\n```\n\nWhat this does is it will run a build for every commit but only run the push script when we push our code to the `release` branch.\n\nNow we have to add the credentials for the user that we created in the IAM console as environment variables in the CI server. the main two variables that are required are `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`.\n\n\u003cimg alt=\"Secret variables\" src=\"$$base_url/post-data/2019-11-03-nuget-feed-s3/variables.png\"\u003e\n\nNow, everything is ready to go. Push your code to the `release` branch and it will build the project and Sleet will do its magic to create the Nuget source on S3.\n\nIf you have done everything correctly, You will see an output like below in the CI console.\n\n\u003cimg alt=\"Pipeline result\" src=\"$$base_url/post-data/2019-11-03-nuget-feed-s3/pipeline-result.png\"\u003e\n\nAnd the S3 Bucket content will be updated to look something like below.\n\n\u003cimg alt=\"S3 result\" src=\"$$base_url/post-data/2019-11-03-nuget-feed-s3/s3-result.png\"\u003e\n\nNow you can use the Nuget packages you just created. for this, you must first add the URL to the `index.json` file of the S3 bucket as a Nuget source in your IDE. something like below (Rider).\n\n\u003cimg alt=\"Using the Nuget feed\" src=\"$$base_url/post-data/2019-11-03-nuget-feed-s3/feed.png\"\u003e\n\nAnd now, you can use the Packages just like you would use a normal Nuget package.\n\n\u003cimg alt=\"Install packages using the new feed\" src=\"$$base_url/post-data/2019-11-03-nuget-feed-s3/nuget-install.png\"\u003e\n","parsedContent":"\u003cp\u003e\u003cimg alt=\"Page banner\" class=\"Post_banner__soX4H\" src=\"https://rusith.me/post-data/2019-11-03-nuget-feed-s3/banner.png\"\u003e\u003c/p\u003e\n\u003cp\u003eWhenever you wanted to create a separate Nuget feed for your Nuget packages, there are Nuber of ways to do that. Most of them include some computing. which means you have to provision a server and run a Nuget application on a computer. But its also possible to create a static Nuget feed on a cloud file system like S3. One way to do this is by using the \u003ca target=\"_blank\" href=\"https://github.com/emgarten/Sleet\"\u003eSleet\u003c/a\u003e tool. which is an open-source and free application.\u003c/p\u003e\n\u003ch3 id=\"whatissleet\"\u003eWhat is Sleet\u003c/h3\u003e\n\u003cp\u003eSleet is a CLI tool that allows you to create Nuget feeds on \u003ccode\u003eS3\u003c/code\u003e or \u003ccode\u003eAzure Storage\u003c/code\u003e easily. Sleet creates a file system that doesn't require any computing (Serverless). Sleet also supports Symbols so you can create a symbol server easily.\u003c/p\u003e\n\u003ch3 id=\"automating\"\u003eAutomating\u003c/h3\u003e\n\u003cp\u003eYou can do everything Sleet can do with just your terminal and an S3 bucket. but this post is about automating that process with \u003ccode\u003eGit\u003c/code\u003e, \u003ccode\u003eGitLab\u003c/code\u003e(or any other CI provider). I am going to create a solution with few Class libraries and create a deployment pipeline to automatically deploy them as Nuget packages to our Nuget source which will be in \u003ccode\u003eS3\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eCheck the \u003ca target=\"_blank\" href=\"https://github.com/emgarten/Sleet/blob/master/doc/index.md\"\u003eSleet Documentation\u003c/a\u003e for detailed information about Sleet.\u003c/p\u003e\n\u003ch3 id=\"settingupthes3bucket\"\u003eSetting up the S3 Bucket\u003c/h3\u003e\n\u003cp\u003eThe first thing we have to do is to create the S3 bucket that we will be using to create the Nuget feed. I am going to name mine as \u003ccode\u003erusith.nugetpackages\u003c/code\u003e. To access the bucket, you will have to make it public. You can limit it to an IP range if you want to increase security. So change the bucket policy to something like below. It will allow access to the bucket from anywhere.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs json language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Version\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;2012-10-17\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Statement\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Sid\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;AddPerm\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Effect\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Allow\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Principal\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;*\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Action\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:GetObject\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Resource\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;arn:aws:s3:::\u0026lt;your bucket name\u0026gt;/*\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"iamsettings\"\u003eIAM Settings\u003c/h3\u003e\n\u003cp\u003eNow our bucket is all setup. Now we need a way to modify the content of the bucket from the CI server. for this, we can create an IAM policy that will give access to the S3 bucket and then, create a user with that policy attached. Then we can use the credentials of that user from the CI server to upload files.\u003c/p\u003e\n\u003cp\u003eThe IAM policy should be something like below. It will give write access to the source bucket that we have created.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs json language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Version\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;2012-10-17\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Statement\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Sid\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;VisualEditor0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Effect\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Allow\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Action\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:PutObject\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:GetObjectAcl\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:GetObject\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:ListBucket\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:DeleteObject\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Resource\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\u0026quot;arn:aws:s3:::\u0026lt;bucket name\u0026gt;/*\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;arn:aws:s3:::\u0026lt;bucket name\u0026gt;\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Sid\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;VisualEditor1\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Effect\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Allow\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Action\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:GetAccountPublicAccessBlock\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:ListAllMyBuckets\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:ListJobs\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:CreateJob\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:HeadBucket\u0026quot;\u003c/span\u003e\n      \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Resource\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;*\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIAM policy is now ready to be used. Now we just have to create a new user and attach the policy to that user. Make sure you have given programmatic access to the user when creating. as we are going to use these credentials only through the API. it is necessary to have programmatic access.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Create a new IAM user\" src=\"https://rusith.me/post-data/2019-11-03-nuget-feed-s3/iam-create-user.png\"\u003e\u003c/p\u003e\n\u003cp\u003eAnd don't forget to attach the policy you just created.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Create user policy for IAM user\" src=\"https://rusith.me/post-data/2019-11-03-nuget-feed-s3/iam-create-user-policy.png\"\u003e\u003c/p\u003e\n\u003cp\u003eOnce the user is created. don't forget to take a copy of the access keys of the user. Now the IAM part is done. we can go ahead and implement our packages.\u003c/p\u003e\n\u003ch3 id=\"creatingthepackages\"\u003eCreating the Packages\u003c/h3\u003e\n\u003cp\u003eFor this demonstration, I will create a simple solution with only two class libraries that can be used as Nuget packages. Below commands will create the solution structure.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs sh language-sh\"\u003edotnet new sln --name NugetPackages\ndotnet new classlib --name Rusith.FileHelpers\ndotnet new classlib --name Rusith.EmailHelpers\ndotnet sln ./NugetPackages.sln add ./Rusith.EmailHelpers/Rusith.EmailHelpers.csproj\ndotnet sln ./NugetPackages.sln add ./Rusith.FileHelpers/Rusith.FileHelpers.csproj\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow you can write your code for each library that should be there in the 1.0 version if you like. And make sure you have filled the information required to create a Nuget package in each project.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Nuget feed project settings\" src=\"https://rusith.me/post-data/2019-11-03-nuget-feed-s3/project-settings.png\"\u003e\u003c/p\u003e\n\u003cp\u003eNow you will have to initialize the Git repository, create the origin repository and push the code if you haven't already.\u003c/p\u003e\n\u003ch3 id=\"ci\"\u003eCI\u003c/h3\u003e\n\u003cp\u003eOkay, now we have the projects with us, now we can go ahead and start creating the CI pipeline to automate the build process with \u003ccode\u003eGitlab\u003c/code\u003e. My approach will be to create a single script that will go through all projects in the solution, push them to S3 using Sleet. The script for doing that would look like below.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs sh language-sh\"\u003e\u003cspan class=\"hljs-built_in\"\u003eexport\u003c/span\u003e PATH=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$PATH\u003c/span\u003e:/root/.dotnet/tools\u0026quot;\u003c/span\u003e\ndotnet tool install -g sleet \u003cspan class=\"hljs-comment\"\u003e# Installing Sleet\u003c/span\u003e\n\n\u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e ./source\ndotnet build -c Release \u003cspan class=\"hljs-comment\"\u003e# Build the solution with release configuration\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e path \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e$PWD\u003c/span\u003e\u0026quot;\u003c/span\u003e/* \u003cspan class=\"hljs-comment\"\u003e# For everything inside the folder\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e [[ (-d \u003cspan class=\"hljs-variable\"\u003e$path\u003c/span\u003e) \u0026amp;\u0026amp; (\u003cspan class=\"hljs-variable\"\u003e$path\u003c/span\u003e != *.Tests) ]]; \u003cspan class=\"hljs-keyword\"\u003ethen\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# If the path is a directory\u003c/span\u003e\n    dotnet pack \u003cspan class=\"hljs-variable\"\u003e$path\u003c/span\u003e -c Release --force --include-symbols -o \u003cspan class=\"hljs-variable\"\u003e$path\u003c/span\u003e/package \u003cspan class=\"hljs-comment\"\u003e# Package the project\u003c/span\u003e\n    nupkgs=`\u003cspan class=\"hljs-built_in\"\u003els\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003e$path\u003c/span\u003e/package/*.nupkg`\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e f \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003e$nupkgs\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Go though the package files\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\n      sleet push \u003cspan class=\"hljs-variable\"\u003e$f\u003c/span\u003e --config ./sleet.json --\u003cspan class=\"hljs-built_in\"\u003esource\u003c/span\u003e NugetSource \u003cspan class=\"hljs-comment\"\u003e# Push to the source\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003efi\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhat does this do?\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIt will find the project folders and create Nuget packages using the \u003ccode\u003edotnet pack\u003c/code\u003e command.\u003c/li\u003e\n\u003cli\u003eThen it will find the \u003ccode\u003e.nupkg\u003c/code\u003e files and run \u003ccode\u003esleet push\u003c/code\u003e using the \u003ccode\u003e./sleet.json\u003c/code\u003e file as the configuration. on each of them to the \u003ccode\u003eNugetSource\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor this to work, we need the \u003ccode\u003esleet.json\u003c/code\u003e file in the repository. This is the file where we specify the configuration for Sleet. Here we specify the sources that we are going to use. the source, for now, is the \u003ccode\u003eNugetSource\u003c/code\u003e which is the S3 bucket we have created. because we are not providing any credentials for S3 in this configuration, we will have to provide them as standard AWS environment variables later.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs json language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;username\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;username\u0026gt;\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;useremail\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;email\u0026gt;\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;sources\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;NugetSource\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;type\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;bucketName\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;your bucket name\u0026gt;\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;region\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;your bucket region\u0026gt;\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we just have to tell the CI server that we want to run the \u003ccode\u003epush.sh\u003c/code\u003e script every time we push to a release branch. I use this configuration below to do that in Gitlab CI.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs yml language-yml\"\u003e\u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emicrosoft/dotnet:latest\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003estages:\u003c/span\u003e\n  \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuild\u003c/span\u003e\n  \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003erelease\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003ebuild:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003estage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuild\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003escript:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edotnet\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuild\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003erelease:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003estage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003erelease\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eonly:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003erelease\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ebefore_script:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003echmod\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e+x\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./push.sh\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003escript:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebash\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./push.sh\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eProduction\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhat this does is it will run a build for every commit but only run the push script when we push our code to the \u003ccode\u003erelease\u003c/code\u003e branch.\u003c/p\u003e\n\u003cp\u003eNow we have to add the credentials for the user that we created in the IAM console as environment variables in the CI server. the main two variables that are required are \u003ccode\u003eAWS_ACCESS_KEY_ID\u003c/code\u003e and \u003ccode\u003eAWS_SECRET_ACCESS_KEY\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Secret variables\" src=\"https://rusith.me/post-data/2019-11-03-nuget-feed-s3/variables.png\"\u003e\u003c/p\u003e\n\u003cp\u003eNow, everything is ready to go. Push your code to the \u003ccode\u003erelease\u003c/code\u003e branch and it will build the project and Sleet will do its magic to create the Nuget source on S3.\u003c/p\u003e\n\u003cp\u003eIf you have done everything correctly, You will see an output like below in the CI console.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Pipeline result\" src=\"https://rusith.me/post-data/2019-11-03-nuget-feed-s3/pipeline-result.png\"\u003e\u003c/p\u003e\n\u003cp\u003eAnd the S3 Bucket content will be updated to look something like below.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"S3 result\" src=\"https://rusith.me/post-data/2019-11-03-nuget-feed-s3/s3-result.png\"\u003e\u003c/p\u003e\n\u003cp\u003eNow you can use the Nuget packages you just created. for this, you must first add the URL to the \u003ccode\u003eindex.json\u003c/code\u003e file of the S3 bucket as a Nuget source in your IDE. something like below (Rider).\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Using the Nuget feed\" src=\"https://rusith.me/post-data/2019-11-03-nuget-feed-s3/feed.png\"\u003e\u003c/p\u003e\n\u003cp\u003eAnd now, you can use the Packages just like you would use a normal Nuget package.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Install packages using the new feed\" src=\"https://rusith.me/post-data/2019-11-03-nuget-feed-s3/nuget-install.png\"\u003e\u003c/p\u003e"},"page":"Post","topTags":["programming","aws","web","machineLearning","react","javascript","dataScience","typescript","r","csharp"],"relatedPosts":[{"title":"Deploying an app on AWS ECS with CDK","tags":["programming","nextJS","react","aws","ecs","typescript","cdk","devops"],"fullUrl":"https://rusith.me/blog/deploy-app-on-aws-ecs-with-cdk-auto-scaling-and-load-balancing","date":"Wed, Feb 15, 2023","description":"How to deploy an application on AWS ECS with load-balancing and auto-scaling using CDK by writing the CDK code in TypeScript","banner":"/post-data/2023-02-15-deploying-react-app-on-ecs/banner.png"},{"title":"Deploying a Website on S3 With SSL, Continuous Integration","tags":["aws","programming","web"],"fullUrl":"https://rusith.me/blog/building-a-website-on-s3","date":"Mon, Aug 5, 2019","description":"In this post, I am creating a website and host it on S3 and setup a continuous integration pipeline setup using Gitlab","banner":"/post-data/2019-08-14-building-a-website-on-s3/banner.png"},{"title":"Creating a Re-Usable Presto Worker Image in EC2","tags":["programming","bigdata","aws","cloud"],"fullUrl":"https://rusith.me/blog/re-usable-presto-worker-image-ec2","date":"Thu, Jul 25, 2019","description":"Creating a machine image that can be used to spin up presto worker instances without configuring each one. this could be helpful when you don't want to use any  orchestration tool","banner":"/post-data/2019-07-25-re-usable-presto-worker/5-workers-dashboard.png"}]},"__N_SSG":true},"page":"/[[...path]]","query":{"path":["2019","11","03","nuget-feed-on-s3"]},"buildId":"PaoTT2YDvwYY_jbobaNoC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>