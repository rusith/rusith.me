<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link href="https://gmpg.org/xfn/11" rel="profile"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5GDZWWBRFX"></script><script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-5GDZWWBRFX');
                </script><link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://rusith.me/icons/favicon-144-image.png"/><link rel="shortcut icon" href="https://rusith.me/favicon.ico"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/><meta property="og:image" content="https://rusith.me/images/banner/default.jpg"/><meta property="twitter:creator" content="@rusith_"/><meta name="robots" content="index,follow"/><title>Service Helper — Seamlessly Send Request in Angular</title><meta name="description" content="When using Angular 2+ to build web stuff , we use services to get data from our back-end services. usually most of these service calls are HTTP requests. Angular provides the Http class to send HTTP request, this has built on the Observable API. When we send a request, it returns an Observable which can be used to use the response returned by the server."/><link rel="canonical" href="https://rusith.me/blog/angular-service-helper"/><meta property="og:title" content="Service Helper — Seamlessly Send Request in Angular"/><meta property="og:url" content="https://rusith.me/blog/angular-service-helper"/><meta property="og:description" content="When using Angular 2+ to build web stuff , we use services to get data from our back-end services. usually most of these service calls are HTTP requests. Angular provides the Http class to send HTTP request, this has built on the Observable API. When we send a request, it returns an Observable which can be used to use the response returned by the server."/><meta property="og:site_name" content="Rusith&#x27;s blog"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="blog"/><meta property="twitter:description" content="Creating a ServiceHelper class to send HTTP requests from Angular applications"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Service Helper — Seamlessly Send Request in Angular"/><meta name="twitter:image" content="https://rusith.me/images/banner/default.jpg"/><meta name="twitter:site" content="@rusith_"/><script type="application/ld+json">{"@type":"BlogPosting","@context":"https://schema.org","headline":"Service Helper — Seamlessly Send Request in Angular","author":{"@type":"Person","name":"Shanaka Rusith","url":"https://rusith.me/about"},"keywords":"programming,angular,typescript,web","url":"https://rusith.me/blog/angular-service-helper","description":"When using Angular 2+ to build web stuff , we use services to get data from our back-end services. usually most of these service calls are HTTP requests. Angular provides the Http class to send HTTP request, this has built on the Observable API. When we send a request, it returns an Observable which can be used to use the response returned by the server.","copyrightHolder":{"@type":"Person","name":"Shanaka Rusith","url":"https://rusith.me/about"},"copyrightYear":"2021","mainEntityOfPage":{"@type":"WebPage","@id":"https://rusith.me"},"publisher":{"@type":"Organization","name":"Shanaka Rusith","url":"https://rusith.me/about","logo":{"@type":"ImageObject","url":"https://rusith.me/images/rusith/picture.jpg"}},"image":"https://rusith.me/images/banner/default.jpg","about":"Creating a ServiceHelper class to send HTTP requests from Angular applications","datePublished":"Thu Mar 15 2018 00:00:00 GMT+0000 (Coordinated Universal Time)","dateModified":"Thu Mar 15 2018 00:00:00 GMT+0000 (Coordinated Universal Time)"}</script><meta name="next-head-count" content="27"/><link rel="preload" href="/_next/static/css/7220332d6168fb06.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7220332d6168fb06.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0662676664ee362f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0662676664ee362f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-05c0aa1e498fcb8c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f89480c30d9a5d02.js" defer=""></script><script src="/_next/static/chunks/947-277c090e7d6803d0.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...path%5D%5D-d5cf2aa81a49e144.js" defer=""></script><script src="/_next/static/PaoTT2YDvwYY_jbobaNoC/_buildManifest.js" defer=""></script><script src="/_next/static/PaoTT2YDvwYY_jbobaNoC/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Sidebar_r__IEuUi"><div class="Sidebar_sticky__RE23V"><div class="Sidebar_about__s_kM6"><h2><a href="/">Rusith.me</a></h2><div class="Sidebar_socialButtons__XcH6p"><a href="https://www.linkedin.com/in/shanaka-rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="LinkedIn icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MTYsMzJIMzEuOUMxNC4zLDMyLDAsNDYuNSwwLDY0LjN2MzgzLjRDMCw0NjUuNSwxNC4zLDQ4MCwzMS45LDQ4MEg0MTZjMTcuNiwwLDMyLTE0LjUsMzItMzIuM1Y2NC4zCglDNDQ4LDQ2LjUsNDMzLjYsMzIsNDE2LDMyeiBNMTM1LjQsNDE2SDY5VjIwMi4yaDY2LjVWNDE2SDEzNS40eiBNMTAyLjIsMTczYy0yMS4zLDAtMzguNS0xNy4zLTM4LjUtMzguNVM4MC45LDk2LDEwMi4yLDk2CgljMjEuMiwwLDM4LjUsMTcuMywzOC41LDM4LjVDMTQwLjcsMTU1LjgsMTIzLjUsMTczLDEwMi4yLDE3M3ogTTM4NC4zLDQxNmgtNjYuNFYzMTJjMC0yNC44LTAuNS01Ni43LTM0LjUtNTYuNwoJYy0zNC42LDAtMzkuOSwyNy0zOS45LDU0LjlWNDE2aC02Ni40VjIwMi4yaDYzLjd2MjkuMmgwLjljOC45LTE2LjgsMzAuNi0zNC41LDYyLjktMzQuNWM2Ny4yLDAsNzkuNyw0NC4zLDc5LjcsMTAxLjlWNDE2eiIvPgo8L3N2Zz4K"/></a><a href="https://github.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Github icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMzUyYzI2LjUsMCw0OC0yMS41LDQ4LTQ4VjgwCglDNDQ4LDUzLjUsNDI2LjUsMzIsNDAwLDMyeiBNMjc3LjMsNDE1LjdjLTguNCwxLjUtMTEuNS0zLjctMTEuNS04YzAtNS40LDAuMi0zMywwLjItNTUuM2MwLTE1LjYtNS4yLTI1LjUtMTEuMy0zMC43CgljMzctNC4xLDc2LTkuMiw3Ni03My4xYzAtMTguMi02LjUtMjcuMy0xNy4xLTM5YzEuNy00LjMsNy40LTIyLTEuNy00NWMtMTMuOS00LjMtNDUuNywxNy45LTQ1LjcsMTcuOWMtMTMuMi0zLjctMjcuNS01LjYtNDEuNi01LjYKCXMtMjguNCwxLjktNDEuNiw1LjZjMCwwLTMxLjgtMjIuMi00NS43LTE3LjljLTkuMSwyMi45LTMuNSw0MC42LTEuNyw0NWMtMTAuNiwxMS43LTE1LjYsMjAuOC0xNS42LDM5YzAsNjMuNiwzNy4zLDY5LDc0LjMsNzMuMQoJYy00LjgsNC4zLTkuMSwxMS43LTEwLjYsMjIuM2MtOS41LDQuMy0zMy44LDExLjctNDguMy0xMy45Yy05LjEtMTUuOC0yNS41LTE3LjEtMjUuNS0xNy4xYy0xNi4yLTAuMi0xLjEsMTAuMi0xLjEsMTAuMgoJYzEwLjgsNSwxOC40LDI0LjIsMTguNCwyNC4yYzkuNywyOS43LDU2LjEsMTkuNyw1Ni4xLDE5LjdjMCwxMy45LDAuMiwzNi41LDAuMiw0MC42YzAsNC4zLTMsOS41LTExLjUsOAoJYy02Ni0yMi4xLTExMi4yLTg0LjktMTEyLjItMTU4LjNjMC05MS44LDcwLjItMTYxLjUsMTYyLTE2MS41UzM4OCwxNjUuNiwzODgsMjU3LjRDMzg4LjEsMzMwLjgsMzQzLjMsMzkzLjcsMjc3LjMsNDE1Ljd6CgkgTTE3OS4yLDM1NC42Yy0xLjksMC40LTMuNy0wLjQtMy45LTEuN2MtMC4yLTEuNSwxLjEtMi44LDMtMy4yYzEuOS0wLjIsMy43LDAuNiwzLjksMS45QzE4Mi41LDM1Mi45LDE4MS4yLDM1NC4yLDE3OS4yLDM1NC42CglMMTc5LjIsMzU0LjZ6IE0xNjkuNywzNTMuN2MwLDEuMy0xLjUsMi40LTMuNSwyLjRjLTIuMiwwLjItMy43LTAuOS0zLjctMi40YzAtMS4zLDEuNS0yLjQsMy41LTIuNAoJQzE2Ny45LDM1MS4xLDE2OS43LDM1Mi4yLDE2OS43LDM1My43eiBNMTU2LDM1Mi42Yy0wLjQsMS4zLTIuNCwxLjktNC4xLDEuM2MtMS45LTAuNC0zLjItMS45LTIuOC0zLjJjMC40LTEuMywyLjQtMS45LDQuMS0xLjUKCUMxNTUuMiwzNDkuOCwxNTYuNSwzNTEuMywxNTYsMzUyLjZMMTU2LDM1Mi42eiBNMTQzLjcsMzQ3LjJjLTAuOSwxLjEtMi44LDAuOS00LjMtMC42Yy0xLjUtMS4zLTEuOS0zLjItMC45LTQuMQoJYzAuOS0xLjEsMi44LTAuOSw0LjMsMC42QzE0NC4xLDM0NC40LDE0NC42LDM0Ni40LDE0My43LDM0Ny4yeiBNMTM0LjYsMzM4LjFjLTAuOSwwLjYtMi42LDAtMy43LTEuNXMtMS4xLTMuMiwwLTMuOQoJYzEuMS0wLjksMi44LTAuMiwzLjcsMS4zQzEzNS43LDMzNS41LDEzNS43LDMzNy4zLDEzNC42LDMzOC4xeiBNMTI4LjEsMzI4LjRjLTAuOSwwLjktMi40LDAuNC0zLjUtMC42Yy0xLjEtMS4zLTEuMy0yLjgtMC40LTMuNQoJYzAuOS0wLjksMi40LTAuNCwzLjUsMC42QzEyOC44LDMyNi4yLDEyOSwzMjcuNywxMjguMSwzMjguNHogTTEyMS40LDMyMWMtMC40LDAuOS0xLjcsMS4xLTIuOCwwLjRjLTEuMy0wLjYtMS45LTEuNy0xLjUtMi42CgljMC40LTAuNiwxLjUtMC45LDIuOC0wLjRDMTIxLjIsMzE5LjEsMTIxLjgsMzIwLjIsMTIxLjQsMzIxeiIvPgo8L3N2Zz4K"/></a><a href="https://gitlab.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Gitlab icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUuMiwyNC45Yy0zLjEtOC45LTE1LjctOC45LTE4LjksMEwyOS44LDE5OS43aDEzMkMxNjEuNywxOTkuNywxMDUuMiwyNC45LDEwNS4yLDI0Ljl6IE0wLjksMjg3LjcKCWMtMi42LDgsMC4zLDE2LjksNy4xLDIybDI0Ny45LDE4NGwtMjI2LjItMjk0TDAuOSwyODcuN3ogTTE2MS43LDE5OS43bDk0LjMsMjk0bDk0LjMtMjk0SDE2MS43eiBNNTExLjEsMjg3LjdsLTI4LjgtODhMMjU2LDQ5My43CglsMjQ3LjktMTg0QzUxMC44LDMwNC42LDUxMy42LDI5NS43LDUxMS4xLDI4Ny43eiBNNDI1LjcsMjQuOWMtMy4xLTguOS0xNS43LTguOS0xOC45LDBsLTU2LjYsMTc0LjhoMTMyTDQyNS43LDI0Ljl6Ii8+Cjwvc3ZnPgo="/></a><a href="http://goodreads.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="GoodReads icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yOTkuOSwxOTEuMmM1LjEsMzcuMy00LjcsNzktMzUuOSwxMDAuN2MtMjIuMywxNS41LTUyLjgsMTQuMS03MC44LDUuN2MtMzcuMS0xNy4zLTQ5LjUtNTguNi00Ni44LTk3LjIKCWM0LjMtNjAuOSw0MC45LTg3LjksNzUuMy04Ny41QzI2OC42LDExMi43LDI5My41LDE0NC43LDI5OS45LDE5MS4yTDI5OS45LDE5MS4yeiBNNDQ4LDg4djMzNmMwLDMwLjktMjUuMSw1Ni01Niw1Nkg1NgoJYy0zMC45LDAtNTYtMjUuMS01Ni01NlY4OGMwLTMwLjksMjUuMS01Niw1Ni01NmgzMzZDNDIyLjksMzIsNDQ4LDU3LjEsNDQ4LDg4eiBNMzMwLDMxMy4yYzAsMC0wLjEtMzQtMC4xLTIxNy4zaC0yOXY0MC4zCgljLTAuOCwwLjMtMS4yLTAuNS0xLjYtMS4yYy05LjYtMjAuNy0zNS45LTQ2LjMtNzYtNDZjLTUxLjksMC40LTg3LjIsMzEuMi0xMDAuNiw3Ny44Yy00LjMsMTQuOS01LjgsMzAuMS01LjUsNDUuNgoJYzEuNyw3Ny45LDQ1LjEsMTE3LjgsMTEyLjQsMTE1LjJjMjguOS0xLjEsNTQuNS0xNyw2OS00NS4yYzAuNS0xLDEuMS0xLjksMS43LTIuOWMwLjIsMC4xLDAuNCwwLjEsMC42LDAuMgoJYzAuMywzLjgsMC4yLDMwLjcsMC4xLDM0LjVjLTAuMiwxNC44LTIsMjkuNS03LjIsNDMuNWMtNy44LDIxLTIyLjMsMzQuNy00NC41LDM5LjVjLTE3LjgsMy45LTM1LjYsMy44LTUzLjItMS4yCgljLTIxLjUtNi4xLTM2LjUtMTktNDEuMS00MS44Yy0wLjMtMS42LTEuMy0xLjMtMi4zLTEuM2gtMjYuOGMwLjgsMTAuNiwzLjIsMjAuMyw4LjUsMjkuMmMyNC4yLDQwLjUsODIuNyw0OC41LDEyOC4yLDM3LjQKCUMzMTIuNSw0MDcuMiwzMjkuOSwzNjQuNiwzMzAsMzEzLjJMMzMwLDMxMy4yeiIvPgo8L3N2Zz4K"/></a><a href="https://twitter.com/rusith_" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Twitter icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMzUyYzI2LjUsMCw0OC0yMS41LDQ4LTQ4VjgwCglDNDQ4LDUzLjUsNDI2LjUsMzIsNDAwLDMyeiBNMzUxLjEsMTkwLjhjMC4yLDIuOCwwLjIsNS43LDAuMiw4LjVjMCw4Ni43LTY2LDE4Ni42LTE4Ni42LDE4Ni42Yy0zNy4yLDAtNzEuNy0xMC44LTEwMC43LTI5LjQKCWM1LjMsMC42LDEwLjQsMC44LDE1LjgsMC44YzMwLjcsMCw1OC45LTEwLjQsODEuNC0yOGMtMjguOC0wLjYtNTMtMTkuNS02MS4zLTQ1LjVjMTAuMSwxLjUsMTkuMiwxLjUsMjkuNi0xLjIKCWMtMzAtNi4xLTUyLjUtMzIuNS01Mi41LTY0LjR2LTAuOGM4LjcsNC45LDE4LjksNy45LDI5LjYsOC4zYy0xOC4zLTEyLjItMjkuMi0zMi43LTI5LjItNTQuNmMwLTEyLjIsMy4yLTIzLjQsOC45LTMzLjEKCWMzMi4zLDM5LjgsODAuOCw2NS44LDEzNS4yLDY4LjZjLTkuMy00NC41LDI0LTgwLjYsNjQtODAuNmMxOC45LDAsMzUuOSw3LjksNDcuOSwyMC43YzE0LjgtMi44LDI5LTguMyw0MS42LTE1LjgKCWMtNC45LDE1LjItMTUuMiwyOC0yOC44LDM2LjFjMTMuMi0xLjQsMjYtNS4xLDM3LjgtMTAuMkMzNzUuMSwxNjkuOSwzNjMuOSwxODEuNSwzNTEuMSwxOTAuOHoiLz4KPC9zdmc+Cg=="/></a><a href="https://www.facebook.com/shanaka.rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Facebook icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMTM3LjNWMzI3LjdoLTYzVjI1Nmg2M3YtNTQuNgoJYzAtNjIuMiwzNy05Ni41LDkzLjctOTYuNWMyNy4xLDAsNTUuNSw0LjgsNTUuNSw0Ljh2NjFoLTMxLjNjLTMwLjgsMC00MC40LDE5LjEtNDAuNCwzOC43VjI1Nmg2OC44bC0xMSw3MS43aC01Ny44VjQ4MEg0MDAKCWMyNi41LDAsNDgtMjEuNSw0OC00OFY4MEM0NDgsNTMuNSw0MjYuNSwzMiw0MDAsMzJ6Ii8+Cjwvc3ZnPgo="/></a></div><p>A blog from a tech and art enthusiast</p></div><div class="Sidebar_nav__CTYKS"><div class="Sidebar_tagWrapper__w460D"><a href="/tag/programming/"><span class="Sidebar_tag__mAo8y">#<!-- -->programming</span></a><a href="/tag/aws/"><span class="Sidebar_tag__mAo8y">#<!-- -->aws</span></a><a href="/tag/web/"><span class="Sidebar_tag__mAo8y">#<!-- -->web</span></a><a href="/tag/machineLearning/"><span class="Sidebar_tag__mAo8y">#<!-- -->machineLearning</span></a><a href="/tag/react/"><span class="Sidebar_tag__mAo8y">#<!-- -->react</span></a><a href="/tag/javascript/"><span class="Sidebar_tag__mAo8y">#<!-- -->javascript</span></a><a href="/tag/dataScience/"><span class="Sidebar_tag__mAo8y">#<!-- -->dataScience</span></a><a href="/tag/typescript/"><span class="Sidebar_tag__mAo8y">#<!-- -->typescript</span></a><a href="/tag/r/"><span class="Sidebar_tag__mAo8y">#<!-- -->r</span></a><a href="/tag/csharp/"><span class="Sidebar_tag__mAo8y">#<!-- -->csharp</span></a></div></div></div></div><div class="comp_content__73ns2"><div><h1>Service Helper — Seamlessly Send Request in Angular</h1><div class="Post_tags__HKWUb"><a class="Post_tag__5GXoX" href="https://rusith.me/tag/programming">#<!-- -->programming</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/angular">#<!-- -->angular</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/typescript">#<!-- -->typescript</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/web">#<!-- -->web</a></div><span class="Post_date__h8Of6">Thu, Mar 15, 2018</span><div><p>When using Angular 2+ to build web stuff , we use services to get data from our back-end services. usually most of these service calls are HTTP requests. Angular provides the <code>Http</code> class to send HTTP request, this has built on the <code>Observable</code> API. When we send a request, it returns an Observable which can be used to use the response returned by the server.</p>
<p>Below is a Helper class which has built up on this Angular’s API. Which can be easily injected to a service and can be used to build HTTP requests seamlessly with its API that implements the Builder pattern and the Promise API</p>
<p>I have added token authorization support to this implementation. I have to set the <code>accessToken</code> property of the service helper instance whenever i change the user token in the app.</p>
<p>I have stored the base URL for my API in the <code>process.env.apiHost</code>, This could come from anywhere.</p>
<p>You can use multiple APIs by adding another function like the <code>api</code> function in the service helper.</p>
<pre><code class="hljs ts language-ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">EventEmitter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Http</span>, <span class="hljs-title class_">RequestOptions</span>, <span class="hljs-title class_">Headers</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/http&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rxjs/Rx&#x27;</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">process</span>: <span class="hljs-built_in">any</span>;

<span class="hljs-comment">/**
 * This is a helper class that will help you  to send Http Requests
 */</span>
<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceHelper</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-attr">accessToken</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">public</span> fetchStart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>&lt;<span class="hljs-built_in">any</span>&gt;();
  <span class="hljs-keyword">public</span> fetchEnd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>&lt;<span class="hljs-built_in">any</span>&gt;();
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">protected</span> _http: Http</span>) { }
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">api</span>(): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestBuilder</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_http</span>, process.<span class="hljs-property">env</span>.<span class="hljs-property">apiHost</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserTokenProvider</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">fetchStart</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">fetchEnd</span>);
  }

}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IRequestBuilder</span> {
  <span class="hljs-title function_">url</span>(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">IRequestBuilder</span>;
  <span class="hljs-title function_">header</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">IRequestBuilder</span>;
  <span class="hljs-title function_">noAuth</span>(): <span class="hljs-title class_">IRequestBuilder</span>;
  post&lt;T&gt;(): <span class="hljs-title class_">Promise</span>&lt;T&gt;;
  put&lt;T&gt;(): <span class="hljs-title class_">Promise</span>&lt;T&gt;;
  patch&lt;T&gt;(): <span class="hljs-title class_">Promise</span>&lt;T&gt;;
  <span class="hljs-keyword">delete</span>&lt;T&gt;(): <span class="hljs-title class_">Promise</span>&lt;T&gt;;
  <span class="hljs-title function_">needJson</span>(): <span class="hljs-title class_">IRequestBuilder</span>;
  <span class="hljs-title function_">needUrlencode</span>(): <span class="hljs-title class_">IRequestBuilder</span>;
  <span class="hljs-title function_">hasJson</span>(): <span class="hljs-title class_">IRequestBuilder</span>;
  <span class="hljs-title function_">hasUrlencoded</span>(): <span class="hljs-title class_">IRequestBuilder</span>;
  <span class="hljs-title function_">rowData</span>(<span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">IRequestBuilder</span>;
  <span class="hljs-title function_">json</span>(<span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">IRequestBuilder</span>;
  get&lt;T&gt;(queyParameters?: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt;;
  getObserve&lt;T&gt;(queyParameters?: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Observable</span>&lt;T&gt;;
  <span class="hljs-title function_">sendFile</span>(<span class="hljs-attr">files</span>: <span class="hljs-title class_">File</span>[], <span class="hljs-attr">timenow</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">progress</span>: <span class="hljs-built_in">any</span>);
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">AuthTokenProvider</span> {
  <span class="hljs-title function_">getTokenInfo</span>(): { <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">NextCallback</span>&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ErrorCallback</span>&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> <span class="hljs-built_in">void</span>;


<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserTokenProvider</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AuthTokenProvider</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">_serviceHelper</span>: <span class="hljs-title class_">ServiceHelper</span>;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">serviceHelper: ServiceHelper</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">_serviceHelper</span> = serviceHelper; }
  <span class="hljs-title function_">getTokenInfo</span>(): { <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> } {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_serviceHelper</span>.<span class="hljs-property">accessToken</span> ? { <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Authorization&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">` bearer <span class="hljs-subst">${<span class="hljs-variable language_">this</span>._serviceHelper.accessToken}</span>`</span> } : <span class="hljs-literal">null</span>;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestBuilder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IRequestBuilder</span> {

  <span class="hljs-keyword">private</span> <span class="hljs-attr">_helper</span>: <span class="hljs-title class_">ServiceHelper</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">_request</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">headers</span>: <span class="hljs-title class_">Array</span>&lt;{ <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> }&gt;,
    <span class="hljs-attr">authorize</span>: <span class="hljs-built_in">boolean</span>, <span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span>
  } = { <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">headers</span>: [], <span class="hljs-attr">authorize</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">data</span>: <span class="hljs-string">&#x27;&#x27;</span> };
  <span class="hljs-keyword">private</span> <span class="hljs-attr">_http</span>: <span class="hljs-title class_">Http</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">_baseUrl</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">_tokenProvider</span>: <span class="hljs-title class_">AuthTokenProvider</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">_startEvent</span>: <span class="hljs-title class_">EventEmitter</span>&lt;<span class="hljs-built_in">any</span>&gt;;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">_endEvent</span>: <span class="hljs-title class_">EventEmitter</span>&lt;<span class="hljs-built_in">any</span>&gt;;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">http: Http, baseUrl: <span class="hljs-built_in">string</span>, tokenProvider: AuthTokenProvider, start: EventEmitter&lt;<span class="hljs-built_in">any</span>&gt;, end: EventEmitter&lt;<span class="hljs-built_in">any</span>&gt;</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_http</span> = http;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_baseUrl</span> = baseUrl;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_tokenProvider</span> = tokenProvider;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_startEvent</span> = start;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span> = end;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">authorize</span> = <span class="hljs-literal">true</span>;
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getRequestOptions</span>(): <span class="hljs-title class_">RequestOptions</span> {
    <span class="hljs-keyword">const</span> r = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>;
    <span class="hljs-keyword">const</span> requestOptions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestOptions</span>();
    <span class="hljs-keyword">if</span> (r.<span class="hljs-property">authorize</span>) {
      <span class="hljs-keyword">const</span> tokenInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_tokenProvider</span>.<span class="hljs-title function_">getTokenInfo</span>();
      <span class="hljs-keyword">if</span> (tokenInfo) {
        r.<span class="hljs-property">headers</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: tokenInfo.<span class="hljs-property">name</span>, <span class="hljs-attr">value</span>: tokenInfo.<span class="hljs-property">value</span> });
      }
    }
    <span class="hljs-keyword">if</span> (r.<span class="hljs-property">headers</span> &amp;&amp; r.<span class="hljs-property">headers</span>.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">const</span> headers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>();
      r.<span class="hljs-property">headers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">header</span> =&gt;</span> {
        headers.<span class="hljs-title function_">append</span>(header.<span class="hljs-property">name</span>, header.<span class="hljs-property">value</span>);
      });
      requestOptions.<span class="hljs-property">headers</span> = headers;
    }
    requestOptions.<span class="hljs-property">withCredentials</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> requestOptions;
  }

  <span class="hljs-title function_">url</span>(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">url</span> = url;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">rowData</span>(<span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">data</span> = data;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">json</span>(<span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">data</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hasJson</span>();
  }

  <span class="hljs-title function_">header</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">headers</span>.<span class="hljs-title function_">push</span>({ name, value });
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">noAuth</span>(): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">authorize</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">needJson</span>(): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">headers</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Accept&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> });
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">needUrlencode</span>(): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">headers</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Accept&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span> });
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">hasJson</span>(): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">headers</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Content-Type&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> });
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">hasUrlencoded</span>(): <span class="hljs-title class_">IRequestBuilder</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">headers</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Content-Type&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span> });
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  post&lt;T&gt;(): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_startEvent</span>.<span class="hljs-title function_">emit</span>();
      <span class="hljs-keyword">const</span> subscription = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_http</span>.<span class="hljs-title function_">post</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_baseUrl</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">url</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">data</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestOptions</span>())
        .<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">next</span>(resolve, response); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(); },
          <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { subscription.<span class="hljs-title function_">unsubscribe</span>(); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(e); <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">error</span>(e, reject); });
    });
  }


  put&lt;T&gt;(): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_startEvent</span>.<span class="hljs-title function_">emit</span>();
      <span class="hljs-keyword">const</span> subscription = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_http</span>.<span class="hljs-title function_">put</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_baseUrl</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">url</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">data</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestOptions</span>())
        .<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">next</span>(resolve, response); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(); },
          <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { subscription.<span class="hljs-title function_">unsubscribe</span>(); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(); <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">error</span>(e, reject); });
    });

  }

  patch&lt;T&gt;(): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_startEvent</span>.<span class="hljs-title function_">emit</span>();
      <span class="hljs-keyword">const</span> subscription = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_http</span>.<span class="hljs-title function_">patch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_baseUrl</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">url</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">data</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestOptions</span>())
        .<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">next</span>(resolve, response); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(); },
          <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { subscription.<span class="hljs-title function_">unsubscribe</span>(); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(); <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">error</span>(e, reject); });
    });

  }

  <span class="hljs-keyword">delete</span>&lt;T&gt;(): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_startEvent</span>.<span class="hljs-title function_">emit</span>();
      <span class="hljs-keyword">const</span> subscription = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_http</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_baseUrl</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">url</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestOptions</span>())
        .<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">next</span>(resolve, response); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(); },
          <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { subscription.<span class="hljs-title function_">unsubscribe</span>(); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(); <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">error</span>(e, reject); });
    });

  }

  get&lt;T&gt;(queyParameters = <span class="hljs-string">&#x27;&#x27;</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_startEvent</span>.<span class="hljs-title function_">emit</span>();
      <span class="hljs-keyword">const</span> subscription = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_http</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_baseUrl</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">url</span> + <span class="hljs-string">&#x27;?&#x27;</span> + queyParameters, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestOptions</span>())
        .<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">next</span>(resolve, response); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(); },
          <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { subscription.<span class="hljs-title function_">unsubscribe</span>(); <span class="hljs-variable language_">this</span>.<span class="hljs-property">_endEvent</span>.<span class="hljs-title function_">emit</span>(); <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">error</span>(e, reject); });
    });
  }

  getObserve&lt;T&gt;(queyParameters = <span class="hljs-string">&#x27;&#x27;</span>): <span class="hljs-title class_">Observable</span>&lt;T&gt; {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_startEvent</span>.<span class="hljs-title function_">emit</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_http</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_baseUrl</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">url</span> + <span class="hljs-string">&#x27;?&#x27;</span> + queyParameters, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestOptions</span>())
      .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">next</span>(<span class="hljs-literal">null</span>, r));
  }

  <span class="hljs-title function_">sendFile</span>(<span class="hljs-attr">files</span>: <span class="hljs-title class_">File</span>[], <span class="hljs-attr">timenow</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">progress</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-keyword">const</span> url = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_baseUrl</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">url</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Observable</span>.<span class="hljs-title function_">create</span>(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">formData</span>: <span class="hljs-title class_">FormData</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(),
        <span class="hljs-attr">xhr</span>: <span class="hljs-title class_">XMLHttpRequest</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; files.<span class="hljs-property">length</span>; i++) {
        formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;uploads[]&#x27;</span>, files[i], files[i].<span class="hljs-property">name</span>);
      }

      xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>) {
          <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {
            observer.<span class="hljs-title function_">next</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">response</span>));
            observer.<span class="hljs-title function_">complete</span>();
          } <span class="hljs-keyword">else</span> {
            observer.<span class="hljs-title function_">error</span>(xhr.<span class="hljs-property">response</span>);
          }
        }
      };
      xhr.<span class="hljs-property">upload</span>.<span class="hljs-property">onprogress</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        <span class="hljs-title function_">progress</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(event.<span class="hljs-property">loaded</span> / event.<span class="hljs-property">total</span> * <span class="hljs-number">100</span>));
      };
      xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;POST&#x27;</span>, url, <span class="hljs-literal">true</span>);

      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_request</span>.<span class="hljs-property">authorize</span>) {
        <span class="hljs-keyword">const</span> tokenInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_tokenProvider</span>.<span class="hljs-title function_">getTokenInfo</span>();
        <span class="hljs-keyword">if</span> (tokenInfo) {
          xhr.<span class="hljs-title function_">setRequestHeader</span>(tokenInfo.<span class="hljs-property">name</span>, tokenInfo.<span class="hljs-property">value</span>);
        }
      }
      <span class="hljs-keyword">const</span> serverFileName = xhr.<span class="hljs-title function_">send</span>(formData);
    });
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">error</span>(<span class="hljs-params">e, callback</span>) {
    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">status</span> === <span class="hljs-number">404</span>) {
      <span class="hljs-title function_">callback</span>(<span class="hljs-string">&#x27;Requested resource not found&#x27;</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">callback</span>(e.<span class="hljs-title function_">json</span>());
    }
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">next</span>(n, data): <span class="hljs-built_in">any</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> d = data.<span class="hljs-title function_">json</span>();
      <span class="hljs-keyword">if</span> (n) {
        <span class="hljs-title function_">n</span>(d);
      }
      <span class="hljs-keyword">return</span> d;
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">if</span> (n) {
        <span class="hljs-title function_">n</span>({});
      }
      <span class="hljs-keyword">return</span> {};
    }
  }
}
</code></pre>
<h2 id="howtouse">How to Use</h2>
<p>Below is a very simple usage of the service helper class. Which has some calls to an order API</p>
<p>When using the service, you can handle errors just like you do with normal promises.</p>
<pre><code class="hljs ts language-ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ServiceHelper</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../base/service.helper&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">OrderModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./../models/order.model.ts&#x27;</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

  <span class="hljs-comment">/* We inject the service helper */</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> _: ServiceHelper</span>) {}

  <span class="hljs-title function_">getAllOrders</span>(searchText = <span class="hljs-string">&#x27;&#x27;</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">OrderModel</span>&gt;&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_</span>.<span class="hljs-title function_">api</span>()
      .<span class="hljs-title function_">url</span>(<span class="hljs-string">&#x27;orders&#x27;</span>)
      .<span class="hljs-title function_">needJson</span>()
      .<span class="hljs-title function_">get</span>(<span class="hljs-string">`searchText=<span class="hljs-subst">${searchText}</span>`</span>);
  }

  <span class="hljs-title function_">getAnOrder</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">OrderModel</span>&gt;&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_</span>.<span class="hljs-title function_">api</span>()
      .<span class="hljs-title function_">url</span>(<span class="hljs-string">`orders/<span class="hljs-subst">${id}</span>`</span>)
      .<span class="hljs-title function_">needJson</span>()
      .<span class="hljs-title function_">get</span>();
  }

  <span class="hljs-title function_">addAnOrder</span>(<span class="hljs-attr">order</span>: <span class="hljs-title class_">OrderModel</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">OrderModel</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_</span>.<span class="hljs-title function_">api</span>()
      .<span class="hljs-title function_">url</span>(<span class="hljs-string">&#x27;orders&#x27;</span>)
      .<span class="hljs-title function_">json</span>(order)
      .<span class="hljs-title function_">needJson</span>()
      .<span class="hljs-title function_">post</span>();
  }

  <span class="hljs-title function_">updateAnOrder</span>(<span class="hljs-attr">order</span>: <span class="hljs-title class_">OrderModel</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">OrderModel</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_</span>.<span class="hljs-title function_">api</span>()
      .<span class="hljs-title function_">url</span>(<span class="hljs-string">`orders/<span class="hljs-subst">${order.id}</span>`</span>)
      .<span class="hljs-title function_">json</span>(order)
      .<span class="hljs-title function_">needJson</span>()
      .<span class="hljs-title function_">patch</span>();
  }

  <span class="hljs-title function_">deleteAnOrder</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">OrderModel</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_</span>.<span class="hljs-title function_">api</span>()
      .<span class="hljs-title function_">url</span>(<span class="hljs-string">`orders/<span class="hljs-subst">${id}</span>`</span>)
      .<span class="hljs-title function_">needJson</span>()
      .<span class="hljs-title function_">delete</span>();
  }
}
</code></pre></div></div><div class="Post_related__V0k3K"><h2>Related Posts</h2><ul class="Post_relatedPosts__co9O7"><li><h3><a href="https://rusith.me/blog/deploy-app-on-aws-ecs-with-cdk-auto-scaling-and-load-balancing">Deploying an app on AWS ECS with CDK<small>Wed, Feb 15, 2023</small></a></h3></li><li><h3><a href="https://rusith.me/blog/building-a-website-on-s3">Deploying a Website on S3 With SSL, Continuous Integration<small>Mon, Aug 5, 2019</small></a></h3></li><li><h3><a href="https://rusith.me/blog/react-form-validation-using-custom-hooks">React Form Validation Using Custom Hooks<small>Mon, Jun 24, 2019</small></a></h3></li></ul></div><div id="disqus_thread"></div></div><div class="sbuttons"><a href="https://www.facebook.com/sharer/sharer.php?u=https://rusith.me/blog/angular-service-helper" target="_blank" class="sbutton fb" title="Share on Facebook" rel="noreferrer"><img alt="Facebook icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMjAgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMjAgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNzkuMSwyODhsMTQuMi05Mi43aC04OC45di02MC4xYzAtMjUuMywxMi40LTUwLjEsNTIuMi01MC4xaDQwLjRWNi4zYzAsMC0zNi43LTYuMy03MS43LTYuMwoJYy03My4yLDAtMTIxLjEsNDQuNC0xMjEuMSwxMjQuN3Y3MC42SDIyLjlWMjg4aDgxLjR2MjI0aDEwMC4yVjI4OEgyNzkuMXoiLz4KPC9zdmc+Cg=="/></a><a href="https://twitter.com/intent/tweet?text=https://rusith.me/blog/angular-service-helper" target="_blank" class="sbutton twitt" title="Share on Twitter" rel="noreferrer"><img alt="Twitter icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NTkuNCwxNTEuN2MwLjMsNC41LDAuMyw5LjEsMC4zLDEzLjZjMCwxMzguNy0xMDUuNiwyOTguNi0yOTguNiwyOTguNmMtNTkuNSwwLTExNC43LTE3LjItMTYxLjEtNDcuMQoJYzguNCwxLDE2LjYsMS4zLDI1LjMsMS4zYzQ5LjEsMCw5NC4yLTE2LjYsMTMwLjMtNDQuOGMtNDYuMS0xLTg0LjgtMzEuMi05OC4xLTcyLjhjNi41LDEsMTMsMS42LDE5LjgsMS42YzkuNCwwLDE4LjgtMS4zLDI3LjYtMy42CgljLTQ4LjEtOS43LTg0LjEtNTItODQuMS0xMDN2LTEuM2MxNCw3LjgsMzAuMiwxMi43LDQ3LjQsMTMuM2MtMjguMy0xOC44LTQ2LjgtNTEtNDYuOC04Ny40YzAtMTkuNSw1LjItMzcuNCwxNC4zLTUzCglDODcuNCwxMzAuOSwxNjUsMTcyLjUsMjUyLjEsMTc3LjFjLTEuNi03LjgtMi42LTE1LjktMi42LTI0YzAtNTcuOCw0Ni44LTEwNC45LDEwNC45LTEwNC45YzMwLjIsMCw1Ny41LDEyLjcsNzYuNywzMy4xCgljMjMuNy00LjUsNDYuNS0xMy4zLDY2LjYtMjUuM2MtNy44LDI0LjQtMjQuNCw0NC44LTQ2LjEsNTcuOGMyMS4xLTIuMyw0MS42LTguMSw2MC40LTE2LjJDNDk3LjcsMTE4LjMsNDc5LjgsMTM2LjgsNDU5LjQsMTUxLjcKCUw0NTkuNCwxNTEuN3oiLz4KPC9zdmc+Cg=="/></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://rusith.me/blog/angular-service-helper&amp;title=&amp;summary=&amp;source=" target="_blank" class="sbutton linkedin" title="Share on Linkedin" rel="noreferrer"><img alt="LinkedIn icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDAuMyw0NDhINy40VjE0OC45aDkyLjlWNDQ4eiBNNTMuOCwxMDguMUMyNC4xLDEwOC4xLDAsODMuNSwwLDUzLjhDMCwyNC4xLDI0LjEsMCw1My44LDAKCWMyOS43LDAsNTMuOCwyNC4xLDUzLjgsNTMuOEMxMDcuNiw4My41LDgzLjUsMTA4LjEsNTMuOCwxMDguMXogTTQ0Ny45LDQ0OGgtOTIuN1YzMDIuNGMwLTM0LjctMC43LTc5LjItNDguMy03OS4yCgljLTQ4LjMsMC01NS43LDM3LjctNTUuNyw3Ni43VjQ0OGgtOTIuOFYxNDguOWg4OS4xdjQwLjhoMS4zYzEyLjQtMjMuNSw0Mi43LTQ4LjMsODcuOS00OC4zYzk0LDAsMTExLjMsNjEuOSwxMTEuMywxNDIuM1Y0NDhINDQ3Ljl6CgkiLz4KPC9zdmc+Cg=="/></a><a target="_blank" class="sbutton mainsbutton"><img alt="Share button" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNTIsMzIwYy0yNS42LDAtNDguOSwxMC02Ni4xLDI2LjRsLTk4LjMtNjEuNWM1LjktMTguOCw1LjktMzkuMSwwLTU3LjhsOTguMy02MS41CglDMzAzLjEsMTgyLDMyNi40LDE5MiwzNTIsMTkyYzUzLDAsOTYtNDMsOTYtOTZTNDA1LDAsMzUyLDBzLTk2LDQzLTk2LDk2YzAsOS44LDEuNSwxOS42LDQuNCwyOC45bC05OC4zLDYxLjUKCUMxNDQuOSwxNzAsMTIxLjYsMTYwLDk2LDE2MGMtNTMsMC05Niw0My05Niw5NnM0Myw5Niw5Niw5NmMyNS42LDAsNDguOS0xMCw2Ni4xLTI2LjRsOTguMyw2MS41Yy0yLjksOS40LTQuNCwxOS4xLTQuNCwyOC45CgljMCw1Myw0Myw5Niw5Niw5NnM5Ni00Myw5Ni05NlM0MDUsMzIwLDM1MiwzMjBMMzUyLDMyMHogTTM1Miw0OGMyNi41LDAsNDgsMjEuNSw0OCw0OHMtMjEuNSw0OC00OCw0OHMtNDgtMjEuNS00OC00OAoJUzMyNS41LDQ4LDM1Miw0OHogTTk2LDMwNGMtMjYuNSwwLTQ4LTIxLjUtNDgtNDhzMjEuNS00OCw0OC00OHM0OCwyMS41LDQ4LDQ4UzEyMi41LDMwNCw5NiwzMDR6IE0zNTIsNDY0Yy0yNi41LDAtNDgtMjEuNS00OC00OAoJczIxLjUtNDgsNDgtNDhzNDgsMjEuNSw0OCw0OFMzNzguNSw0NjQsMzUyLDQ2NHoiLz4KPC9zdmc+Cg=="/></a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"fileName":"2018-04-02-angular-service-helper.md","fullPath":"/home/runner/work/rusith.me/rusith.me/modules/blog/posts/2018-04-02-angular-service-helper.md","title":"Service Helper — Seamlessly Send Request in Angular","tags":["programming","angular","typescript","web"],"comments":true,"description":"When using Angular 2+ to build web stuff , we use services to get data from our back-end services. usually most of these service calls are HTTP requests. Angular provides the Http class to send HTTP request, this has built on the Observable API. When we send a request, it returns an Observable which can be used to use the response returned by the server.","dateCreated":"Thu Mar 15 2018 00:00:00 GMT+0000 (Coordinated Universal Time)","dateModified":"Thu Mar 15 2018 00:00:00 GMT+0000 (Coordinated Universal Time)","datePublished":"Thu Mar 15 2018 00:00:00 GMT+0000 (Coordinated Universal Time)","dependencies":"Angular","about":"Creating a ServiceHelper class to send HTTP requests from Angular applications","path":"/blog/angular-service-helper","oldPath":"/2018/04/02/angular-service-helper","dateCreatedFormatted":"Thu, Mar 15, 2018","fullUrl":"https://rusith.me/blog/angular-service-helper","fileContent":"---\ntitle: Service Helper — Seamlessly Send Request in Angular\ntags: programming angular typescript web\ncomments: true\ndescription: When using Angular 2+ to build web stuff , we use services to get data from our back-end services. usually most of these service calls are HTTP requests. Angular provides the Http class to send HTTP request, this has built on the Observable API. When we send a request, it returns an Observable which can be used to use the response returned by the server.\ndateCreated: 2018-03-15\ndateModified: 2018-03-15\ndatePublished: 2018-03-15\ndependencies: Angular\nabout: Creating a ServiceHelper class to send HTTP requests from Angular applications\npath: /angular-service-helper\noldPath: /2018/04/02/angular-service-helper\n---\n\nWhen using Angular 2+ to build web stuff , we use services to get data from our back-end services. usually most of these service calls are HTTP requests. Angular provides the `Http` class to send HTTP request, this has built on the `Observable` API. When we send a request, it returns an Observable which can be used to use the response returned by the server.\n\nBelow is a Helper class which has built up on this Angular’s API. Which can be easily injected to a service and can be used to build HTTP requests seamlessly with its API that implements the Builder pattern and the Promise API\n\nI have added token authorization support to this implementation. I have to set the `accessToken` property of the service helper instance whenever i change the user token in the app.\n\nI have stored the base URL for my API in the `process.env.apiHost`, This could come from anywhere.\n\nYou can use multiple APIs by adding another function like the `api` function in the service helper.\n\n```ts\nimport { Injectable, EventEmitter } from '@angular/core';\nimport { Http, RequestOptions, Headers, Response } from '@angular/http';\nimport { Observable } from 'rxjs/Rx';\n\ndeclare const process: any;\n\n/**\n * This is a helper class that will help you  to send Http Requests\n */\n@Injectable()\nexport class ServiceHelper {\n  public accessToken: string;\n  public fetchStart = new EventEmitter\u003cany\u003e();\n  public fetchEnd = new EventEmitter\u003cany\u003e();\n  constructor(protected _http: Http) { }\n  public api(): IRequestBuilder {\n    return new RequestBuilder(this._http, process.env.apiHost, new UserTokenProvider(this), this.fetchStart, this.fetchEnd);\n  }\n\n}\n\nexport interface IRequestBuilder {\n  url(url: string): IRequestBuilder;\n  header(name: string, value: string): IRequestBuilder;\n  noAuth(): IRequestBuilder;\n  post\u003cT\u003e(): Promise\u003cT\u003e;\n  put\u003cT\u003e(): Promise\u003cT\u003e;\n  patch\u003cT\u003e(): Promise\u003cT\u003e;\n  delete\u003cT\u003e(): Promise\u003cT\u003e;\n  needJson(): IRequestBuilder;\n  needUrlencode(): IRequestBuilder;\n  hasJson(): IRequestBuilder;\n  hasUrlencoded(): IRequestBuilder;\n  rowData(data: any): IRequestBuilder;\n  json(data: any): IRequestBuilder;\n  get\u003cT\u003e(queyParameters?: string): Promise\u003cT\u003e;\n  getObserve\u003cT\u003e(queyParameters?: string): Observable\u003cT\u003e;\n  sendFile(files: File[], timenow: any, progress: any);\n}\n\ninterface AuthTokenProvider {\n  getTokenInfo(): { name: string, value: string };\n}\n\nexport type NextCallback\u003cT\u003e = (value: T) =\u003e void;\nexport type ErrorCallback\u003cT\u003e = (value: T) =\u003e void;\n\n\nclass UserTokenProvider implements AuthTokenProvider {\n  private _serviceHelper: ServiceHelper;\n  constructor(serviceHelper: ServiceHelper) { this._serviceHelper = serviceHelper; }\n  getTokenInfo(): { name: string, value: string } {\n    return this._serviceHelper.accessToken ? { name: 'Authorization', value: ` bearer ${this._serviceHelper.accessToken}` } : null;\n  }\n}\n\nexport class RequestBuilder implements IRequestBuilder {\n\n  private _helper: ServiceHelper;\n  private _request: {\n    url: string, headers: Array\u003c{ name: string, value: string }\u003e,\n    authorize: boolean, data: string\n  } = { url: '', headers: [], authorize: true, data: '' };\n  private _http: Http;\n  private _baseUrl: string;\n  private _tokenProvider: AuthTokenProvider;\n  private _startEvent: EventEmitter\u003cany\u003e;\n  private _endEvent: EventEmitter\u003cany\u003e;\n\n  constructor(http: Http, baseUrl: string, tokenProvider: AuthTokenProvider, start: EventEmitter\u003cany\u003e, end: EventEmitter\u003cany\u003e) {\n    this._http = http;\n    this._baseUrl = baseUrl;\n    this._tokenProvider = tokenProvider;\n    this._startEvent = start;\n    this._endEvent = end;\n    this._request.authorize = true;\n  }\n\n  private getRequestOptions(): RequestOptions {\n    const r = this._request;\n    const requestOptions = new RequestOptions();\n    if (r.authorize) {\n      const tokenInfo = this._tokenProvider.getTokenInfo();\n      if (tokenInfo) {\n        r.headers.push({ name: tokenInfo.name, value: tokenInfo.value });\n      }\n    }\n    if (r.headers \u0026\u0026 r.headers.length) {\n      const headers = new Headers();\n      r.headers.forEach(header =\u003e {\n        headers.append(header.name, header.value);\n      });\n      requestOptions.headers = headers;\n    }\n    requestOptions.withCredentials = false;\n    return requestOptions;\n  }\n\n  url(url: string): IRequestBuilder {\n    this._request.url = url;\n    return this;\n  }\n\n  rowData(data: any): IRequestBuilder {\n    this._request.data = data;\n    return this;\n  }\n\n  json(data: any): IRequestBuilder {\n    this._request.data = JSON.stringify(data);\n    return this.hasJson();\n  }\n\n  header(name: string, value: string): IRequestBuilder {\n    this._request.headers.push({ name, value });\n    return this;\n  }\n\n  noAuth(): IRequestBuilder {\n    this._request.authorize = false;\n    return this;\n  }\n\n  needJson(): IRequestBuilder {\n    this._request.headers.push({ name: 'Accept', value: 'application/json' });\n    return this;\n  }\n\n  needUrlencode(): IRequestBuilder {\n    this._request.headers.push({ name: 'Accept', value: 'application/x-www-form-urlencoded' });\n    return this;\n  }\n\n  hasJson(): IRequestBuilder {\n    this._request.headers.push({ name: 'Content-Type', value: 'application/json' });\n    return this;\n  }\n\n  hasUrlencoded(): IRequestBuilder {\n    this._request.headers.push({ name: 'Content-Type', value: 'application/x-www-form-urlencoded' });\n    return this;\n  }\n\n  post\u003cT\u003e(): Promise\u003cT\u003e {\n    return new Promise((resolve, reject) =\u003e {\n      this._startEvent.emit();\n      const subscription = this._http.post(this._baseUrl + this._request.url, this._request.data, this.getRequestOptions())\n        .subscribe((response) =\u003e { this.next(resolve, response); this._endEvent.emit(); },\n          (e) =\u003e { subscription.unsubscribe(); this._endEvent.emit(e); this.error(e, reject); });\n    });\n  }\n\n\n  put\u003cT\u003e(): Promise\u003cT\u003e {\n    return new Promise((resolve, reject) =\u003e {\n      this._startEvent.emit();\n      const subscription = this._http.put(this._baseUrl + this._request.url, this._request.data, this.getRequestOptions())\n        .subscribe((response) =\u003e { this.next(resolve, response); this._endEvent.emit(); },\n          (e) =\u003e { subscription.unsubscribe(); this._endEvent.emit(); this.error(e, reject); });\n    });\n\n  }\n\n  patch\u003cT\u003e(): Promise\u003cT\u003e {\n    return new Promise((resolve, reject) =\u003e {\n      this._startEvent.emit();\n      const subscription = this._http.patch(this._baseUrl + this._request.url, this._request.data, this.getRequestOptions())\n        .subscribe((response) =\u003e { this.next(resolve, response); this._endEvent.emit(); },\n          (e) =\u003e { subscription.unsubscribe(); this._endEvent.emit(); this.error(e, reject); });\n    });\n\n  }\n\n  delete\u003cT\u003e(): Promise\u003cT\u003e {\n    return new Promise((resolve, reject) =\u003e {\n      this._startEvent.emit();\n      const subscription = this._http.delete(this._baseUrl + this._request.url, this.getRequestOptions())\n        .subscribe((response) =\u003e { this.next(resolve, response); this._endEvent.emit(); },\n          (e) =\u003e { subscription.unsubscribe(); this._endEvent.emit(); this.error(e, reject); });\n    });\n\n  }\n\n  get\u003cT\u003e(queyParameters = ''): Promise\u003cT\u003e {\n    return new Promise((resolve, reject) =\u003e {\n      this._startEvent.emit();\n      const subscription = this._http.get(this._baseUrl + this._request.url + '?' + queyParameters, this.getRequestOptions())\n        .subscribe((response) =\u003e { this.next(resolve, response); this._endEvent.emit(); },\n          (e) =\u003e { subscription.unsubscribe(); this._endEvent.emit(); this.error(e, reject); });\n    });\n  }\n\n  getObserve\u003cT\u003e(queyParameters = ''): Observable\u003cT\u003e {\n    this._startEvent.emit();\n    return this._http.get(this._baseUrl + this._request.url + '?' + queyParameters, this.getRequestOptions())\n      .map(r =\u003e this.next(null, r));\n  }\n\n  sendFile(files: File[], timenow: any, progress: any): Observable\u003cany\u003e {\n    const url = this._baseUrl + this._request.url;\n    return Observable.create(observer =\u003e {\n      const formData: FormData = new FormData(),\n        xhr: XMLHttpRequest = new XMLHttpRequest();\n\n      for (let i = 0; i \u003c files.length; i++) {\n        formData.append('uploads[]', files[i], files[i].name);\n      }\n\n      xhr.onreadystatechange = () =\u003e {\n        if (xhr.readyState === 4) {\n          if (xhr.status === 200) {\n            observer.next(JSON.parse(xhr.response));\n            observer.complete();\n          } else {\n            observer.error(xhr.response);\n          }\n        }\n      };\n      xhr.upload.onprogress = (event) =\u003e {\n        progress(Math.round(event.loaded / event.total * 100));\n      };\n      xhr.open('POST', url, true);\n\n      if (this._request.authorize) {\n        const tokenInfo = this._tokenProvider.getTokenInfo();\n        if (tokenInfo) {\n          xhr.setRequestHeader(tokenInfo.name, tokenInfo.value);\n        }\n      }\n      const serverFileName = xhr.send(formData);\n    });\n  }\n\n  private error(e, callback) {\n    if (e.status === 404) {\n      callback('Requested resource not found');\n    } else {\n      callback(e.json());\n    }\n  }\n\n  private next(n, data): any {\n    try {\n      const d = data.json();\n      if (n) {\n        n(d);\n      }\n      return d;\n    } catch (e) {\n      if (n) {\n        n({});\n      }\n      return {};\n    }\n  }\n}\n```\n\n## How to Use\n\nBelow is a very simple usage of the service helper class. Which has some calls to an order API\n\nWhen using the service, you can handle errors just like you do with normal promises.\n\n```ts\nimport { Injectable } from '@angular/core';\nimport { ServiceHelper } from '../base/service.helper';\nimport OrderModel from './../models/order.model.ts';\n\n@Injectable()\nexport default class OrderService {\n\n  /* We inject the service helper */\n  constructor(private _: ServiceHelper) {}\n\n  getAllOrders(searchText = ''): Promise\u003cArray\u003cOrderModel\u003e\u003e {\n    return this._.api()\n      .url('orders')\n      .needJson()\n      .get(`searchText=${searchText}`);\n  }\n\n  getAnOrder(id: number): Promise\u003cArray\u003cOrderModel\u003e\u003e {\n    return this._.api()\n      .url(`orders/${id}`)\n      .needJson()\n      .get();\n  }\n\n  addAnOrder(order: OrderModel): Promise\u003cOrderModel\u003e {\n    return this._.api()\n      .url('orders')\n      .json(order)\n      .needJson()\n      .post();\n  }\n\n  updateAnOrder(order: OrderModel): Promise\u003cOrderModel\u003e {\n    return this._.api()\n      .url(`orders/${order.id}`)\n      .json(order)\n      .needJson()\n      .patch();\n  }\n\n  deleteAnOrder(id: number): Promise\u003cOrderModel\u003e {\n    return this._.api()\n      .url(`orders/${id}`)\n      .needJson()\n      .delete();\n  }\n}\n```\n","parsedContent":"\u003cp\u003eWhen using Angular 2+ to build web stuff , we use services to get data from our back-end services. usually most of these service calls are HTTP requests. Angular provides the \u003ccode\u003eHttp\u003c/code\u003e class to send HTTP request, this has built on the \u003ccode\u003eObservable\u003c/code\u003e API. When we send a request, it returns an Observable which can be used to use the response returned by the server.\u003c/p\u003e\n\u003cp\u003eBelow is a Helper class which has built up on this Angular’s API. Which can be easily injected to a service and can be used to build HTTP requests seamlessly with its API that implements the Builder pattern and the Promise API\u003c/p\u003e\n\u003cp\u003eI have added token authorization support to this implementation. I have to set the \u003ccode\u003eaccessToken\u003c/code\u003e property of the service helper instance whenever i change the user token in the app.\u003c/p\u003e\n\u003cp\u003eI have stored the base URL for my API in the \u003ccode\u003eprocess.env.apiHost\u003c/code\u003e, This could come from anywhere.\u003c/p\u003e\n\u003cp\u003eYou can use multiple APIs by adding another function like the \u003ccode\u003eapi\u003c/code\u003e function in the service helper.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs ts language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEventEmitter\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;@angular/core\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eHttp\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRequestOptions\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eHeaders\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;@angular/http\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;rxjs/Rx\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003edeclare\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eprocess\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e/**\n * This is a helper class that will help you  to send Http Requests\n */\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e@Injectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eServiceHelper\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eaccessToken\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e fetchStart = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEventEmitter\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e\u0026gt;();\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e fetchEnd = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEventEmitter\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e\u0026gt;();\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprotected\u003c/span\u003e _http: Http\u003c/span\u003e) { }\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eapi\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRequestBuilder\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_http\u003c/span\u003e, process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eapiHost\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserTokenProvider\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e), \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efetchStart\u003c/span\u003e, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efetchEnd\u003c/span\u003e);\n  }\n\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003eurl\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003eheader\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003enoAuth\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e;\n  post\u0026lt;T\u0026gt;(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt;;\n  put\u0026lt;T\u0026gt;(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt;;\n  patch\u0026lt;T\u0026gt;(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt;;\n  \u003cspan class=\"hljs-keyword\"\u003edelete\u003c/span\u003e\u0026lt;T\u0026gt;(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt;;\n  \u003cspan class=\"hljs-title function_\"\u003eneedJson\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003eneedUrlencode\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003ehasJson\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003ehasUrlencoded\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003erowData\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e;\n  get\u0026lt;T\u0026gt;(queyParameters?: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt;;\n  getObserve\u0026lt;T\u0026gt;(queyParameters?: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e\u0026lt;T\u0026gt;;\n  \u003cspan class=\"hljs-title function_\"\u003esendFile\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003efiles\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFile\u003c/span\u003e[], \u003cspan class=\"hljs-attr\"\u003etimenow\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eprogress\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthTokenProvider\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003egetTokenInfo\u003c/span\u003e(): { \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e };\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNextCallback\u003c/span\u003e\u0026lt;T\u0026gt; = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003evalue: T\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eErrorCallback\u003c/span\u003e\u0026lt;T\u0026gt; = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003evalue: T\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e;\n\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserTokenProvider\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimplements\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthTokenProvider\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e_serviceHelper\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eServiceHelper\u003c/span\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eserviceHelper: ServiceHelper\u003c/span\u003e) { \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_serviceHelper\u003c/span\u003e = serviceHelper; }\n  \u003cspan class=\"hljs-title function_\"\u003egetTokenInfo\u003c/span\u003e(): { \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e } {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_serviceHelper\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eaccessToken\u003c/span\u003e ? { \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Authorization\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e` bearer \u003cspan class=\"hljs-subst\"\u003e${\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e._serviceHelper.accessToken}\u003c/span\u003e`\u003c/span\u003e } : \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e;\n  }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRequestBuilder\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimplements\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e_helper\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eServiceHelper\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e_request\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eArray\u003c/span\u003e\u0026lt;{ \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e }\u0026gt;,\n    \u003cspan class=\"hljs-attr\"\u003eauthorize\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eboolean\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e\n  } = { \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: [], \u003cspan class=\"hljs-attr\"\u003eauthorize\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e };\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e_http\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eHttp\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e_baseUrl\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e_tokenProvider\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAuthTokenProvider\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e_startEvent\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEventEmitter\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e\u0026gt;;\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e_endEvent\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEventEmitter\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e\u0026gt;;\n\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ehttp: Http, baseUrl: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e, tokenProvider: AuthTokenProvider, start: EventEmitter\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e\u0026gt;, end: EventEmitter\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e\u0026gt;\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_http\u003c/span\u003e = http;\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_baseUrl\u003c/span\u003e = baseUrl;\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_tokenProvider\u003c/span\u003e = tokenProvider;\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_startEvent\u003c/span\u003e = start;\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e = end;\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthorize\u003c/span\u003e = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetRequestOptions\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eRequestOptions\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e r = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e requestOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRequestOptions\u003c/span\u003e();\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (r.\u003cspan class=\"hljs-property\"\u003eauthorize\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e tokenInfo = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_tokenProvider\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetTokenInfo\u003c/span\u003e();\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (tokenInfo) {\n        r.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: tokenInfo.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: tokenInfo.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e });\n      }\n    }\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (r.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e \u0026amp;\u0026amp; r.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e headers = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHeaders\u003c/span\u003e();\n      r.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eforEach\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eheader\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n        headers.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(header.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e, header.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e);\n      });\n      requestOptions.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e = headers;\n    }\n    requestOptions.\u003cspan class=\"hljs-property\"\u003ewithCredentials\u003c/span\u003e = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e requestOptions;\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003eurl\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e = url;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003erowData\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e = data;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(data);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ehasJson\u003c/span\u003e();\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003eheader\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e({ name, value });\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003enoAuth\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthorize\u003c/span\u003e = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003eneedJson\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Accept\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;application/json\u0026#x27;\u003c/span\u003e });\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003eneedUrlencode\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Accept\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;application/x-www-form-urlencoded\u0026#x27;\u003c/span\u003e });\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003ehasJson\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Content-Type\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;application/json\u0026#x27;\u003c/span\u003e });\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003ehasUrlencoded\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIRequestBuilder\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Content-Type\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;application/x-www-form-urlencoded\u0026#x27;\u003c/span\u003e });\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e;\n  }\n\n  post\u0026lt;T\u0026gt;(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve, reject\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_startEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e();\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e subscription = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_http\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_baseUrl\u003c/span\u003e + \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRequestOptions\u003c/span\u003e())\n        .\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(resolve, response); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(); },\n          \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ee\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { subscription.\u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e(); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(e); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(e, reject); });\n    });\n  }\n\n\n  put\u0026lt;T\u0026gt;(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve, reject\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_startEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e();\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e subscription = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_http\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_baseUrl\u003c/span\u003e + \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRequestOptions\u003c/span\u003e())\n        .\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(resolve, response); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(); },\n          \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ee\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { subscription.\u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e(); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(e, reject); });\n    });\n\n  }\n\n  patch\u0026lt;T\u0026gt;(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve, reject\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_startEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e();\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e subscription = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_http\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epatch\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_baseUrl\u003c/span\u003e + \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRequestOptions\u003c/span\u003e())\n        .\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(resolve, response); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(); },\n          \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ee\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { subscription.\u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e(); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(e, reject); });\n    });\n\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003edelete\u003c/span\u003e\u0026lt;T\u0026gt;(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve, reject\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_startEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e();\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e subscription = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_http\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_baseUrl\u003c/span\u003e + \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRequestOptions\u003c/span\u003e())\n        .\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(resolve, response); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(); },\n          \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ee\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { subscription.\u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e(); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(e, reject); });\n    });\n\n  }\n\n  get\u0026lt;T\u0026gt;(queyParameters = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;T\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve, reject\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_startEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e();\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e subscription = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_http\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_baseUrl\u003c/span\u003e + \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e + \u003cspan class=\"hljs-string\"\u003e\u0026#x27;?\u0026#x27;\u003c/span\u003e + queyParameters, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRequestOptions\u003c/span\u003e())\n        .\u003cspan class=\"hljs-title function_\"\u003esubscribe\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(resolve, response); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(); },\n          \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ee\u003c/span\u003e) =\u0026gt;\u003c/span\u003e { subscription.\u003cspan class=\"hljs-title function_\"\u003eunsubscribe\u003c/span\u003e(); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_endEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e(); \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(e, reject); });\n    });\n  }\n\n  getObserve\u0026lt;T\u0026gt;(queyParameters = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e\u0026lt;T\u0026gt; {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_startEvent\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eemit\u003c/span\u003e();\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_http\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_baseUrl\u003c/span\u003e + \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e + \u003cspan class=\"hljs-string\"\u003e\u0026#x27;?\u0026#x27;\u003c/span\u003e + queyParameters, \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRequestOptions\u003c/span\u003e())\n      .\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003er\u003c/span\u003e =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, r));\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003esendFile\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003efiles\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFile\u003c/span\u003e[], \u003cspan class=\"hljs-attr\"\u003etimenow\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eprogress\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_baseUrl\u003c/span\u003e + \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eobserver\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eformData\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFormData\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFormData\u003c/span\u003e(),\n        \u003cspan class=\"hljs-attr\"\u003exhr\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eXMLHttpRequest\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eXMLHttpRequest\u003c/span\u003e();\n\n      \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026lt; files.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e; i++) {\n        formData.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;uploads[]\u0026#x27;\u003c/span\u003e, files[i], files[i].\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e);\n      }\n\n      xhr.\u003cspan class=\"hljs-property\"\u003eonreadystatechange\u003c/span\u003e = \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (xhr.\u003cspan class=\"hljs-property\"\u003ereadyState\u003c/span\u003e === \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e) {\n          \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (xhr.\u003cspan class=\"hljs-property\"\u003estatus\u003c/span\u003e === \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e) {\n            observer.\u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eparse\u003c/span\u003e(xhr.\u003cspan class=\"hljs-property\"\u003eresponse\u003c/span\u003e));\n            observer.\u003cspan class=\"hljs-title function_\"\u003ecomplete\u003c/span\u003e();\n          } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n            observer.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(xhr.\u003cspan class=\"hljs-property\"\u003eresponse\u003c/span\u003e);\n          }\n        }\n      };\n      xhr.\u003cspan class=\"hljs-property\"\u003eupload\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eonprogress\u003c/span\u003e = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eevent\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-title function_\"\u003eprogress\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eMath\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eround\u003c/span\u003e(event.\u003cspan class=\"hljs-property\"\u003eloaded\u003c/span\u003e / event.\u003cspan class=\"hljs-property\"\u003etotal\u003c/span\u003e * \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e));\n      };\n      xhr.\u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;POST\u0026#x27;\u003c/span\u003e, url, \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_request\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthorize\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e tokenInfo = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_tokenProvider\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetTokenInfo\u003c/span\u003e();\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (tokenInfo) {\n          xhr.\u003cspan class=\"hljs-title function_\"\u003esetRequestHeader\u003c/span\u003e(tokenInfo.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e, tokenInfo.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e);\n        }\n      }\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e serverFileName = xhr.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(formData);\n    });\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ee, callback\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (e.\u003cspan class=\"hljs-property\"\u003estatus\u003c/span\u003e === \u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e) {\n      \u003cspan class=\"hljs-title function_\"\u003ecallback\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Requested resource not found\u0026#x27;\u003c/span\u003e);\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_\"\u003ecallback\u003c/span\u003e(e.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e());\n    }\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(n, data): \u003cspan class=\"hljs-built_in\"\u003eany\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e d = data.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e();\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (n) {\n        \u003cspan class=\"hljs-title function_\"\u003en\u003c/span\u003e(d);\n      }\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e d;\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (e) {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (n) {\n        \u003cspan class=\"hljs-title function_\"\u003en\u003c/span\u003e({});\n      }\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {};\n    }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"howtouse\"\u003eHow to Use\u003c/h2\u003e\n\u003cp\u003eBelow is a very simple usage of the service helper class. Which has some calls to an order API\u003c/p\u003e\n\u003cp\u003eWhen using the service, you can handle errors just like you do with normal promises.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs ts language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;@angular/core\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eServiceHelper\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;../base/service.helper\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrderModel\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;./../models/order.model.ts\u0026#x27;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-meta\"\u003e@Injectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrderService\u003c/span\u003e {\n\n  \u003cspan class=\"hljs-comment\"\u003e/* We inject the service helper */\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e _: ServiceHelper\u003c/span\u003e) {}\n\n  \u003cspan class=\"hljs-title function_\"\u003egetAllOrders\u003c/span\u003e(searchText = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\u0026#x27;\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eArray\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eOrderModel\u003c/span\u003e\u0026gt;\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eapi\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003eurl\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;orders\u0026#x27;\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003eneedJson\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`searchText=\u003cspan class=\"hljs-subst\"\u003e${searchText}\u003c/span\u003e`\u003c/span\u003e);\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003egetAnOrder\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eArray\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eOrderModel\u003c/span\u003e\u0026gt;\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eapi\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003eurl\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`orders/\u003cspan class=\"hljs-subst\"\u003e${id}\u003c/span\u003e`\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003eneedJson\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e();\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003eaddAnOrder\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eorder\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eOrderModel\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eOrderModel\u003c/span\u003e\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eapi\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003eurl\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;orders\u0026#x27;\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e(order)\n      .\u003cspan class=\"hljs-title function_\"\u003eneedJson\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e();\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003eupdateAnOrder\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eorder\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eOrderModel\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eOrderModel\u003c/span\u003e\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eapi\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003eurl\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`orders/\u003cspan class=\"hljs-subst\"\u003e${order.id}\u003c/span\u003e`\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e(order)\n      .\u003cspan class=\"hljs-title function_\"\u003eneedJson\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003epatch\u003c/span\u003e();\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003edeleteAnOrder\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eOrderModel\u003c/span\u003e\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eapi\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003eurl\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`orders/\u003cspan class=\"hljs-subst\"\u003e${id}\u003c/span\u003e`\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003eneedJson\u003c/span\u003e()\n      .\u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e();\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e"},"page":"Post","topTags":["programming","aws","web","machineLearning","react","javascript","dataScience","typescript","r","csharp"],"relatedPosts":[{"title":"Deploying an app on AWS ECS with CDK","tags":["programming","nextJS","react","aws","ecs","typescript","cdk","devops"],"fullUrl":"https://rusith.me/blog/deploy-app-on-aws-ecs-with-cdk-auto-scaling-and-load-balancing","date":"Wed, Feb 15, 2023","description":"How to deploy an application on AWS ECS with load-balancing and auto-scaling using CDK by writing the CDK code in TypeScript","banner":"/post-data/2023-02-15-deploying-react-app-on-ecs/banner.png"},{"title":"Deploying a Website on S3 With SSL, Continuous Integration","tags":["aws","programming","web"],"fullUrl":"https://rusith.me/blog/building-a-website-on-s3","date":"Mon, Aug 5, 2019","description":"In this post, I am creating a website and host it on S3 and setup a continuous integration pipeline setup using Gitlab","banner":"/post-data/2019-08-14-building-a-website-on-s3/banner.png"},{"title":"React Form Validation Using Custom Hooks","tags":["web","programming","react","javascript"],"fullUrl":"https://rusith.me/blog/react-form-validation-using-custom-hooks","date":"Mon, Jun 24, 2019","description":"Form validation in react is bit tricky. This is an attempt to make it bit easy by using react hooks. here we write few custom hooks to create a re-usable validation logic that can be used in any form.","banner":null}]},"__N_SSG":true},"page":"/[[...path]]","query":{"path":["blog","angular-service-helper"]},"buildId":"PaoTT2YDvwYY_jbobaNoC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>