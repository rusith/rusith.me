<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link href="https://gmpg.org/xfn/11" rel="profile"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5GDZWWBRFX"></script><script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-5GDZWWBRFX');
                </script><link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://rusith.me/icons/favicon-144-image.png"/><link rel="shortcut icon" href="https://rusith.me/favicon.ico"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/><meta property="twitter:creator" content="@rusith_"/><meta name="robots" content="index,follow"/><title>Testing Redux Connected React Components Using Jest</title><meta name="description" content="Testing React components connected to a Redux store using Jest and React Testing Library."/><link rel="canonical" href="https://rusith.me/blog/testing-react-redux-connected-components-using-jest"/><meta property="og:title" content="Testing Redux Connected React Components Using Jest"/><meta property="og:url" content="https://rusith.me/blog/testing-react-redux-connected-components-using-jest"/><meta property="og:description" content="Testing React components connected to a Redux store using Jest and React Testing Library."/><meta property="og:site_name" content="Rusith&#x27;s blog"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="blog"/><meta property="twitter:description" content="Testing React components connected Redux store using Jest and React Testing Library"/><meta property="og:image" content="/post-data/2020-04-27-testing-redux-connect/banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Testing Redux Connected React Components Using Jest"/><meta name="twitter:image" content="/post-data/2020-04-27-testing-redux-connect/banner.png"/><meta name="twitter:site" content="@rusith_"/><script type="application/ld+json">{"@type":"BlogPosting","@context":"https://schema.org","headline":"Testing Redux Connected React Components Using Jest","author":{"@type":"Person","name":"Shanaka Rusith","url":"https://rusith.me/about"},"keywords":"programming,javascript,react,redux,testing,jest","url":"https://rusith.me/blog/testing-react-redux-connected-components-using-jest","description":"Testing React components connected to a Redux store using Jest and React Testing Library.","copyrightHolder":{"@type":"Person","name":"Shanaka Rusith","url":"https://rusith.me/about"},"copyrightYear":"2021","mainEntityOfPage":{"@type":"WebPage","@id":"https://rusith.me"},"publisher":{"@type":"Organization","name":"Shanaka Rusith","url":"https://rusith.me/about","logo":{"@type":"ImageObject","url":"https://rusith.me/images/rusith/picture.jpg"}},"image":"/post-data/2020-04-27-testing-redux-connect/banner.png","about":"Testing React components connected Redux store using Jest and React Testing Library","datePublished":"Mon Apr 27 2020 00:00:00 GMT+0000 (Coordinated Universal Time)","dateModified":"Mon Apr 27 2020 00:00:00 GMT+0000 (Coordinated Universal Time)"}</script><meta name="next-head-count" content="27"/><link rel="preload" href="/_next/static/css/7220332d6168fb06.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7220332d6168fb06.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0662676664ee362f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0662676664ee362f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-05c0aa1e498fcb8c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f89480c30d9a5d02.js" defer=""></script><script src="/_next/static/chunks/947-277c090e7d6803d0.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...path%5D%5D-d5cf2aa81a49e144.js" defer=""></script><script src="/_next/static/PaoTT2YDvwYY_jbobaNoC/_buildManifest.js" defer=""></script><script src="/_next/static/PaoTT2YDvwYY_jbobaNoC/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Sidebar_r__IEuUi"><div class="Sidebar_sticky__RE23V"><div class="Sidebar_about__s_kM6"><h2><a href="/">Rusith.me</a></h2><div class="Sidebar_socialButtons__XcH6p"><a href="https://www.linkedin.com/in/shanaka-rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="LinkedIn icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MTYsMzJIMzEuOUMxNC4zLDMyLDAsNDYuNSwwLDY0LjN2MzgzLjRDMCw0NjUuNSwxNC4zLDQ4MCwzMS45LDQ4MEg0MTZjMTcuNiwwLDMyLTE0LjUsMzItMzIuM1Y2NC4zCglDNDQ4LDQ2LjUsNDMzLjYsMzIsNDE2LDMyeiBNMTM1LjQsNDE2SDY5VjIwMi4yaDY2LjVWNDE2SDEzNS40eiBNMTAyLjIsMTczYy0yMS4zLDAtMzguNS0xNy4zLTM4LjUtMzguNVM4MC45LDk2LDEwMi4yLDk2CgljMjEuMiwwLDM4LjUsMTcuMywzOC41LDM4LjVDMTQwLjcsMTU1LjgsMTIzLjUsMTczLDEwMi4yLDE3M3ogTTM4NC4zLDQxNmgtNjYuNFYzMTJjMC0yNC44LTAuNS01Ni43LTM0LjUtNTYuNwoJYy0zNC42LDAtMzkuOSwyNy0zOS45LDU0LjlWNDE2aC02Ni40VjIwMi4yaDYzLjd2MjkuMmgwLjljOC45LTE2LjgsMzAuNi0zNC41LDYyLjktMzQuNWM2Ny4yLDAsNzkuNyw0NC4zLDc5LjcsMTAxLjlWNDE2eiIvPgo8L3N2Zz4K"/></a><a href="https://github.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Github icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMzUyYzI2LjUsMCw0OC0yMS41LDQ4LTQ4VjgwCglDNDQ4LDUzLjUsNDI2LjUsMzIsNDAwLDMyeiBNMjc3LjMsNDE1LjdjLTguNCwxLjUtMTEuNS0zLjctMTEuNS04YzAtNS40LDAuMi0zMywwLjItNTUuM2MwLTE1LjYtNS4yLTI1LjUtMTEuMy0zMC43CgljMzctNC4xLDc2LTkuMiw3Ni03My4xYzAtMTguMi02LjUtMjcuMy0xNy4xLTM5YzEuNy00LjMsNy40LTIyLTEuNy00NWMtMTMuOS00LjMtNDUuNywxNy45LTQ1LjcsMTcuOWMtMTMuMi0zLjctMjcuNS01LjYtNDEuNi01LjYKCXMtMjguNCwxLjktNDEuNiw1LjZjMCwwLTMxLjgtMjIuMi00NS43LTE3LjljLTkuMSwyMi45LTMuNSw0MC42LTEuNyw0NWMtMTAuNiwxMS43LTE1LjYsMjAuOC0xNS42LDM5YzAsNjMuNiwzNy4zLDY5LDc0LjMsNzMuMQoJYy00LjgsNC4zLTkuMSwxMS43LTEwLjYsMjIuM2MtOS41LDQuMy0zMy44LDExLjctNDguMy0xMy45Yy05LjEtMTUuOC0yNS41LTE3LjEtMjUuNS0xNy4xYy0xNi4yLTAuMi0xLjEsMTAuMi0xLjEsMTAuMgoJYzEwLjgsNSwxOC40LDI0LjIsMTguNCwyNC4yYzkuNywyOS43LDU2LjEsMTkuNyw1Ni4xLDE5LjdjMCwxMy45LDAuMiwzNi41LDAuMiw0MC42YzAsNC4zLTMsOS41LTExLjUsOAoJYy02Ni0yMi4xLTExMi4yLTg0LjktMTEyLjItMTU4LjNjMC05MS44LDcwLjItMTYxLjUsMTYyLTE2MS41UzM4OCwxNjUuNiwzODgsMjU3LjRDMzg4LjEsMzMwLjgsMzQzLjMsMzkzLjcsMjc3LjMsNDE1Ljd6CgkgTTE3OS4yLDM1NC42Yy0xLjksMC40LTMuNy0wLjQtMy45LTEuN2MtMC4yLTEuNSwxLjEtMi44LDMtMy4yYzEuOS0wLjIsMy43LDAuNiwzLjksMS45QzE4Mi41LDM1Mi45LDE4MS4yLDM1NC4yLDE3OS4yLDM1NC42CglMMTc5LjIsMzU0LjZ6IE0xNjkuNywzNTMuN2MwLDEuMy0xLjUsMi40LTMuNSwyLjRjLTIuMiwwLjItMy43LTAuOS0zLjctMi40YzAtMS4zLDEuNS0yLjQsMy41LTIuNAoJQzE2Ny45LDM1MS4xLDE2OS43LDM1Mi4yLDE2OS43LDM1My43eiBNMTU2LDM1Mi42Yy0wLjQsMS4zLTIuNCwxLjktNC4xLDEuM2MtMS45LTAuNC0zLjItMS45LTIuOC0zLjJjMC40LTEuMywyLjQtMS45LDQuMS0xLjUKCUMxNTUuMiwzNDkuOCwxNTYuNSwzNTEuMywxNTYsMzUyLjZMMTU2LDM1Mi42eiBNMTQzLjcsMzQ3LjJjLTAuOSwxLjEtMi44LDAuOS00LjMtMC42Yy0xLjUtMS4zLTEuOS0zLjItMC45LTQuMQoJYzAuOS0xLjEsMi44LTAuOSw0LjMsMC42QzE0NC4xLDM0NC40LDE0NC42LDM0Ni40LDE0My43LDM0Ny4yeiBNMTM0LjYsMzM4LjFjLTAuOSwwLjYtMi42LDAtMy43LTEuNXMtMS4xLTMuMiwwLTMuOQoJYzEuMS0wLjksMi44LTAuMiwzLjcsMS4zQzEzNS43LDMzNS41LDEzNS43LDMzNy4zLDEzNC42LDMzOC4xeiBNMTI4LjEsMzI4LjRjLTAuOSwwLjktMi40LDAuNC0zLjUtMC42Yy0xLjEtMS4zLTEuMy0yLjgtMC40LTMuNQoJYzAuOS0wLjksMi40LTAuNCwzLjUsMC42QzEyOC44LDMyNi4yLDEyOSwzMjcuNywxMjguMSwzMjguNHogTTEyMS40LDMyMWMtMC40LDAuOS0xLjcsMS4xLTIuOCwwLjRjLTEuMy0wLjYtMS45LTEuNy0xLjUtMi42CgljMC40LTAuNiwxLjUtMC45LDIuOC0wLjRDMTIxLjIsMzE5LjEsMTIxLjgsMzIwLjIsMTIxLjQsMzIxeiIvPgo8L3N2Zz4K"/></a><a href="https://gitlab.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Gitlab icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUuMiwyNC45Yy0zLjEtOC45LTE1LjctOC45LTE4LjksMEwyOS44LDE5OS43aDEzMkMxNjEuNywxOTkuNywxMDUuMiwyNC45LDEwNS4yLDI0Ljl6IE0wLjksMjg3LjcKCWMtMi42LDgsMC4zLDE2LjksNy4xLDIybDI0Ny45LDE4NGwtMjI2LjItMjk0TDAuOSwyODcuN3ogTTE2MS43LDE5OS43bDk0LjMsMjk0bDk0LjMtMjk0SDE2MS43eiBNNTExLjEsMjg3LjdsLTI4LjgtODhMMjU2LDQ5My43CglsMjQ3LjktMTg0QzUxMC44LDMwNC42LDUxMy42LDI5NS43LDUxMS4xLDI4Ny43eiBNNDI1LjcsMjQuOWMtMy4xLTguOS0xNS43LTguOS0xOC45LDBsLTU2LjYsMTc0LjhoMTMyTDQyNS43LDI0Ljl6Ii8+Cjwvc3ZnPgo="/></a><a href="http://goodreads.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="GoodReads icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yOTkuOSwxOTEuMmM1LjEsMzcuMy00LjcsNzktMzUuOSwxMDAuN2MtMjIuMywxNS41LTUyLjgsMTQuMS03MC44LDUuN2MtMzcuMS0xNy4zLTQ5LjUtNTguNi00Ni44LTk3LjIKCWM0LjMtNjAuOSw0MC45LTg3LjksNzUuMy04Ny41QzI2OC42LDExMi43LDI5My41LDE0NC43LDI5OS45LDE5MS4yTDI5OS45LDE5MS4yeiBNNDQ4LDg4djMzNmMwLDMwLjktMjUuMSw1Ni01Niw1Nkg1NgoJYy0zMC45LDAtNTYtMjUuMS01Ni01NlY4OGMwLTMwLjksMjUuMS01Niw1Ni01NmgzMzZDNDIyLjksMzIsNDQ4LDU3LjEsNDQ4LDg4eiBNMzMwLDMxMy4yYzAsMC0wLjEtMzQtMC4xLTIxNy4zaC0yOXY0MC4zCgljLTAuOCwwLjMtMS4yLTAuNS0xLjYtMS4yYy05LjYtMjAuNy0zNS45LTQ2LjMtNzYtNDZjLTUxLjksMC40LTg3LjIsMzEuMi0xMDAuNiw3Ny44Yy00LjMsMTQuOS01LjgsMzAuMS01LjUsNDUuNgoJYzEuNyw3Ny45LDQ1LjEsMTE3LjgsMTEyLjQsMTE1LjJjMjguOS0xLjEsNTQuNS0xNyw2OS00NS4yYzAuNS0xLDEuMS0xLjksMS43LTIuOWMwLjIsMC4xLDAuNCwwLjEsMC42LDAuMgoJYzAuMywzLjgsMC4yLDMwLjcsMC4xLDM0LjVjLTAuMiwxNC44LTIsMjkuNS03LjIsNDMuNWMtNy44LDIxLTIyLjMsMzQuNy00NC41LDM5LjVjLTE3LjgsMy45LTM1LjYsMy44LTUzLjItMS4yCgljLTIxLjUtNi4xLTM2LjUtMTktNDEuMS00MS44Yy0wLjMtMS42LTEuMy0xLjMtMi4zLTEuM2gtMjYuOGMwLjgsMTAuNiwzLjIsMjAuMyw4LjUsMjkuMmMyNC4yLDQwLjUsODIuNyw0OC41LDEyOC4yLDM3LjQKCUMzMTIuNSw0MDcuMiwzMjkuOSwzNjQuNiwzMzAsMzEzLjJMMzMwLDMxMy4yeiIvPgo8L3N2Zz4K"/></a><a href="https://twitter.com/rusith_" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Twitter icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMzUyYzI2LjUsMCw0OC0yMS41LDQ4LTQ4VjgwCglDNDQ4LDUzLjUsNDI2LjUsMzIsNDAwLDMyeiBNMzUxLjEsMTkwLjhjMC4yLDIuOCwwLjIsNS43LDAuMiw4LjVjMCw4Ni43LTY2LDE4Ni42LTE4Ni42LDE4Ni42Yy0zNy4yLDAtNzEuNy0xMC44LTEwMC43LTI5LjQKCWM1LjMsMC42LDEwLjQsMC44LDE1LjgsMC44YzMwLjcsMCw1OC45LTEwLjQsODEuNC0yOGMtMjguOC0wLjYtNTMtMTkuNS02MS4zLTQ1LjVjMTAuMSwxLjUsMTkuMiwxLjUsMjkuNi0xLjIKCWMtMzAtNi4xLTUyLjUtMzIuNS01Mi41LTY0LjR2LTAuOGM4LjcsNC45LDE4LjksNy45LDI5LjYsOC4zYy0xOC4zLTEyLjItMjkuMi0zMi43LTI5LjItNTQuNmMwLTEyLjIsMy4yLTIzLjQsOC45LTMzLjEKCWMzMi4zLDM5LjgsODAuOCw2NS44LDEzNS4yLDY4LjZjLTkuMy00NC41LDI0LTgwLjYsNjQtODAuNmMxOC45LDAsMzUuOSw3LjksNDcuOSwyMC43YzE0LjgtMi44LDI5LTguMyw0MS42LTE1LjgKCWMtNC45LDE1LjItMTUuMiwyOC0yOC44LDM2LjFjMTMuMi0xLjQsMjYtNS4xLDM3LjgtMTAuMkMzNzUuMSwxNjkuOSwzNjMuOSwxODEuNSwzNTEuMSwxOTAuOHoiLz4KPC9zdmc+Cg=="/></a><a href="https://www.facebook.com/shanaka.rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Facebook icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMTM3LjNWMzI3LjdoLTYzVjI1Nmg2M3YtNTQuNgoJYzAtNjIuMiwzNy05Ni41LDkzLjctOTYuNWMyNy4xLDAsNTUuNSw0LjgsNTUuNSw0Ljh2NjFoLTMxLjNjLTMwLjgsMC00MC40LDE5LjEtNDAuNCwzOC43VjI1Nmg2OC44bC0xMSw3MS43aC01Ny44VjQ4MEg0MDAKCWMyNi41LDAsNDgtMjEuNSw0OC00OFY4MEM0NDgsNTMuNSw0MjYuNSwzMiw0MDAsMzJ6Ii8+Cjwvc3ZnPgo="/></a></div><p>A blog from a tech and art enthusiast</p></div><div class="Sidebar_nav__CTYKS"><div class="Sidebar_tagWrapper__w460D"><a href="/tag/programming/"><span class="Sidebar_tag__mAo8y">#<!-- -->programming</span></a><a href="/tag/aws/"><span class="Sidebar_tag__mAo8y">#<!-- -->aws</span></a><a href="/tag/web/"><span class="Sidebar_tag__mAo8y">#<!-- -->web</span></a><a href="/tag/machineLearning/"><span class="Sidebar_tag__mAo8y">#<!-- -->machineLearning</span></a><a href="/tag/react/"><span class="Sidebar_tag__mAo8y">#<!-- -->react</span></a><a href="/tag/javascript/"><span class="Sidebar_tag__mAo8y">#<!-- -->javascript</span></a><a href="/tag/dataScience/"><span class="Sidebar_tag__mAo8y">#<!-- -->dataScience</span></a><a href="/tag/typescript/"><span class="Sidebar_tag__mAo8y">#<!-- -->typescript</span></a><a href="/tag/r/"><span class="Sidebar_tag__mAo8y">#<!-- -->r</span></a><a href="/tag/csharp/"><span class="Sidebar_tag__mAo8y">#<!-- -->csharp</span></a></div></div></div></div><div class="comp_content__73ns2"><div><h1>Testing Redux Connected React Components Using Jest</h1><div class="Post_tags__HKWUb"><a class="Post_tag__5GXoX" href="https://rusith.me/tag/programming">#<!-- -->programming</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/javascript">#<!-- -->javascript</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/react">#<!-- -->react</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/redux">#<!-- -->redux</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/testing">#<!-- -->testing</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/jest">#<!-- -->jest</a></div><span class="Post_date__h8Of6">Mon, Apr 27, 2020</span><div><p><img alt="Page banner" class="Post_banner__soX4H" src="https://rusith.me/post-data/2020-04-27-testing-redux-connect/banner.png"></p>
<p>When writing tests for a React application you might come across the case where you have to test a React
component that is connected to a Redux store using the <code>connect</code> function.
Testing these components in isolation might look complicated.
reasons being that the component is wrapped in a HOC so we don't have direct access to the component properties.
and the connect function takes Redux into the picture, so we have a whole layer to mock.</p>
<p>Let's take this simple login component as an example throughout this article.</p>
<pre><code class="hljs tsx language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>
<span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ILoginState</span>, login } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./state&quot;</span>

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ILoginProps</span> {
  <span class="hljs-attr">loading</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">error</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">IDispatchProps</span> {
  <span class="hljs-attr">doLogin</span>: <span class="hljs-keyword">typeof</span> login
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Props</span> = <span class="hljs-title class_">ILoginProps</span> &amp; <span class="hljs-title class_">IDispatchProps</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Login</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">Props</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{ loading, error, doLogin }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [email, setEmail] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>)
  <span class="hljs-keyword">const</span> [password, setPassword] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>)
  <span class="hljs-keyword">const</span> [showError, setShowError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setShowError</span>(!!error)
  }, [error])

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-keyword">const</span> form = e.<span class="hljs-property">currentTarget</span>
    e.<span class="hljs-title function_">preventDefault</span>()
    e.<span class="hljs-title function_">stopPropagation</span>()

    <span class="hljs-keyword">if</span> (form.<span class="hljs-title function_">checkValidity</span>()) {
      <span class="hljs-title function_">doLogin</span>({ email, password })
    }
  }

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;log-in&quot;</span>&gt;</span>
      {loading &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;loader&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Loading&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;loading&quot;</span> /&gt;</span>}
      {showError &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;errorMessage&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;error&quot;</span>&gt;</span>
          {error}
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      )}
      <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleLogin}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;emailInput&quot;</span> <span class="hljs-attr">required</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setEmail(e.target.value)} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;passwordInput&quot;</span> <span class="hljs-attr">required</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setPassword(e.target.value)} /&gt;

        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">data-testid</span>=<span class="hljs-string">&quot;loginTrigger&quot;</span>&gt;</span>
          Log In
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">const</span> mapStateToProps = (<span class="hljs-attr">state</span>: <span class="hljs-title class_">ILoginState</span>): <span class="hljs-function"><span class="hljs-params">ILoginProps</span> =&gt;</span> ({
  <span class="hljs-attr">error</span>: state.<span class="hljs-property">error</span>,
  <span class="hljs-attr">loading</span>: state.<span class="hljs-property">loading</span>
})

<span class="hljs-keyword">const</span> mapDispatchToProps = {
  <span class="hljs-attr">doLogin</span>: login
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">connect</span>(mapStateToProps, mapDispatchToProps)(<span class="hljs-title class_">Login</span>)
</code></pre>
<p>And in the same location, the state,</p>
<pre><code class="hljs tsx language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">loginInfo</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">payload</span>: loginInfo,
    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;LOGIN&quot;</span>
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ILoginState</span> {
  <span class="hljs-attr">loading</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">error</span>: <span class="hljs-built_in">string</span>
}
</code></pre>
<h2 id="howtotest">How to Test</h2>
<p>As we are going to test the component, First thing we have to do is to isolate it.
A Redux based component can communicate in two ways. It can dispatch actions
and it can take store updates as props. So that's what we are going to test.
It should dispatch the right actions with the right parameters and it should render the data as intended.</p>
<h3 id="mockingthestore">Mocking the Store</h3>
<p>To isolate the component, we have to find a way to mock the store and render the component using mock data.
<a href="https://www.npmjs.com/package/redux-mock-store" target="_blank">redux-mock-store</a> is a package that allows us to mock the Redux store.
This will record all actions that are dispatched to the store.</p>
<p>Let's create a helper function that will render the component and return the store and the component itself.</p>
<pre><code class="hljs tsx language-tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderComponent</span>(<span class="hljs-params">state: ILoginState</span>) {
  <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">mockStore</span>(state)
  <span class="hljs-keyword">return</span> [
    <span class="hljs-title function_">render</span>(
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LogIn</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>
    ),
    store
  ]
}
</code></pre>
<p>Now we can use this to render the component inside the Redux provider.</p>
<h3 id="testingdispatch">Testing Dispatch</h3>
<p>Let's write our first test. This will test if the component dispatches
the login action when the inputs are valid.</p>
<pre><code class="hljs tsx language-tsx"><span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should dispatch login action if inputs are valid&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> [{ getByTestId }, store] = <span class="hljs-title function_">renderComponent</span>({
    <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>
  })

  fireEvent.<span class="hljs-title function_">change</span>(<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">&quot;emailInput&quot;</span>), {
    <span class="hljs-attr">target</span>: { <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;user_one@gmail.com&quot;</span> }
  })

  fireEvent.<span class="hljs-title function_">change</span>(<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">&quot;passwordInput&quot;</span>), {
    <span class="hljs-attr">target</span>: { <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;password&quot;</span> }
  })

  fireEvent.<span class="hljs-title function_">click</span>(<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">&quot;loginTrigger&quot;</span>))

  <span class="hljs-title function_">expect</span>(store.<span class="hljs-title function_">getActions</span>()).<span class="hljs-title function_">toContainEqual</span>(<span class="hljs-title function_">login</span>({ <span class="hljs-attr">email</span>: <span class="hljs-string">&quot;user_one@gmail.com&quot;</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">&quot;password&quot;</span> }))
})
</code></pre>
<p>Here, we submit the form using <code>fireEvent</code>. and we expect the list of actions (<code>getActions()</code>) of the store
to contain login action with the right payload. This way we can simulate user behaviors and check if
it calls correct action.</p>
<h3 id="testingprops">Testing Props</h3>
<p>Most of the time, we want to change the UI based on the input props.
To do this, we can pass any state to the <code>renderComponent</code> and write assertions based on the expected behavior.</p>
<p>For example, let's write two tests to see if we only render the loading indicator when <code>loading</code> is set to true.</p>
<pre><code class="hljs tsx language-tsx"><span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should show loading indicator when loading is set to true&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> [{ queryByTestId }] = <span class="hljs-title function_">renderComponent</span>({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span> } <span class="hljs-keyword">as</span> <span class="hljs-title class_">ILoginState</span>)
  <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">queryByTestId</span>(<span class="hljs-string">&quot;loader&quot;</span>)).<span class="hljs-title function_">toBeTruthy</span>()
})

<span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should not show loading indicator when loading is set to false&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> [{ queryByTestId }] = <span class="hljs-title function_">renderComponent</span>({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span> } <span class="hljs-keyword">as</span> <span class="hljs-title class_">ILoginState</span>)
  <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">queryByTestId</span>(<span class="hljs-string">&quot;loader&quot;</span>)).<span class="hljs-title function_">toBeFalsy</span>()
})
</code></pre>
<p>As you can see we just have to pass the current state that we want and write assertions accordingly.</p>
<h3 id="testingeffects">Testing Effects</h3>
<p>The Login component has an effect that checks the prop <code>error</code> and set <code>showError</code>.
To test this, we have to change the inputs of the component. As our store cannot publish
a new state to the components, what we can do is to re-render the component with the new state.
This will update the props of the component and will run the effect.</p>
<p>Let's write a test for this behavior.</p>
<pre><code class="hljs tsx language-tsx"><span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should show error if an error is available&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">renderComponent</span>({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> })
  <span class="hljs-keyword">const</span> [{ getByTestId }] = <span class="hljs-title function_">renderComponent</span>({
    <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">error</span>: <span class="hljs-string">&quot;something went wrong&quot;</span>
  })

  <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">&quot;errorMessage&quot;</span>)).<span class="hljs-title function_">toHaveTextContent</span>(<span class="hljs-string">&quot;something went wrong&quot;</span>)
})
</code></pre>
<p>Below is the complete test file for this component.</p>
<pre><code class="hljs tsx language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;@testing-library/jest-dom/extend-expect&quot;</span>
<span class="hljs-keyword">import</span> { cleanup, fireEvent, render } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@testing-library/react&quot;</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Provider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>
<span class="hljs-keyword">import</span> configureStore <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-mock-store&quot;</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">LogIn</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./LogIn&quot;</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ILoginState</span>, login } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./state&quot;</span>

<span class="hljs-keyword">const</span> mockStore = <span class="hljs-title function_">configureStore</span>([])
<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Login&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderComponent</span>(<span class="hljs-params">state: ILoginState</span>) {
    <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">mockStore</span>(state)
    <span class="hljs-keyword">return</span> [
      <span class="hljs-title function_">render</span>(
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">LogIn</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>
      ),
      store
    ]
  }

  <span class="hljs-title function_">afterAll</span>(cleanup)

  <span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should dispatch login action if inputs are valid&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> [{ getByTestId }, store] = <span class="hljs-title function_">renderComponent</span>({
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>
    })

    fireEvent.<span class="hljs-title function_">change</span>(<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">&quot;emailInput&quot;</span>), {
      <span class="hljs-attr">target</span>: { <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;user_one@gmail.com&quot;</span> }
    })

    fireEvent.<span class="hljs-title function_">change</span>(<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">&quot;passwordInput&quot;</span>), {
      <span class="hljs-attr">target</span>: { <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;password&quot;</span> }
    })

    fireEvent.<span class="hljs-title function_">click</span>(<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">&quot;loginTrigger&quot;</span>))

    <span class="hljs-title function_">expect</span>(store.<span class="hljs-title function_">getActions</span>()).<span class="hljs-title function_">toContainEqual</span>(<span class="hljs-title function_">login</span>({ <span class="hljs-attr">email</span>: <span class="hljs-string">&quot;user_one@gmail.com&quot;</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">&quot;password&quot;</span> }))
  })

  <span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should show loading indicator when loading is set to true&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> [{ queryByTestId }] = <span class="hljs-title function_">renderComponent</span>({
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">ILoginState</span>)
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">queryByTestId</span>(<span class="hljs-string">&quot;loader&quot;</span>)).<span class="hljs-title function_">toBeTruthy</span>()
  })

  <span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should not show loading indicator when loading is set to false&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> [{ queryByTestId }] = <span class="hljs-title function_">renderComponent</span>({
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">ILoginState</span>)
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">queryByTestId</span>(<span class="hljs-string">&quot;loader&quot;</span>)).<span class="hljs-title function_">toBeFalsy</span>()
  })

  <span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should show error if an error is available&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">renderComponent</span>({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> })
    <span class="hljs-keyword">const</span> [{ getByTestId }] = <span class="hljs-title function_">renderComponent</span>({
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">error</span>: <span class="hljs-string">&quot;something went wrong&quot;</span>
    })

    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">getByTestId</span>(<span class="hljs-string">&quot;errorMessage&quot;</span>)).<span class="hljs-title function_">toHaveTextContent</span>(<span class="hljs-string">&quot;something went wrong&quot;</span>)
  })
})
</code></pre></div></div><div class="Post_related__V0k3K"><h2>Related Posts</h2><ul class="Post_relatedPosts__co9O7"><li><h3><a href="https://rusith.me/blog/react-form-validation-using-custom-hooks">React Form Validation Using Custom Hooks<small>Mon, Jun 24, 2019</small></a></h3></li><li><h3><a href="https://rusith.me/blog/deploy-app-on-aws-ecs-with-cdk-auto-scaling-and-load-balancing">Deploying an app on AWS ECS with CDK<small>Wed, Feb 15, 2023</small></a></h3></li><li><h3><a href="https://rusith.me/blog/node-js-service-gateway">A Service Gateway Using NodeJS<small>Thu, Mar 15, 2018</small></a></h3></li></ul></div><div id="disqus_thread"></div></div><div class="sbuttons"><a href="https://www.facebook.com/sharer/sharer.php?u=https://rusith.me/blog/testing-react-redux-connected-components-using-jest" target="_blank" class="sbutton fb" title="Share on Facebook" rel="noreferrer"><img alt="Facebook icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMjAgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMjAgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNzkuMSwyODhsMTQuMi05Mi43aC04OC45di02MC4xYzAtMjUuMywxMi40LTUwLjEsNTIuMi01MC4xaDQwLjRWNi4zYzAsMC0zNi43LTYuMy03MS43LTYuMwoJYy03My4yLDAtMTIxLjEsNDQuNC0xMjEuMSwxMjQuN3Y3MC42SDIyLjlWMjg4aDgxLjR2MjI0aDEwMC4yVjI4OEgyNzkuMXoiLz4KPC9zdmc+Cg=="/></a><a href="https://twitter.com/intent/tweet?text=https://rusith.me/blog/testing-react-redux-connected-components-using-jest" target="_blank" class="sbutton twitt" title="Share on Twitter" rel="noreferrer"><img alt="Twitter icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NTkuNCwxNTEuN2MwLjMsNC41LDAuMyw5LjEsMC4zLDEzLjZjMCwxMzguNy0xMDUuNiwyOTguNi0yOTguNiwyOTguNmMtNTkuNSwwLTExNC43LTE3LjItMTYxLjEtNDcuMQoJYzguNCwxLDE2LjYsMS4zLDI1LjMsMS4zYzQ5LjEsMCw5NC4yLTE2LjYsMTMwLjMtNDQuOGMtNDYuMS0xLTg0LjgtMzEuMi05OC4xLTcyLjhjNi41LDEsMTMsMS42LDE5LjgsMS42YzkuNCwwLDE4LjgtMS4zLDI3LjYtMy42CgljLTQ4LjEtOS43LTg0LjEtNTItODQuMS0xMDN2LTEuM2MxNCw3LjgsMzAuMiwxMi43LDQ3LjQsMTMuM2MtMjguMy0xOC44LTQ2LjgtNTEtNDYuOC04Ny40YzAtMTkuNSw1LjItMzcuNCwxNC4zLTUzCglDODcuNCwxMzAuOSwxNjUsMTcyLjUsMjUyLjEsMTc3LjFjLTEuNi03LjgtMi42LTE1LjktMi42LTI0YzAtNTcuOCw0Ni44LTEwNC45LDEwNC45LTEwNC45YzMwLjIsMCw1Ny41LDEyLjcsNzYuNywzMy4xCgljMjMuNy00LjUsNDYuNS0xMy4zLDY2LjYtMjUuM2MtNy44LDI0LjQtMjQuNCw0NC44LTQ2LjEsNTcuOGMyMS4xLTIuMyw0MS42LTguMSw2MC40LTE2LjJDNDk3LjcsMTE4LjMsNDc5LjgsMTM2LjgsNDU5LjQsMTUxLjcKCUw0NTkuNCwxNTEuN3oiLz4KPC9zdmc+Cg=="/></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://rusith.me/blog/testing-react-redux-connected-components-using-jest&amp;title=&amp;summary=&amp;source=" target="_blank" class="sbutton linkedin" title="Share on Linkedin" rel="noreferrer"><img alt="LinkedIn icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDAuMyw0NDhINy40VjE0OC45aDkyLjlWNDQ4eiBNNTMuOCwxMDguMUMyNC4xLDEwOC4xLDAsODMuNSwwLDUzLjhDMCwyNC4xLDI0LjEsMCw1My44LDAKCWMyOS43LDAsNTMuOCwyNC4xLDUzLjgsNTMuOEMxMDcuNiw4My41LDgzLjUsMTA4LjEsNTMuOCwxMDguMXogTTQ0Ny45LDQ0OGgtOTIuN1YzMDIuNGMwLTM0LjctMC43LTc5LjItNDguMy03OS4yCgljLTQ4LjMsMC01NS43LDM3LjctNTUuNyw3Ni43VjQ0OGgtOTIuOFYxNDguOWg4OS4xdjQwLjhoMS4zYzEyLjQtMjMuNSw0Mi43LTQ4LjMsODcuOS00OC4zYzk0LDAsMTExLjMsNjEuOSwxMTEuMywxNDIuM1Y0NDhINDQ3Ljl6CgkiLz4KPC9zdmc+Cg=="/></a><a target="_blank" class="sbutton mainsbutton"><img alt="Share button" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNTIsMzIwYy0yNS42LDAtNDguOSwxMC02Ni4xLDI2LjRsLTk4LjMtNjEuNWM1LjktMTguOCw1LjktMzkuMSwwLTU3LjhsOTguMy02MS41CglDMzAzLjEsMTgyLDMyNi40LDE5MiwzNTIsMTkyYzUzLDAsOTYtNDMsOTYtOTZTNDA1LDAsMzUyLDBzLTk2LDQzLTk2LDk2YzAsOS44LDEuNSwxOS42LDQuNCwyOC45bC05OC4zLDYxLjUKCUMxNDQuOSwxNzAsMTIxLjYsMTYwLDk2LDE2MGMtNTMsMC05Niw0My05Niw5NnM0Myw5Niw5Niw5NmMyNS42LDAsNDguOS0xMCw2Ni4xLTI2LjRsOTguMyw2MS41Yy0yLjksOS40LTQuNCwxOS4xLTQuNCwyOC45CgljMCw1Myw0Myw5Niw5Niw5NnM5Ni00Myw5Ni05NlM0MDUsMzIwLDM1MiwzMjBMMzUyLDMyMHogTTM1Miw0OGMyNi41LDAsNDgsMjEuNSw0OCw0OHMtMjEuNSw0OC00OCw0OHMtNDgtMjEuNS00OC00OAoJUzMyNS41LDQ4LDM1Miw0OHogTTk2LDMwNGMtMjYuNSwwLTQ4LTIxLjUtNDgtNDhzMjEuNS00OCw0OC00OHM0OCwyMS41LDQ4LDQ4UzEyMi41LDMwNCw5NiwzMDR6IE0zNTIsNDY0Yy0yNi41LDAtNDgtMjEuNS00OC00OAoJczIxLjUtNDgsNDgtNDhzNDgsMjEuNSw0OCw0OFMzNzguNSw0NjQsMzUyLDQ2NHoiLz4KPC9zdmc+Cg=="/></a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"fileName":"2020-04-27-testing-redux-connect.md","fullPath":"/home/runner/work/rusith.me/rusith.me/modules/blog/posts/2020-04-27-testing-redux-connect.md","layout":"post","title":"Testing Redux Connected React Components Using Jest","tags":["programming","javascript","react","redux","testing","jest"],"comments":true,"description":"Testing React components connected to a Redux store using Jest and React Testing Library.","dateCreated":"Mon Apr 27 2020 00:00:00 GMT+0000 (Coordinated Universal Time)","dateModified":"Mon Apr 27 2020 00:00:00 GMT+0000 (Coordinated Universal Time)","datePublished":"Mon Apr 27 2020 00:00:00 GMT+0000 (Coordinated Universal Time)","dependencies":"React","about":"Testing React components connected Redux store using Jest and React Testing Library","banner":"/post-data/2020-04-27-testing-redux-connect/banner.png","path":"/blog/testing-react-redux-connected-components-using-jest","dateCreatedFormatted":"Mon, Apr 27, 2020","fullUrl":"https://rusith.me/blog/testing-react-redux-connected-components-using-jest","oldPath":null,"fileContent":"---\nlayout: post\ntitle: Testing Redux Connected React Components Using Jest\ntags: programming javascript react redux testing jest\ncomments: true\ndescription: Testing React components connected to a Redux store using Jest and React Testing Library.\ndateCreated: 2020-04-27\ndateModified: 2020-04-27\ndatePublished: 2020-04-27\ndependencies: React\nabout: Testing React components connected Redux store using Jest and React Testing Library\nbanner: /post-data/2020-04-27-testing-redux-connect/banner.png\npath: /testing-react-redux-connected-components-using-jest\n---\n\n\u003cimg alt=\"Page banner\" class=\"$$styles.banner\" src=\"$$page_banner_full_path\"\u003e\n\nWhen writing tests for a React application you might come across the case where you have to test a React\ncomponent that is connected to a Redux store using the `connect` function.\nTesting these components in isolation might look complicated.\nreasons being that the component is wrapped in a HOC so we don't have direct access to the component properties.\nand the connect function takes Redux into the picture, so we have a whole layer to mock.\n\nLet's take this simple login component as an example throughout this article.\n\n```tsx\nimport React, { useEffect } from \"react\"\nimport { useState } from \"react\"\nimport { connect } from \"react-redux\"\nimport { ILoginState, login } from \"./state\"\n\ninterface ILoginProps {\n  loading: boolean\n  error: string\n}\n\ninterface IDispatchProps {\n  doLogin: typeof login\n}\n\ntype Props = ILoginProps \u0026 IDispatchProps\n\nconst Login: React.FC\u003cProps\u003e = ({ loading, error, doLogin }) =\u003e {\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [showError, setShowError] = useState(false)\n\n  useEffect(() =\u003e {\n    setShowError(!!error)\n  }, [error])\n\n  const handleLogin = (e) =\u003e {\n    const form = e.currentTarget\n    e.preventDefault()\n    e.stopPropagation()\n\n    if (form.checkValidity()) {\n      doLogin({ email, password })\n    }\n  }\n\n  return (\n    \u003cdiv className=\"log-in\"\u003e\n      {loading \u0026\u0026 \u003cimg data-testid=\"loader\" alt=\"Loading\" className=\"loading\" /\u003e}\n      {showError \u0026\u0026 (\n        \u003cp data-testid=\"errorMessage\" className=\"error\"\u003e\n          {error}\n        \u003c/p\u003e\n      )}\n      \u003cform onSubmit={handleLogin}\u003e\n        \u003cinput data-testid=\"emailInput\" required type=\"email\" onChange={(e) =\u003e setEmail(e.target.value)} /\u003e\n        \u003cinput data-testid=\"passwordInput\" required type=\"password\" onChange={(e) =\u003e setPassword(e.target.value)} /\u003e\n\n        \u003cbutton type=\"submit\" data-testid=\"loginTrigger\"\u003e\n          Log In\n        \u003c/button\u003e\n      \u003c/form\u003e\n    \u003c/div\u003e\n  )\n}\n\nconst mapStateToProps = (state: ILoginState): ILoginProps =\u003e ({\n  error: state.error,\n  loading: state.loading\n})\n\nconst mapDispatchToProps = {\n  doLogin: login\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n```\n\nAnd in the same location, the state,\n\n```tsx\nexport function login(loginInfo) {\n  return {\n    payload: loginInfo,\n    type: \"LOGIN\"\n  }\n}\n\nexport interface ILoginState {\n  loading: boolean\n  error: string\n}\n```\n\n## How to Test\n\nAs we are going to test the component, First thing we have to do is to isolate it.\nA Redux based component can communicate in two ways. It can dispatch actions\nand it can take store updates as props. So that's what we are going to test.\nIt should dispatch the right actions with the right parameters and it should render the data as intended.\n\n### Mocking the Store\n\nTo isolate the component, we have to find a way to mock the store and render the component using mock data.\n\u003ca href=\"https://www.npmjs.com/package/redux-mock-store\" target=\"_blank\"\u003eredux-mock-store\u003c/a\u003e is a package that allows us to mock the Redux store.\nThis will record all actions that are dispatched to the store.\n\nLet's create a helper function that will render the component and return the store and the component itself.\n\n```tsx\nfunction renderComponent(state: ILoginState) {\n  const store = mockStore(state)\n  return [\n    render(\n      \u003cProvider store={store}\u003e\n        \u003cLogIn /\u003e\n      \u003c/Provider\u003e\n    ),\n    store\n  ]\n}\n```\n\nNow we can use this to render the component inside the Redux provider.\n\n### Testing Dispatch\n\nLet's write our first test. This will test if the component dispatches\nthe login action when the inputs are valid.\n\n```tsx\nit(\"should dispatch login action if inputs are valid\", () =\u003e {\n  const [{ getByTestId }, store] = renderComponent({\n    loading: false,\n    error: null\n  })\n\n  fireEvent.change(getByTestId(\"emailInput\"), {\n    target: { value: \"user_one@gmail.com\" }\n  })\n\n  fireEvent.change(getByTestId(\"passwordInput\"), {\n    target: { value: \"password\" }\n  })\n\n  fireEvent.click(getByTestId(\"loginTrigger\"))\n\n  expect(store.getActions()).toContainEqual(login({ email: \"user_one@gmail.com\", password: \"password\" }))\n})\n```\n\nHere, we submit the form using `fireEvent`. and we expect the list of actions (`getActions()`) of the store\nto contain login action with the right payload. This way we can simulate user behaviors and check if\nit calls correct action.\n\n### Testing Props\n\nMost of the time, we want to change the UI based on the input props.\nTo do this, we can pass any state to the `renderComponent` and write assertions based on the expected behavior.\n\nFor example, let's write two tests to see if we only render the loading indicator when `loading` is set to true.\n\n```tsx\nit(\"should show loading indicator when loading is set to true\", () =\u003e {\n  const [{ queryByTestId }] = renderComponent({ loading: true } as ILoginState)\n  expect(queryByTestId(\"loader\")).toBeTruthy()\n})\n\nit(\"should not show loading indicator when loading is set to false\", () =\u003e {\n  const [{ queryByTestId }] = renderComponent({ loading: false } as ILoginState)\n  expect(queryByTestId(\"loader\")).toBeFalsy()\n})\n```\n\nAs you can see we just have to pass the current state that we want and write assertions accordingly.\n\n### Testing Effects\n\nThe Login component has an effect that checks the prop `error` and set `showError`.\nTo test this, we have to change the inputs of the component. As our store cannot publish\na new state to the components, what we can do is to re-render the component with the new state.\nThis will update the props of the component and will run the effect.\n\nLet's write a test for this behavior.\n\n```tsx\nit(\"should show error if an error is available\", () =\u003e {\n  renderComponent({ loading: false, error: null })\n  const [{ getByTestId }] = renderComponent({\n    loading: false,\n    error: \"something went wrong\"\n  })\n\n  expect(getByTestId(\"errorMessage\")).toHaveTextContent(\"something went wrong\")\n})\n```\n\nBelow is the complete test file for this component.\n\n```tsx\nimport \"@testing-library/jest-dom/extend-expect\"\nimport { cleanup, fireEvent, render } from \"@testing-library/react\"\nimport React from \"react\"\nimport { Provider } from \"react-redux\"\nimport configureStore from \"redux-mock-store\"\nimport LogIn from \"./LogIn\"\nimport { ILoginState, login } from \"./state\"\n\nconst mockStore = configureStore([])\ndescribe(\"Login\", () =\u003e {\n  function renderComponent(state: ILoginState) {\n    const store = mockStore(state)\n    return [\n      render(\n        \u003cProvider store={store}\u003e\n          \u003cLogIn /\u003e\n        \u003c/Provider\u003e\n      ),\n      store\n    ]\n  }\n\n  afterAll(cleanup)\n\n  it(\"should dispatch login action if inputs are valid\", () =\u003e {\n    const [{ getByTestId }, store] = renderComponent({\n      loading: false,\n      error: null\n    })\n\n    fireEvent.change(getByTestId(\"emailInput\"), {\n      target: { value: \"user_one@gmail.com\" }\n    })\n\n    fireEvent.change(getByTestId(\"passwordInput\"), {\n      target: { value: \"password\" }\n    })\n\n    fireEvent.click(getByTestId(\"loginTrigger\"))\n\n    expect(store.getActions()).toContainEqual(login({ email: \"user_one@gmail.com\", password: \"password\" }))\n  })\n\n  it(\"should show loading indicator when loading is set to true\", () =\u003e {\n    const [{ queryByTestId }] = renderComponent({\n      loading: true\n    } as ILoginState)\n    expect(queryByTestId(\"loader\")).toBeTruthy()\n  })\n\n  it(\"should not show loading indicator when loading is set to false\", () =\u003e {\n    const [{ queryByTestId }] = renderComponent({\n      loading: false\n    } as ILoginState)\n    expect(queryByTestId(\"loader\")).toBeFalsy()\n  })\n\n  it(\"should show error if an error is available\", () =\u003e {\n    renderComponent({ loading: false, error: null })\n    const [{ getByTestId }] = renderComponent({\n      loading: false,\n      error: \"something went wrong\"\n    })\n\n    expect(getByTestId(\"errorMessage\")).toHaveTextContent(\"something went wrong\")\n  })\n})\n```\n","parsedContent":"\u003cp\u003e\u003cimg alt=\"Page banner\" class=\"Post_banner__soX4H\" src=\"https://rusith.me/post-data/2020-04-27-testing-redux-connect/banner.png\"\u003e\u003c/p\u003e\n\u003cp\u003eWhen writing tests for a React application you might come across the case where you have to test a React\ncomponent that is connected to a Redux store using the \u003ccode\u003econnect\u003c/code\u003e function.\nTesting these components in isolation might look complicated.\nreasons being that the component is wrapped in a HOC so we don't have direct access to the component properties.\nand the connect function takes Redux into the picture, so we have a whole layer to mock.\u003c/p\u003e\n\u003cp\u003eLet's take this simple login component as an example throughout this article.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs tsx language-tsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { useEffect } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { connect } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react-redux\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eILoginState\u003c/span\u003e, login } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./state\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eILoginProps\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eboolean\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIDispatchProps\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003edoLogin\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003etypeof\u003c/span\u003e login\n}\n\n\u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProps\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eILoginProps\u003c/span\u003e \u0026amp; \u003cspan class=\"hljs-title class_\"\u003eIDispatchProps\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLogin\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eFC\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eProps\u003c/span\u003e\u0026gt; = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{ loading, error, doLogin }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [email, setEmail] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [password, setPassword] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [showError, setShowError] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e)\n\n  \u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_\"\u003esetShowError\u003c/span\u003e(!!error)\n  }, [error])\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandleLogin\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003ee\u003c/span\u003e) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e form = e.\u003cspan class=\"hljs-property\"\u003ecurrentTarget\u003c/span\u003e\n    e.\u003cspan class=\"hljs-title function_\"\u003epreventDefault\u003c/span\u003e()\n    e.\u003cspan class=\"hljs-title function_\"\u003estopPropagation\u003c/span\u003e()\n\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (form.\u003cspan class=\"hljs-title function_\"\u003echeckValidity\u003c/span\u003e()) {\n      \u003cspan class=\"hljs-title function_\"\u003edoLogin\u003c/span\u003e({ email, password })\n    }\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;log-in\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      {loading \u0026amp;\u0026amp; \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eimg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003edata-testid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;loader\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ealt\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;Loading\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;loading\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e}\n      {showError \u0026amp;\u0026amp; (\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003edata-testid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;errorMessage\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;error\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          {error}\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      )}\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonSubmit\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{handleLogin}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003edata-testid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;emailInput\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;email\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e setEmail(e.target.value)} /\u0026gt;\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003edata-testid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;passwordInput\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e setPassword(e.target.value)} /\u0026gt;\n\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;submit\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003edata-testid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;loginTrigger\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          Log In\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  )\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e mapStateToProps = (\u003cspan class=\"hljs-attr\"\u003estate\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eILoginState\u003c/span\u003e): \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eILoginProps\u003c/span\u003e =\u0026gt;\u003c/span\u003e ({\n  \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: state.\u003cspan class=\"hljs-property\"\u003eerror\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: state.\u003cspan class=\"hljs-property\"\u003eloading\u003c/span\u003e\n})\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e mapDispatchToProps = {\n  \u003cspan class=\"hljs-attr\"\u003edoLogin\u003c/span\u003e: login\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003econnect\u003c/span\u003e(mapStateToProps, mapDispatchToProps)(\u003cspan class=\"hljs-title class_\"\u003eLogin\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd in the same location, the state,\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs tsx language-tsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elogin\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eloginInfo\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: loginInfo,\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;LOGIN\u0026quot;\u003c/span\u003e\n  }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eILoginState\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eboolean\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"howtotest\"\u003eHow to Test\u003c/h2\u003e\n\u003cp\u003eAs we are going to test the component, First thing we have to do is to isolate it.\nA Redux based component can communicate in two ways. It can dispatch actions\nand it can take store updates as props. So that's what we are going to test.\nIt should dispatch the right actions with the right parameters and it should render the data as intended.\u003c/p\u003e\n\u003ch3 id=\"mockingthestore\"\u003eMocking the Store\u003c/h3\u003e\n\u003cp\u003eTo isolate the component, we have to find a way to mock the store and render the component using mock data.\n\u003ca href=\"https://www.npmjs.com/package/redux-mock-store\" target=\"_blank\"\u003eredux-mock-store\u003c/a\u003e is a package that allows us to mock the Redux store.\nThis will record all actions that are dispatched to the store.\u003c/p\u003e\n\u003cp\u003eLet's create a helper function that will render the component and return the store and the component itself.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs tsx language-tsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003estate: ILoginState\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e store = \u003cspan class=\"hljs-title function_\"\u003emockStore\u003c/span\u003e(state)\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [\n    \u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\n      \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estore\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{store}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eLogIn\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n    ),\n    store\n  ]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we can use this to render the component inside the Redux provider.\u003c/p\u003e\n\u003ch3 id=\"testingdispatch\"\u003eTesting Dispatch\u003c/h3\u003e\n\u003cp\u003eLet's write our first test. This will test if the component dispatches\nthe login action when the inputs are valid.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs tsx language-tsx\"\u003e\u003cspan class=\"hljs-title function_\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;should dispatch login action if inputs are valid\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [{ getByTestId }, store] = \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e\n  })\n\n  fireEvent.\u003cspan class=\"hljs-title function_\"\u003echange\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;emailInput\u0026quot;\u003c/span\u003e), {\n    \u003cspan class=\"hljs-attr\"\u003etarget\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;user_one@gmail.com\u0026quot;\u003c/span\u003e }\n  })\n\n  fireEvent.\u003cspan class=\"hljs-title function_\"\u003echange\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;passwordInput\u0026quot;\u003c/span\u003e), {\n    \u003cspan class=\"hljs-attr\"\u003etarget\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e }\n  })\n\n  fireEvent.\u003cspan class=\"hljs-title function_\"\u003eclick\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;loginTrigger\u0026quot;\u003c/span\u003e))\n\n  \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(store.\u003cspan class=\"hljs-title function_\"\u003egetActions\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003etoContainEqual\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003elogin\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;user_one@gmail.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e }))\n})\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere, we submit the form using \u003ccode\u003efireEvent\u003c/code\u003e. and we expect the list of actions (\u003ccode\u003egetActions()\u003c/code\u003e) of the store\nto contain login action with the right payload. This way we can simulate user behaviors and check if\nit calls correct action.\u003c/p\u003e\n\u003ch3 id=\"testingprops\"\u003eTesting Props\u003c/h3\u003e\n\u003cp\u003eMost of the time, we want to change the UI based on the input props.\nTo do this, we can pass any state to the \u003ccode\u003erenderComponent\u003c/code\u003e and write assertions based on the expected behavior.\u003c/p\u003e\n\u003cp\u003eFor example, let's write two tests to see if we only render the loading indicator when \u003ccode\u003eloading\u003c/code\u003e is set to true.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs tsx language-tsx\"\u003e\u003cspan class=\"hljs-title function_\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;should show loading indicator when loading is set to true\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [{ queryByTestId }] = \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eILoginState\u003c/span\u003e)\n  \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003equeryByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;loader\u0026quot;\u003c/span\u003e)).\u003cspan class=\"hljs-title function_\"\u003etoBeTruthy\u003c/span\u003e()\n})\n\n\u003cspan class=\"hljs-title function_\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;should not show loading indicator when loading is set to false\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [{ queryByTestId }] = \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eILoginState\u003c/span\u003e)\n  \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003equeryByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;loader\u0026quot;\u003c/span\u003e)).\u003cspan class=\"hljs-title function_\"\u003etoBeFalsy\u003c/span\u003e()\n})\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see we just have to pass the current state that we want and write assertions accordingly.\u003c/p\u003e\n\u003ch3 id=\"testingeffects\"\u003eTesting Effects\u003c/h3\u003e\n\u003cp\u003eThe Login component has an effect that checks the prop \u003ccode\u003eerror\u003c/code\u003e and set \u003ccode\u003eshowError\u003c/code\u003e.\nTo test this, we have to change the inputs of the component. As our store cannot publish\na new state to the components, what we can do is to re-render the component with the new state.\nThis will update the props of the component and will run the effect.\u003c/p\u003e\n\u003cp\u003eLet's write a test for this behavior.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs tsx language-tsx\"\u003e\u003cspan class=\"hljs-title function_\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;should show error if an error is available\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e })\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [{ getByTestId }] = \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;something went wrong\u0026quot;\u003c/span\u003e\n  })\n\n  \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;errorMessage\u0026quot;\u003c/span\u003e)).\u003cspan class=\"hljs-title function_\"\u003etoHaveTextContent\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;something went wrong\u0026quot;\u003c/span\u003e)\n})\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBelow is the complete test file for this component.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs tsx language-tsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@testing-library/jest-dom/extend-expect\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { cleanup, fireEvent, render } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@testing-library/react\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eProvider\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react-redux\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e configureStore \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;redux-mock-store\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLogIn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./LogIn\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eILoginState\u003c/span\u003e, login } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./state\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e mockStore = \u003cspan class=\"hljs-title function_\"\u003econfigureStore\u003c/span\u003e([])\n\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Login\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003estate: ILoginState\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e store = \u003cspan class=\"hljs-title function_\"\u003emockStore\u003c/span\u003e(state)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [\n      \u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\n        \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estore\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{store}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eLogIn\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n      ),\n      store\n    ]\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003eafterAll\u003c/span\u003e(cleanup)\n\n  \u003cspan class=\"hljs-title function_\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;should dispatch login action if inputs are valid\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [{ getByTestId }, store] = \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e\n    })\n\n    fireEvent.\u003cspan class=\"hljs-title function_\"\u003echange\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;emailInput\u0026quot;\u003c/span\u003e), {\n      \u003cspan class=\"hljs-attr\"\u003etarget\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;user_one@gmail.com\u0026quot;\u003c/span\u003e }\n    })\n\n    fireEvent.\u003cspan class=\"hljs-title function_\"\u003echange\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;passwordInput\u0026quot;\u003c/span\u003e), {\n      \u003cspan class=\"hljs-attr\"\u003etarget\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e }\n    })\n\n    fireEvent.\u003cspan class=\"hljs-title function_\"\u003eclick\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;loginTrigger\u0026quot;\u003c/span\u003e))\n\n    \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(store.\u003cspan class=\"hljs-title function_\"\u003egetActions\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003etoContainEqual\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003elogin\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;user_one@gmail.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e }))\n  })\n\n  \u003cspan class=\"hljs-title function_\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;should show loading indicator when loading is set to true\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [{ queryByTestId }] = \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n    } \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eILoginState\u003c/span\u003e)\n    \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003equeryByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;loader\u0026quot;\u003c/span\u003e)).\u003cspan class=\"hljs-title function_\"\u003etoBeTruthy\u003c/span\u003e()\n  })\n\n  \u003cspan class=\"hljs-title function_\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;should not show loading indicator when loading is set to false\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [{ queryByTestId }] = \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n    } \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eILoginState\u003c/span\u003e)\n    \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003equeryByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;loader\u0026quot;\u003c/span\u003e)).\u003cspan class=\"hljs-title function_\"\u003etoBeFalsy\u003c/span\u003e()\n  })\n\n  \u003cspan class=\"hljs-title function_\"\u003eit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;should show error if an error is available\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e })\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [{ getByTestId }] = \u003cspan class=\"hljs-title function_\"\u003erenderComponent\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;something went wrong\u0026quot;\u003c/span\u003e\n    })\n\n    \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003egetByTestId\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;errorMessage\u0026quot;\u003c/span\u003e)).\u003cspan class=\"hljs-title function_\"\u003etoHaveTextContent\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;something went wrong\u0026quot;\u003c/span\u003e)\n  })\n})\n\u003c/code\u003e\u003c/pre\u003e"},"page":"Post","topTags":["programming","aws","web","machineLearning","react","javascript","dataScience","typescript","r","csharp"],"relatedPosts":[{"title":"React Form Validation Using Custom Hooks","tags":["web","programming","react","javascript"],"fullUrl":"https://rusith.me/blog/react-form-validation-using-custom-hooks","date":"Mon, Jun 24, 2019","description":"Form validation in react is bit tricky. This is an attempt to make it bit easy by using react hooks. here we write few custom hooks to create a re-usable validation logic that can be used in any form.","banner":null},{"title":"Deploying an app on AWS ECS with CDK","tags":["programming","nextJS","react","aws","ecs","typescript","cdk","devops"],"fullUrl":"https://rusith.me/blog/deploy-app-on-aws-ecs-with-cdk-auto-scaling-and-load-balancing","date":"Wed, Feb 15, 2023","description":"How to deploy an application on AWS ECS with load-balancing and auto-scaling using CDK by writing the CDK code in TypeScript","banner":"/post-data/2023-02-15-deploying-react-app-on-ecs/banner.png"},{"title":"A Service Gateway Using NodeJS","tags":["programming","javascript","micro-service","web"],"fullUrl":"https://rusith.me/blog/node-js-service-gateway","date":"Thu, Mar 15, 2018","description":"In this post I am writing a simple and minimal service gateway using JavaScript and NodeJS which can handle authentication , authorization.","banner":null}]},"__N_SSG":true},"page":"/[[...path]]","query":{"path":["blog","testing-react-redux-connected-components-using-jest"]},"buildId":"PaoTT2YDvwYY_jbobaNoC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>