<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link href="https://gmpg.org/xfn/11" rel="profile"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5GDZWWBRFX"></script><script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-5GDZWWBRFX');
                </script><link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://rusith.me/icons/favicon-144-image.png"/><link rel="shortcut icon" href="https://rusith.me/favicon.ico"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/><meta property="twitter:creator" content="@rusith_"/><meta name="robots" content="index,follow"/><title>Deploying a Website on S3 With SSL, Continuous Integration</title><meta name="description" content="In this post, I am creating a website and host it on S3 and setup a continuous integration pipeline setup using Gitlab"/><link rel="canonical" href="https://rusith.me/blog/building-a-website-on-s3"/><meta property="og:title" content="Deploying a Website on S3 With SSL, Continuous Integration"/><meta property="og:url" content="https://rusith.me/blog/building-a-website-on-s3"/><meta property="og:description" content="In this post, I am creating a website and host it on S3 and setup a continuous integration pipeline setup using Gitlab"/><meta property="og:site_name" content="Rusith&#x27;s blog"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="blog"/><meta property="twitter:description" content="Demonstrates how to create and publish a website on S3 and create a CI setup for automatic deployments"/><meta property="og:image" content="/post-data/2019-08-14-building-a-website-on-s3/banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Deploying a Website on S3 With SSL, Continuous Integration"/><meta name="twitter:image" content="/post-data/2019-08-14-building-a-website-on-s3/banner.png"/><meta name="twitter:site" content="@rusith_"/><script type="application/ld+json">{"@type":"BlogPosting","@context":"https://schema.org","headline":"Deploying a Website on S3 With SSL, Continuous Integration","author":{"@type":"Person","name":"Shanaka Rusith","url":"https://rusith.me/about"},"keywords":"aws,programming,web","url":"https://rusith.me/blog/building-a-website-on-s3","description":"In this post, I am creating a website and host it on S3 and setup a continuous integration pipeline setup using Gitlab","copyrightHolder":{"@type":"Person","name":"Shanaka Rusith","url":"https://rusith.me/about"},"copyrightYear":"2021","mainEntityOfPage":{"@type":"WebPage","@id":"https://rusith.me"},"publisher":{"@type":"Organization","name":"Shanaka Rusith","url":"https://rusith.me/about","logo":{"@type":"ImageObject","url":"https://rusith.me/images/rusith/picture.jpg"}},"image":"/post-data/2019-08-14-building-a-website-on-s3/banner.png","about":"Demonstrates how to create and publish a website on S3 and create a CI setup for automatic deployments","datePublished":"Mon Aug 05 2019 00:00:00 GMT+0000 (Coordinated Universal Time)","dateModified":"Mon Aug 05 2019 00:00:00 GMT+0000 (Coordinated Universal Time)"}</script><meta name="next-head-count" content="27"/><link rel="preload" href="/_next/static/css/7220332d6168fb06.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7220332d6168fb06.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0662676664ee362f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0662676664ee362f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-05c0aa1e498fcb8c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f89480c30d9a5d02.js" defer=""></script><script src="/_next/static/chunks/947-277c090e7d6803d0.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...path%5D%5D-d5cf2aa81a49e144.js" defer=""></script><script src="/_next/static/PaoTT2YDvwYY_jbobaNoC/_buildManifest.js" defer=""></script><script src="/_next/static/PaoTT2YDvwYY_jbobaNoC/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Sidebar_r__IEuUi"><div class="Sidebar_sticky__RE23V"><div class="Sidebar_about__s_kM6"><h2><a href="/">Rusith.me</a></h2><div class="Sidebar_socialButtons__XcH6p"><a href="https://www.linkedin.com/in/shanaka-rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="LinkedIn icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MTYsMzJIMzEuOUMxNC4zLDMyLDAsNDYuNSwwLDY0LjN2MzgzLjRDMCw0NjUuNSwxNC4zLDQ4MCwzMS45LDQ4MEg0MTZjMTcuNiwwLDMyLTE0LjUsMzItMzIuM1Y2NC4zCglDNDQ4LDQ2LjUsNDMzLjYsMzIsNDE2LDMyeiBNMTM1LjQsNDE2SDY5VjIwMi4yaDY2LjVWNDE2SDEzNS40eiBNMTAyLjIsMTczYy0yMS4zLDAtMzguNS0xNy4zLTM4LjUtMzguNVM4MC45LDk2LDEwMi4yLDk2CgljMjEuMiwwLDM4LjUsMTcuMywzOC41LDM4LjVDMTQwLjcsMTU1LjgsMTIzLjUsMTczLDEwMi4yLDE3M3ogTTM4NC4zLDQxNmgtNjYuNFYzMTJjMC0yNC44LTAuNS01Ni43LTM0LjUtNTYuNwoJYy0zNC42LDAtMzkuOSwyNy0zOS45LDU0LjlWNDE2aC02Ni40VjIwMi4yaDYzLjd2MjkuMmgwLjljOC45LTE2LjgsMzAuNi0zNC41LDYyLjktMzQuNWM2Ny4yLDAsNzkuNyw0NC4zLDc5LjcsMTAxLjlWNDE2eiIvPgo8L3N2Zz4K"/></a><a href="https://github.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Github icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMzUyYzI2LjUsMCw0OC0yMS41LDQ4LTQ4VjgwCglDNDQ4LDUzLjUsNDI2LjUsMzIsNDAwLDMyeiBNMjc3LjMsNDE1LjdjLTguNCwxLjUtMTEuNS0zLjctMTEuNS04YzAtNS40LDAuMi0zMywwLjItNTUuM2MwLTE1LjYtNS4yLTI1LjUtMTEuMy0zMC43CgljMzctNC4xLDc2LTkuMiw3Ni03My4xYzAtMTguMi02LjUtMjcuMy0xNy4xLTM5YzEuNy00LjMsNy40LTIyLTEuNy00NWMtMTMuOS00LjMtNDUuNywxNy45LTQ1LjcsMTcuOWMtMTMuMi0zLjctMjcuNS01LjYtNDEuNi01LjYKCXMtMjguNCwxLjktNDEuNiw1LjZjMCwwLTMxLjgtMjIuMi00NS43LTE3LjljLTkuMSwyMi45LTMuNSw0MC42LTEuNyw0NWMtMTAuNiwxMS43LTE1LjYsMjAuOC0xNS42LDM5YzAsNjMuNiwzNy4zLDY5LDc0LjMsNzMuMQoJYy00LjgsNC4zLTkuMSwxMS43LTEwLjYsMjIuM2MtOS41LDQuMy0zMy44LDExLjctNDguMy0xMy45Yy05LjEtMTUuOC0yNS41LTE3LjEtMjUuNS0xNy4xYy0xNi4yLTAuMi0xLjEsMTAuMi0xLjEsMTAuMgoJYzEwLjgsNSwxOC40LDI0LjIsMTguNCwyNC4yYzkuNywyOS43LDU2LjEsMTkuNyw1Ni4xLDE5LjdjMCwxMy45LDAuMiwzNi41LDAuMiw0MC42YzAsNC4zLTMsOS41LTExLjUsOAoJYy02Ni0yMi4xLTExMi4yLTg0LjktMTEyLjItMTU4LjNjMC05MS44LDcwLjItMTYxLjUsMTYyLTE2MS41UzM4OCwxNjUuNiwzODgsMjU3LjRDMzg4LjEsMzMwLjgsMzQzLjMsMzkzLjcsMjc3LjMsNDE1Ljd6CgkgTTE3OS4yLDM1NC42Yy0xLjksMC40LTMuNy0wLjQtMy45LTEuN2MtMC4yLTEuNSwxLjEtMi44LDMtMy4yYzEuOS0wLjIsMy43LDAuNiwzLjksMS45QzE4Mi41LDM1Mi45LDE4MS4yLDM1NC4yLDE3OS4yLDM1NC42CglMMTc5LjIsMzU0LjZ6IE0xNjkuNywzNTMuN2MwLDEuMy0xLjUsMi40LTMuNSwyLjRjLTIuMiwwLjItMy43LTAuOS0zLjctMi40YzAtMS4zLDEuNS0yLjQsMy41LTIuNAoJQzE2Ny45LDM1MS4xLDE2OS43LDM1Mi4yLDE2OS43LDM1My43eiBNMTU2LDM1Mi42Yy0wLjQsMS4zLTIuNCwxLjktNC4xLDEuM2MtMS45LTAuNC0zLjItMS45LTIuOC0zLjJjMC40LTEuMywyLjQtMS45LDQuMS0xLjUKCUMxNTUuMiwzNDkuOCwxNTYuNSwzNTEuMywxNTYsMzUyLjZMMTU2LDM1Mi42eiBNMTQzLjcsMzQ3LjJjLTAuOSwxLjEtMi44LDAuOS00LjMtMC42Yy0xLjUtMS4zLTEuOS0zLjItMC45LTQuMQoJYzAuOS0xLjEsMi44LTAuOSw0LjMsMC42QzE0NC4xLDM0NC40LDE0NC42LDM0Ni40LDE0My43LDM0Ny4yeiBNMTM0LjYsMzM4LjFjLTAuOSwwLjYtMi42LDAtMy43LTEuNXMtMS4xLTMuMiwwLTMuOQoJYzEuMS0wLjksMi44LTAuMiwzLjcsMS4zQzEzNS43LDMzNS41LDEzNS43LDMzNy4zLDEzNC42LDMzOC4xeiBNMTI4LjEsMzI4LjRjLTAuOSwwLjktMi40LDAuNC0zLjUtMC42Yy0xLjEtMS4zLTEuMy0yLjgtMC40LTMuNQoJYzAuOS0wLjksMi40LTAuNCwzLjUsMC42QzEyOC44LDMyNi4yLDEyOSwzMjcuNywxMjguMSwzMjguNHogTTEyMS40LDMyMWMtMC40LDAuOS0xLjcsMS4xLTIuOCwwLjRjLTEuMy0wLjYtMS45LTEuNy0xLjUtMi42CgljMC40LTAuNiwxLjUtMC45LDIuOC0wLjRDMTIxLjIsMzE5LjEsMTIxLjgsMzIwLjIsMTIxLjQsMzIxeiIvPgo8L3N2Zz4K"/></a><a href="https://gitlab.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Gitlab icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUuMiwyNC45Yy0zLjEtOC45LTE1LjctOC45LTE4LjksMEwyOS44LDE5OS43aDEzMkMxNjEuNywxOTkuNywxMDUuMiwyNC45LDEwNS4yLDI0Ljl6IE0wLjksMjg3LjcKCWMtMi42LDgsMC4zLDE2LjksNy4xLDIybDI0Ny45LDE4NGwtMjI2LjItMjk0TDAuOSwyODcuN3ogTTE2MS43LDE5OS43bDk0LjMsMjk0bDk0LjMtMjk0SDE2MS43eiBNNTExLjEsMjg3LjdsLTI4LjgtODhMMjU2LDQ5My43CglsMjQ3LjktMTg0QzUxMC44LDMwNC42LDUxMy42LDI5NS43LDUxMS4xLDI4Ny43eiBNNDI1LjcsMjQuOWMtMy4xLTguOS0xNS43LTguOS0xOC45LDBsLTU2LjYsMTc0LjhoMTMyTDQyNS43LDI0Ljl6Ii8+Cjwvc3ZnPgo="/></a><a href="http://goodreads.com/rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="GoodReads icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yOTkuOSwxOTEuMmM1LjEsMzcuMy00LjcsNzktMzUuOSwxMDAuN2MtMjIuMywxNS41LTUyLjgsMTQuMS03MC44LDUuN2MtMzcuMS0xNy4zLTQ5LjUtNTguNi00Ni44LTk3LjIKCWM0LjMtNjAuOSw0MC45LTg3LjksNzUuMy04Ny41QzI2OC42LDExMi43LDI5My41LDE0NC43LDI5OS45LDE5MS4yTDI5OS45LDE5MS4yeiBNNDQ4LDg4djMzNmMwLDMwLjktMjUuMSw1Ni01Niw1Nkg1NgoJYy0zMC45LDAtNTYtMjUuMS01Ni01NlY4OGMwLTMwLjksMjUuMS01Niw1Ni01NmgzMzZDNDIyLjksMzIsNDQ4LDU3LjEsNDQ4LDg4eiBNMzMwLDMxMy4yYzAsMC0wLjEtMzQtMC4xLTIxNy4zaC0yOXY0MC4zCgljLTAuOCwwLjMtMS4yLTAuNS0xLjYtMS4yYy05LjYtMjAuNy0zNS45LTQ2LjMtNzYtNDZjLTUxLjksMC40LTg3LjIsMzEuMi0xMDAuNiw3Ny44Yy00LjMsMTQuOS01LjgsMzAuMS01LjUsNDUuNgoJYzEuNyw3Ny45LDQ1LjEsMTE3LjgsMTEyLjQsMTE1LjJjMjguOS0xLjEsNTQuNS0xNyw2OS00NS4yYzAuNS0xLDEuMS0xLjksMS43LTIuOWMwLjIsMC4xLDAuNCwwLjEsMC42LDAuMgoJYzAuMywzLjgsMC4yLDMwLjcsMC4xLDM0LjVjLTAuMiwxNC44LTIsMjkuNS03LjIsNDMuNWMtNy44LDIxLTIyLjMsMzQuNy00NC41LDM5LjVjLTE3LjgsMy45LTM1LjYsMy44LTUzLjItMS4yCgljLTIxLjUtNi4xLTM2LjUtMTktNDEuMS00MS44Yy0wLjMtMS42LTEuMy0xLjMtMi4zLTEuM2gtMjYuOGMwLjgsMTAuNiwzLjIsMjAuMyw4LjUsMjkuMmMyNC4yLDQwLjUsODIuNyw0OC41LDEyOC4yLDM3LjQKCUMzMTIuNSw0MDcuMiwzMjkuOSwzNjQuNiwzMzAsMzEzLjJMMzMwLDMxMy4yeiIvPgo8L3N2Zz4K"/></a><a href="https://twitter.com/rusith_" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Twitter icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMzUyYzI2LjUsMCw0OC0yMS41LDQ4LTQ4VjgwCglDNDQ4LDUzLjUsNDI2LjUsMzIsNDAwLDMyeiBNMzUxLjEsMTkwLjhjMC4yLDIuOCwwLjIsNS43LDAuMiw4LjVjMCw4Ni43LTY2LDE4Ni42LTE4Ni42LDE4Ni42Yy0zNy4yLDAtNzEuNy0xMC44LTEwMC43LTI5LjQKCWM1LjMsMC42LDEwLjQsMC44LDE1LjgsMC44YzMwLjcsMCw1OC45LTEwLjQsODEuNC0yOGMtMjguOC0wLjYtNTMtMTkuNS02MS4zLTQ1LjVjMTAuMSwxLjUsMTkuMiwxLjUsMjkuNi0xLjIKCWMtMzAtNi4xLTUyLjUtMzIuNS01Mi41LTY0LjR2LTAuOGM4LjcsNC45LDE4LjksNy45LDI5LjYsOC4zYy0xOC4zLTEyLjItMjkuMi0zMi43LTI5LjItNTQuNmMwLTEyLjIsMy4yLTIzLjQsOC45LTMzLjEKCWMzMi4zLDM5LjgsODAuOCw2NS44LDEzNS4yLDY4LjZjLTkuMy00NC41LDI0LTgwLjYsNjQtODAuNmMxOC45LDAsMzUuOSw3LjksNDcuOSwyMC43YzE0LjgtMi44LDI5LTguMyw0MS42LTE1LjgKCWMtNC45LDE1LjItMTUuMiwyOC0yOC44LDM2LjFjMTMuMi0xLjQsMjYtNS4xLDM3LjgtMTAuMkMzNzUuMSwxNjkuOSwzNjMuOSwxODEuNSwzNTEuMSwxOTAuOHoiLz4KPC9zdmc+Cg=="/></a><a href="https://www.facebook.com/shanaka.rusith" class="Sidebar_socialButton___U_F2" target="_blank" rel="noreferrer"><img alt="Facebook icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMzJINDhDMjEuNSwzMiwwLDUzLjUsMCw4MHYzNTJjMCwyNi41LDIxLjUsNDgsNDgsNDhoMTM3LjNWMzI3LjdoLTYzVjI1Nmg2M3YtNTQuNgoJYzAtNjIuMiwzNy05Ni41LDkzLjctOTYuNWMyNy4xLDAsNTUuNSw0LjgsNTUuNSw0Ljh2NjFoLTMxLjNjLTMwLjgsMC00MC40LDE5LjEtNDAuNCwzOC43VjI1Nmg2OC44bC0xMSw3MS43aC01Ny44VjQ4MEg0MDAKCWMyNi41LDAsNDgtMjEuNSw0OC00OFY4MEM0NDgsNTMuNSw0MjYuNSwzMiw0MDAsMzJ6Ii8+Cjwvc3ZnPgo="/></a></div><p>A blog from a tech and art enthusiast</p></div><div class="Sidebar_nav__CTYKS"><div class="Sidebar_tagWrapper__w460D"><a href="/tag/programming/"><span class="Sidebar_tag__mAo8y">#<!-- -->programming</span></a><a href="/tag/aws/"><span class="Sidebar_tag__mAo8y">#<!-- -->aws</span></a><a href="/tag/web/"><span class="Sidebar_tag__mAo8y">#<!-- -->web</span></a><a href="/tag/machineLearning/"><span class="Sidebar_tag__mAo8y">#<!-- -->machineLearning</span></a><a href="/tag/react/"><span class="Sidebar_tag__mAo8y">#<!-- -->react</span></a><a href="/tag/javascript/"><span class="Sidebar_tag__mAo8y">#<!-- -->javascript</span></a><a href="/tag/dataScience/"><span class="Sidebar_tag__mAo8y">#<!-- -->dataScience</span></a><a href="/tag/typescript/"><span class="Sidebar_tag__mAo8y">#<!-- -->typescript</span></a><a href="/tag/r/"><span class="Sidebar_tag__mAo8y">#<!-- -->r</span></a><a href="/tag/csharp/"><span class="Sidebar_tag__mAo8y">#<!-- -->csharp</span></a></div></div></div></div><div class="comp_content__73ns2"><div><h1>Deploying a Website on S3 With SSL, Continuous Integration</h1><div class="Post_tags__HKWUb"><a class="Post_tag__5GXoX" href="https://rusith.me/tag/aws">#<!-- -->aws</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/programming">#<!-- -->programming</a><a class="Post_tag__5GXoX" href="https://rusith.me/tag/web">#<!-- -->web</a></div><span class="Post_date__h8Of6">Mon, Aug 5, 2019</span><div><p><img alt="Page banner" class="Post_banner__soX4H" src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/banner.png" ></p>
<p>S3 supports static site hosting, In this post, I am going to show you how you can set up a website on S3 and configure
a deployment workflow using Gitlab.</p>
<p>What we can expect from the site that we gonna create?</p>
<ul>
<li>It should be fast</li>
<li>Should have a proper SSL certificate</li>
<li>Should be able to update the site right from GIT</li>
</ul>
<h3 id="whatwearegoingtouse">What we are Going to use</h3>
<p>Let's see what tools we are going to use to make this happen, Most of these tools are either free or very cost-effective for a
simple website. So you can give this a try without any worries. Anyway, it's better to check the pricing and get an understanding before proceeding.</p>
<p>We are going to spend most of the time in AWS. so if you have not used AWS before, create an account if you want to follow
alone.</p>
<h5 id="adomainnameservice">A domain name service</h5>
<p>I am going to use Godaddy. but you can use any service for this. We use this only to buy the domain.
after adding the name server records, we won't touch this much.</p>
<h5 id="amazonroute53">Amazon Route 53</h5>
<p>We are going to use Amazon Route 53 as the name server for our domain.</p>
<h5 id="amazoncertificatemanager">Amazon Certificate Manager</h5>
<p>We will need the Certificate Manager to get an SSL certificate for our website</p>
<h5 id="amazoncloudfront">Amazon Cloudfront</h5>
<p>We have to use a Cloudfront distribution for our website.</p>
<h5 id="amazons3">Amazon S3</h5>
<p>We are going to use S3 to put the files of the website (the site itself)</p>
<h5 id="gitlab">Gitlab</h5>
<p>We will use Gitlab to host our code and create the CI pipeline. create a new account if you haven't used it before if you want to follow along. its free.</p>
<h3 id="gettingadomainnameready">Getting a Domain Name Ready</h3>
<p>If you have a domain name already, skip this step. You can use any domain name service as you like such as NameCheap, BlueHost.</p>
<p>I already have a domain that can be used in this which is <code>prettyuseless.website</code>.
The name is awful but let's continue with it.</p>
<p>So I have my domain name with me, make sure you have your one ready at this point if you follow along.</p>
<h3 id="creatingthes3bucket">Creating the S3 Bucket</h3>
<p>Okay, we need a place to put the files of our website (such as <code>index.html</code>). we are going to use Amazon S3 for this.
First, we have to create a bucket for our website. Make sure to set the domain name as the name of the new bucket.</p>
<p><em>Go to S3 home page, and start creating the bucket. put your domain name as the name and choose your preferred region.
(I am choosing Singapore) and go head</em></p>
<p><img alt="Create a bucket"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/create-bucket-step-one.jpg"></p>
<p>After creating the bucket, It should immediately show up in the S3 home page.</p>
<p><em>Click the bucket you just created and go to permissions tab. Click the "Bucket Policy" button and paste the configuration below</em></p>
<pre><code class="hljs json language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;Version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2012-10-17&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;Statement&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;Sid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;AddPerm&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Effect&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Allow&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Principal&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;*&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;s3:GetObject&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Resource&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;arn:aws:s3:::yourbucketname/*&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><em>And don't forget to replace <code>yourbucketname</code> with the name of the bucket you created which has the same name as your domain name.
And don't forget to save the change.</em></p>
<p><img alt="Bucket policy"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/create-bucket-policy.jpg"></p>
<p>Now we have to turn on Static Website Hosting in our bucket</p>
<p><em>Go to the properties tab and click Static Website Hosting section. Select "Use this bucket to host a website" option and put
<code>index.html</code> as the "Index Document". you can also put a file name for the "Error Document" and save.</em></p>
<p><img alt="Bucket hosting settings"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/bucket-hosting-settings.jpg"></p>
<p>Okay, as you can see now we have an address (Endpoint) that can be used to access our hosted website.
Give it a try and it should return a not found response. that is because we don't have an <code>index.html</code> file on our website.
So let's add that so we can easily test our website.</p>
<p><em>Create two files (<code>index.html</code>, <code>error.html</code>) and upload it to the root of the bucket.
I am going to upload files with the content below.</em></p>
<pre><code class="hljs html language-html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center; margin-top: 100px;&quot;</span>&gt;</span>
      We are under construction. please try again later.
    <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<pre><code class="hljs html language-html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center; margin-top: 100px;&quot;</span>&gt;</span>
      The page you are trying to access it not available right now
    <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>Now if you try the website now, it should return the HTML you have just added. like below. and if you try to access any other file
It should return the error page.</p>
<p><img alt="Simple HTML page"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/simple-html-page.jpg"></p>
<h4 id="ssl">SSL</h4>
<p>We need SSL for our website. we can use the AWS Certificate Manager to get a free certificate. we will need
this when we are creating the Cloudfront distribution.</p>
<p><em>Go to the Certificate Manager and create a new Provision Certificate. Make sure you have selected the "US East (N. Virginia)" region
before requesting the certificate.</em></p>
<p><em>It will ask you for the domain names to cover with the certificate when you are going ahead. make sure you add your domain name and the domain name with <code>www</code> prefix</em></p>
<p><img alt="Adding domains to the certificate"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/adding-domains-to-the-certificate.jpg"></p>
<p><em>And go ahead and select DNS validation as the validation method. and request the certificate</em></p>
<p>While you are in the validation step, you can complete it easily by clicking "Create record in Route 53" for each domain name. this will
automatically add the required CNAME records to your Route 53 hosted zone.</p>
<p><img alt="Certificate validation"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/certificate-validation.jpg"></p>
<p>And complete the request.</p>
<p>It will take some time for Amazon to issue the certificate (about 10 minutes).</p>
<h3 id="cdnwithcloudfront">CDN With Cloudfront</h3>
<p>Okay, now our bucket is ready, let's create the Cloudfront distribution for our site.</p>
<p><em>Go to the Cloudfront home page and start creating a new <strong>Web</strong> distribution.</em></p>
<p><em>Copy the URL for our bucket from S3 and paste it <strong>without</strong> the <code>http://</code> part into the "Origin Domain Name" input.</em></p>
<p><img alt="S3 bucket URL"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/bucket-url.jpg"></p>
<p><em>Mark the "Redirect HTTP to HTTPS" option</em></p>
<p><img alt="S3 Bucket redirect HTTP to HTTPS"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/redirect-http-to-https.jpg"></p>
<p><em>Change "Compress Objects Automatically" to Yes</em></p>
<p><em>Put the domain name with and without www prefix in two lines in the "Alternate Domain Names" input.</em></p>
<p><em>Select the certificate you created in Certificate Manager as the custom SSL certificate</em></p>
<p><img alt="Cloudfront settings"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/cloudfront-settings.jpg"></p>
<p><em>And save changes and wait for it to finish. It will take about 20-30 minutes to deploy the distribution</em></p>
<p>After the deployment is done, you can check if the website is working by accessing the domain name provided by
the distribution.</p>
<p><img alt="Cloudfront default domain"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/cloudfront-domain.jpg"></p>
<p><em>Also make sure that the SSL is working in that domain.</em></p>
<h3 id="settingupthenameserver">Setting up the Name Server</h3>
<p>We have our domain ready but it is not working as we have not configured it. So now we are going to configure the name server for the domain name. We can use Route 53 to do this.</p>
<p><em>Go to the Route 53 <a target="_blank" href="https://console.aws.amazon.com/route53/home#hosted-zones:">Hosted Zones</a> page and create a new hosted zone.</em></p>
<ul>
<li>Enter the domain name, and keep the type as <code>Public Hosted Zone</code> Like below.</li>
</ul>
<p><img alt="Cloudfront creating hosted zone"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/creating-hosted-zone.jpg"></p>
<p><em>And press <code>Create</code> to create the hosted zone.</em>
Now you will be redirected to the properties page of the newly created hosted zone.</p>
<p>Here you can see they have added some records already. Now we have to let the domain know what is our name server is.
To do that we have to add name server records to our domain name.</p>
<p>To do this we just have to Copy the value of the only NS record in the hosted zone and add them as name server records in our domain.</p>
<p><em>Select the name server RecordSet and copy the values (each row represent one NS record)</em></p>
<p><img alt="Copying NS records"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/copying-ns-records.jpg"></p>
<p><em>Go to your domain name provider website's management screen and add the name server records you just copied one by one.
Remove the dot at the end of each record if it gives you an error.</em></p>
<p><img alt="Add name servers"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/added-name-servers.jpg"></p>
<p>It will take some time to switch the name servers depending on your domain name provider. You can check if the name server
records are applied using a tool like <a href="https://network-tools.com/nslookup" target="_blank">NS lookup </a></p>
<p>Now we just have to point our domain name to the Cloudfront distribution that we just created. To do this, we can create an
A record that will point to the distribution.</p>
<p><em>Go to the hosted zone you created and create a new RecordSet. keep the name empty, Type should be A, Check the Alias option
and select the CloudFront distribution you created.</em></p>
<p><img alt="Cloudfront A record config"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/a-record-config.jpg"></p>
<p><em>Also add a new CNAME Record Set to redirect the www subdomain to the root domain So we don't have to configure another
bucket for that</em></p>
<p><img alt="Cloudfront CNAME record config"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/cname-record.jpg"></p>
<p>This will take some time to get registered.</p>
<hr />
<p>Okay, now we are mostly done with our AWS setup, now we can go ahead and start setting up our deployment workflow.
I will keep this website simple with only 4 files,</p>
<ul>
<li>error.html</li>
<li>index.html</li>
<li>index.css</li>
<li>index.js</li>
</ul>
<p>Pretty basic setup. And I am going to use Parcel to bundle the files.</p>
<p>The first thing we have to do is to create a new repository in Gitlab.</p>
<p><em>Go ahead and create a new repository</em></p>
<p><img alt="Create new repository in Gitlab"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/creating-repository.jpg"></p>
<p>In order to access our bucket from Gitlab CI, we will need permissions. for this, we can create a new user
for Gitlab CI and assign policies that will allow accessing the bucket we created.</p>
<p><em>Go to the AWS IAM console and create a new policy with the below JSON. Don't forget to replace the bucket name (prettyuseless.website) with yours</em></p>
<pre><code class="hljs json language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;Version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2012-10-17&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;Statement&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;Sid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;VisualEditor0&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Effect&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Allow&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">&quot;s3:PutObject&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:GetObjectAcl&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:GetObject&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:ListBucket&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:DeleteObject&quot;</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Resource&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">&quot;arn:aws:s3:::prettyuseless.website/*&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;arn:aws:s3:::prettyuseless.website&quot;</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;Sid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;VisualEditor1&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Effect&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Allow&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">&quot;s3:GetAccountPublicAccessBlock&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:ListAllMyBuckets&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:ListJobs&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:CreateJob&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:HeadBucket&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;s3:ListObjects&quot;</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;Resource&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;*&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><em>Set an appropriate name. I am going to name the policy as useless-upload</em></p>
<p><em>Create a new user. I am going to name it as "S3GitlabUploader". You can use whichever name you like.
And make sure Programmatic access is enabled</em></p>
<p><img alt="AWS - create a new user"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/aws-user-creation.jpg"></p>
<p><em>Select "Attach existing policies directly" and select the policy you created above.</em></p>
<p><em>Remember to keep a copy of the Access key ID and Secret access key that will be prompted at the end of user creation</em></p>
<p><img alt="AWS user access keys" src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/keys.jpg"></p>
<p>Now we have the credentials to use the bucket. we can now add these access keys to the repository so we can use those values
in our CI pipeline.</p>
<p>Go to CI/CD Settings and create two variables for the access key and secret key. (put <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code>) as the keys.</p>
<p>Okay, with that done, we are ready to configure our CI pipeline.</p>
<p>Below is the configuration we gonna use.</p>
<pre><code class="hljs yaml language-yaml"><span class="hljs-attr">image:</span> <span class="hljs-string">node:10</span>

<span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">build</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">deploy</span>

<span class="hljs-attr">variables:</span>
  <span class="hljs-attr">AWS_DEFAULT_REGION:</span> <span class="hljs-string">ap-southeast-1</span>
  <span class="hljs-attr">BUCKET_NAME:</span> <span class="hljs-string">prettyuseless.website</span>

<span class="hljs-attr">cache:</span>
  <span class="hljs-attr">paths:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">vendor</span>

<span class="hljs-attr">buildSite:</span>
  <span class="hljs-attr">only:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">production</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">build</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span> <span class="hljs-string">-g</span> <span class="hljs-string">parcel-bundler</span> <span class="hljs-string">--unsafe-perm=true</span> <span class="hljs-string">--allow-root</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">parcel</span> <span class="hljs-string">build</span> <span class="hljs-string">index.html</span>
  <span class="hljs-attr">artifacts:</span>
    <span class="hljs-attr">paths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">dist/</span>

<span class="hljs-attr">deploys3:</span>
  <span class="hljs-attr">only:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">production</span>
  <span class="hljs-attr">image:</span> <span class="hljs-string">&quot;python:latest&quot;</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">deploy</span>
  <span class="hljs-attr">dependencies:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">buildSite</span>
  <span class="hljs-attr">before_script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">pip</span> <span class="hljs-string">install</span> <span class="hljs-string">awscli</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">aws</span> <span class="hljs-string">s3</span> <span class="hljs-string">rm</span> <span class="hljs-string">s3://${BUCKET_NAME}/</span> <span class="hljs-string">--recursive</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">aws</span> <span class="hljs-string">s3</span> <span class="hljs-string">cp</span> <span class="hljs-string">./dist</span> <span class="hljs-string">s3://${BUCKET_NAME}/</span> <span class="hljs-string">--recursive</span>
  <span class="hljs-attr">environment:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">${CI_COMMIT_REF_SLUG}</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">http://${BUCKET_NAME}.s3-website.${AWS_DEFAULT_REGION}.amazonaws.com/</span>
</code></pre>
<p><em>Change the <code>AWS_DEFAULT_REGION</code> and <code>BUCKET_NAME</code> and save as a file named <code>.gitlab-ci.yml</code> in the root of your repository</em></p>
<p>This will instructs Gitlab to build and deploy the website whenever something is pushed to the <code>production</code> branch.
You can change this behavior if you want.</p>
<p>Okay, now our CI pipeline is ready. I now you can continue developing the website. you just have to push the latest code to the <code>production</code> branch,
It will deploy the code to S3.</p>
<p><img alt="Pipelines preview"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/pipelines.jpg"></p>
<p><img alt="Gitlab Job"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/job.jpg"></p>
<p><img alt="Preview of the final website"  src="https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/final-website.jpg"></p></div></div><div class="Post_related__V0k3K"><h2>Related Posts</h2><ul class="Post_relatedPosts__co9O7"><li><h3><a href="https://rusith.me/blog/deploy-app-on-aws-ecs-with-cdk-auto-scaling-and-load-balancing">Deploying an app on AWS ECS with CDK<small>Wed, Feb 15, 2023</small></a></h3></li><li><h3><a href="https://rusith.me/blog/nuget-feed-on-s3">Running a Nuget Feed on S3 with Automated Deployments<small>Sat, Nov 2, 2019</small></a></h3></li><li><h3><a href="https://rusith.me/blog/re-usable-presto-worker-image-ec2">Creating a Re-Usable Presto Worker Image in EC2<small>Thu, Jul 25, 2019</small></a></h3></li></ul></div><div id="disqus_thread"></div></div><div class="sbuttons"><a href="https://www.facebook.com/sharer/sharer.php?u=https://rusith.me/blog/building-a-website-on-s3" target="_blank" class="sbutton fb" title="Share on Facebook" rel="noreferrer"><img alt="Facebook icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMjAgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMjAgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNzkuMSwyODhsMTQuMi05Mi43aC04OC45di02MC4xYzAtMjUuMywxMi40LTUwLjEsNTIuMi01MC4xaDQwLjRWNi4zYzAsMC0zNi43LTYuMy03MS43LTYuMwoJYy03My4yLDAtMTIxLjEsNDQuNC0xMjEuMSwxMjQuN3Y3MC42SDIyLjlWMjg4aDgxLjR2MjI0aDEwMC4yVjI4OEgyNzkuMXoiLz4KPC9zdmc+Cg=="/></a><a href="https://twitter.com/intent/tweet?text=https://rusith.me/blog/building-a-website-on-s3" target="_blank" class="sbutton twitt" title="Share on Twitter" rel="noreferrer"><img alt="Twitter icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NTkuNCwxNTEuN2MwLjMsNC41LDAuMyw5LjEsMC4zLDEzLjZjMCwxMzguNy0xMDUuNiwyOTguNi0yOTguNiwyOTguNmMtNTkuNSwwLTExNC43LTE3LjItMTYxLjEtNDcuMQoJYzguNCwxLDE2LjYsMS4zLDI1LjMsMS4zYzQ5LjEsMCw5NC4yLTE2LjYsMTMwLjMtNDQuOGMtNDYuMS0xLTg0LjgtMzEuMi05OC4xLTcyLjhjNi41LDEsMTMsMS42LDE5LjgsMS42YzkuNCwwLDE4LjgtMS4zLDI3LjYtMy42CgljLTQ4LjEtOS43LTg0LjEtNTItODQuMS0xMDN2LTEuM2MxNCw3LjgsMzAuMiwxMi43LDQ3LjQsMTMuM2MtMjguMy0xOC44LTQ2LjgtNTEtNDYuOC04Ny40YzAtMTkuNSw1LjItMzcuNCwxNC4zLTUzCglDODcuNCwxMzAuOSwxNjUsMTcyLjUsMjUyLjEsMTc3LjFjLTEuNi03LjgtMi42LTE1LjktMi42LTI0YzAtNTcuOCw0Ni44LTEwNC45LDEwNC45LTEwNC45YzMwLjIsMCw1Ny41LDEyLjcsNzYuNywzMy4xCgljMjMuNy00LjUsNDYuNS0xMy4zLDY2LjYtMjUuM2MtNy44LDI0LjQtMjQuNCw0NC44LTQ2LjEsNTcuOGMyMS4xLTIuMyw0MS42LTguMSw2MC40LTE2LjJDNDk3LjcsMTE4LjMsNDc5LjgsMTM2LjgsNDU5LjQsMTUxLjcKCUw0NTkuNCwxNTEuN3oiLz4KPC9zdmc+Cg=="/></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://rusith.me/blog/building-a-website-on-s3&amp;title=&amp;summary=&amp;source=" target="_blank" class="sbutton linkedin" title="Share on Linkedin" rel="noreferrer"><img alt="LinkedIn icon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDAuMyw0NDhINy40VjE0OC45aDkyLjlWNDQ4eiBNNTMuOCwxMDguMUMyNC4xLDEwOC4xLDAsODMuNSwwLDUzLjhDMCwyNC4xLDI0LjEsMCw1My44LDAKCWMyOS43LDAsNTMuOCwyNC4xLDUzLjgsNTMuOEMxMDcuNiw4My41LDgzLjUsMTA4LjEsNTMuOCwxMDguMXogTTQ0Ny45LDQ0OGgtOTIuN1YzMDIuNGMwLTM0LjctMC43LTc5LjItNDguMy03OS4yCgljLTQ4LjMsMC01NS43LDM3LjctNTUuNyw3Ni43VjQ0OGgtOTIuOFYxNDguOWg4OS4xdjQwLjhoMS4zYzEyLjQtMjMuNSw0Mi43LTQ4LjMsODcuOS00OC4zYzk0LDAsMTExLjMsNjEuOSwxMTEuMywxNDIuM1Y0NDhINDQ3Ljl6CgkiLz4KPC9zdmc+Cg=="/></a><a target="_blank" class="sbutton mainsbutton"><img alt="Share button" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NDggNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNTIsMzIwYy0yNS42LDAtNDguOSwxMC02Ni4xLDI2LjRsLTk4LjMtNjEuNWM1LjktMTguOCw1LjktMzkuMSwwLTU3LjhsOTguMy02MS41CglDMzAzLjEsMTgyLDMyNi40LDE5MiwzNTIsMTkyYzUzLDAsOTYtNDMsOTYtOTZTNDA1LDAsMzUyLDBzLTk2LDQzLTk2LDk2YzAsOS44LDEuNSwxOS42LDQuNCwyOC45bC05OC4zLDYxLjUKCUMxNDQuOSwxNzAsMTIxLjYsMTYwLDk2LDE2MGMtNTMsMC05Niw0My05Niw5NnM0Myw5Niw5Niw5NmMyNS42LDAsNDguOS0xMCw2Ni4xLTI2LjRsOTguMyw2MS41Yy0yLjksOS40LTQuNCwxOS4xLTQuNCwyOC45CgljMCw1Myw0Myw5Niw5Niw5NnM5Ni00Myw5Ni05NlM0MDUsMzIwLDM1MiwzMjBMMzUyLDMyMHogTTM1Miw0OGMyNi41LDAsNDgsMjEuNSw0OCw0OHMtMjEuNSw0OC00OCw0OHMtNDgtMjEuNS00OC00OAoJUzMyNS41LDQ4LDM1Miw0OHogTTk2LDMwNGMtMjYuNSwwLTQ4LTIxLjUtNDgtNDhzMjEuNS00OCw0OC00OHM0OCwyMS41LDQ4LDQ4UzEyMi41LDMwNCw5NiwzMDR6IE0zNTIsNDY0Yy0yNi41LDAtNDgtMjEuNS00OC00OAoJczIxLjUtNDgsNDgtNDhzNDgsMjEuNSw0OCw0OFMzNzguNSw0NjQsMzUyLDQ2NHoiLz4KPC9zdmc+Cg=="/></a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"fileName":"2019-08-14-building-a-website-on-s3.md","fullPath":"/home/runner/work/rusith.me/rusith.me/modules/blog/posts/2019-08-14-building-a-website-on-s3.md","title":"Deploying a Website on S3 With SSL, Continuous Integration","tags":["aws","programming","web"],"comments":true,"description":"In this post, I am creating a website and host it on S3 and setup a continuous integration pipeline setup using Gitlab","dateCreated":"Mon Aug 05 2019 00:00:00 GMT+0000 (Coordinated Universal Time)","dateModified":"Mon Aug 05 2019 00:00:00 GMT+0000 (Coordinated Universal Time)","datePublished":"Mon Aug 05 2019 00:00:00 GMT+0000 (Coordinated Universal Time)","dependencies":"AWS","about":"Demonstrates how to create and publish a website on S3 and create a CI setup for automatic deployments","banner":"/post-data/2019-08-14-building-a-website-on-s3/banner.png","path":"/blog/building-a-website-on-s3","oldPath":"/2019/08/14/building-a-website-on-s3","dateCreatedFormatted":"Mon, Aug 5, 2019","fullUrl":"https://rusith.me/blog/building-a-website-on-s3","fileContent":"---\ntitle: Deploying a Website on S3 With SSL, Continuous Integration\ntags: aws programming web\ncomments: true\ndescription: In this post, I am creating a website and host it on S3 and setup a continuous integration pipeline setup using Gitlab\ndateCreated: 2019-08-05\ndateModified: 2019-08-05\ndatePublished: 2019-08-05\ndependencies: AWS\nabout: Demonstrates how to create and publish a website on S3 and create a CI setup for automatic deployments\nbanner: /post-data/2019-08-14-building-a-website-on-s3/banner.png\npath: /building-a-website-on-s3\noldPath: /2019/08/14/building-a-website-on-s3\n---\n\n\u003cimg alt=\"Page banner\" class=\"$$styles.banner\" src=\"$$page_banner_full_path\" \u003e\n\nS3 supports static site hosting, In this post, I am going to show you how you can set up a website on S3 and configure\na deployment workflow using Gitlab.\n\nWhat we can expect from the site that we gonna create?\n\n- It should be fast\n- Should have a proper SSL certificate\n- Should be able to update the site right from GIT\n\n### What we are Going to use\n\nLet's see what tools we are going to use to make this happen, Most of these tools are either free or very cost-effective for a\nsimple website. So you can give this a try without any worries. Anyway, it's better to check the pricing and get an understanding before proceeding.\n\nWe are going to spend most of the time in AWS. so if you have not used AWS before, create an account if you want to follow\nalone.\n\n##### A domain name service\n\nI am going to use Godaddy. but you can use any service for this. We use this only to buy the domain.\nafter adding the name server records, we won't touch this much.\n\n##### Amazon Route 53\n\nWe are going to use Amazon Route 53 as the name server for our domain.\n\n##### Amazon Certificate Manager\n\nWe will need the Certificate Manager to get an SSL certificate for our website\n\n##### Amazon Cloudfront\n\nWe have to use a Cloudfront distribution for our website.\n\n##### Amazon S3\n\nWe are going to use S3 to put the files of the website (the site itself)\n\n##### Gitlab\n\nWe will use Gitlab to host our code and create the CI pipeline. create a new account if you haven't used it before if you want to follow along. its free.\n\n### Getting a Domain Name Ready\n\nIf you have a domain name already, skip this step. You can use any domain name service as you like such as NameCheap, BlueHost.\n\nI already have a domain that can be used in this which is `prettyuseless.website`.\nThe name is awful but let's continue with it.\n\nSo I have my domain name with me, make sure you have your one ready at this point if you follow along.\n\n### Creating the S3 Bucket\n\nOkay, we need a place to put the files of our website (such as `index.html`). we are going to use Amazon S3 for this.\nFirst, we have to create a bucket for our website. Make sure to set the domain name as the name of the new bucket.\n\n_Go to S3 home page, and start creating the bucket. put your domain name as the name and choose your preferred region.\n(I am choosing Singapore) and go head_\n\n\u003cimg alt=\"Create a bucket\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/create-bucket-step-one.jpg\"\u003e\n\nAfter creating the bucket, It should immediately show up in the S3 home page.\n\n_Click the bucket you just created and go to permissions tab. Click the \"Bucket Policy\" button and paste the configuration below_\n\n```json\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AddPerm\",\n      \"Effect\": \"Allow\",\n      \"Principal\": \"*\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::yourbucketname/*\"\n    }\n  ]\n}\n```\n\n_And don't forget to replace `yourbucketname` with the name of the bucket you created which has the same name as your domain name.\nAnd don't forget to save the change._\n\n\u003cimg alt=\"Bucket policy\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/create-bucket-policy.jpg\"\u003e\n\nNow we have to turn on Static Website Hosting in our bucket\n\n_Go to the properties tab and click Static Website Hosting section. Select \"Use this bucket to host a website\" option and put\n`index.html` as the \"Index Document\". you can also put a file name for the \"Error Document\" and save._\n\n\u003cimg alt=\"Bucket hosting settings\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/bucket-hosting-settings.jpg\"\u003e\n\nOkay, as you can see now we have an address (Endpoint) that can be used to access our hosted website.\nGive it a try and it should return a not found response. that is because we don't have an `index.html` file on our website.\nSo let's add that so we can easily test our website.\n\n_Create two files (`index.html`, `error.html`) and upload it to the root of the bucket.\nI am going to upload files with the content below._\n\n```html\n\u003chtml\u003e\n  \u003cbody\u003e\n    \u003ch1 style=\"text-align: center; margin-top: 100px;\"\u003e\n      We are under construction. please try again later.\n    \u003c/h1\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n```\n\n```html\n\u003chtml\u003e\n  \u003cbody\u003e\n    \u003ch1 style=\"text-align: center; margin-top: 100px;\"\u003e\n      The page you are trying to access it not available right now\n    \u003c/h1\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n```\n\nNow if you try the website now, it should return the HTML you have just added. like below. and if you try to access any other file\nIt should return the error page.\n\n\u003cimg alt=\"Simple HTML page\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/simple-html-page.jpg\"\u003e\n\n#### SSL\n\nWe need SSL for our website. we can use the AWS Certificate Manager to get a free certificate. we will need\nthis when we are creating the Cloudfront distribution.\n\n_Go to the Certificate Manager and create a new Provision Certificate. Make sure you have selected the \"US East (N. Virginia)\" region\nbefore requesting the certificate._\n\n_It will ask you for the domain names to cover with the certificate when you are going ahead. make sure you add your domain name and the domain name with `www` prefix_\n\n\u003cimg alt=\"Adding domains to the certificate\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/adding-domains-to-the-certificate.jpg\"\u003e\n\n_And go ahead and select DNS validation as the validation method. and request the certificate_\n\nWhile you are in the validation step, you can complete it easily by clicking \"Create record in Route 53\" for each domain name. this will\nautomatically add the required CNAME records to your Route 53 hosted zone.\n\n\u003cimg alt=\"Certificate validation\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/certificate-validation.jpg\"\u003e\n\nAnd complete the request.\n\nIt will take some time for Amazon to issue the certificate (about 10 minutes).\n\n### CDN With Cloudfront\n\nOkay, now our bucket is ready, let's create the Cloudfront distribution for our site.\n\n_Go to the Cloudfront home page and start creating a new **Web** distribution._\n\n_Copy the URL for our bucket from S3 and paste it **without** the `http://` part into the \"Origin Domain Name\" input._\n\n\u003cimg alt=\"S3 bucket URL\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/bucket-url.jpg\"\u003e\n\n_Mark the \"Redirect HTTP to HTTPS\" option_\n\n\u003cimg alt=\"S3 Bucket redirect HTTP to HTTPS\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/redirect-http-to-https.jpg\"\u003e\n\n_Change \"Compress Objects Automatically\" to Yes_\n\n_Put the domain name with and without www prefix in two lines in the \"Alternate Domain Names\" input._\n\n_Select the certificate you created in Certificate Manager as the custom SSL certificate_\n\n\u003cimg alt=\"Cloudfront settings\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/cloudfront-settings.jpg\"\u003e\n\n_And save changes and wait for it to finish. It will take about 20-30 minutes to deploy the distribution_\n\nAfter the deployment is done, you can check if the website is working by accessing the domain name provided by\nthe distribution.\n\n\u003cimg alt=\"Cloudfront default domain\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/cloudfront-domain.jpg\"\u003e\n\n_Also make sure that the SSL is working in that domain._\n\n### Setting up the Name Server\n\nWe have our domain ready but it is not working as we have not configured it. So now we are going to configure the name server for the domain name. We can use Route 53 to do this.\n\n_Go to the Route 53 \u003ca target=\"_blank\" href=\"https://console.aws.amazon.com/route53/home#hosted-zones:\"\u003eHosted Zones\u003c/a\u003e page and create a new hosted zone._\n\n- Enter the domain name, and keep the type as `Public Hosted Zone` Like below.\n\n\u003cimg alt=\"Cloudfront creating hosted zone\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/creating-hosted-zone.jpg\"\u003e\n\n_And press `Create` to create the hosted zone._\nNow you will be redirected to the properties page of the newly created hosted zone.\n\nHere you can see they have added some records already. Now we have to let the domain know what is our name server is.\nTo do that we have to add name server records to our domain name.\n\nTo do this we just have to Copy the value of the only NS record in the hosted zone and add them as name server records in our domain.\n\n_Select the name server RecordSet and copy the values (each row represent one NS record)_\n\n\u003cimg alt=\"Copying NS records\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/copying-ns-records.jpg\"\u003e\n\n_Go to your domain name provider website's management screen and add the name server records you just copied one by one.\nRemove the dot at the end of each record if it gives you an error._\n\n\u003cimg alt=\"Add name servers\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/added-name-servers.jpg\"\u003e\n\nIt will take some time to switch the name servers depending on your domain name provider. You can check if the name server\nrecords are applied using a tool like \u003ca href=\"https://network-tools.com/nslookup\" target=\"_blank\"\u003eNS lookup \u003c/a\u003e\n\nNow we just have to point our domain name to the Cloudfront distribution that we just created. To do this, we can create an\nA record that will point to the distribution.\n\n_Go to the hosted zone you created and create a new RecordSet. keep the name empty, Type should be A, Check the Alias option\nand select the CloudFront distribution you created._\n\n\u003cimg alt=\"Cloudfront A record config\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/a-record-config.jpg\"\u003e\n\n_Also add a new CNAME Record Set to redirect the www subdomain to the root domain So we don't have to configure another\nbucket for that_\n\n\u003cimg alt=\"Cloudfront CNAME record config\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/cname-record.jpg\"\u003e\n\nThis will take some time to get registered.\n\n---\n\nOkay, now we are mostly done with our AWS setup, now we can go ahead and start setting up our deployment workflow.\nI will keep this website simple with only 4 files,\n\n- error.html\n- index.html\n- index.css\n- index.js\n\nPretty basic setup. And I am going to use Parcel to bundle the files.\n\nThe first thing we have to do is to create a new repository in Gitlab.\n\n_Go ahead and create a new repository_\n\n\u003cimg alt=\"Create new repository in Gitlab\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/creating-repository.jpg\"\u003e\n\nIn order to access our bucket from Gitlab CI, we will need permissions. for this, we can create a new user\nfor Gitlab CI and assign policies that will allow accessing the bucket we created.\n\n_Go to the AWS IAM console and create a new policy with the below JSON. Don't forget to replace the bucket name (prettyuseless.website) with yours_\n\n```json\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"VisualEditor0\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:GetObjectAcl\",\n        \"s3:GetObject\",\n        \"s3:ListBucket\",\n        \"s3:DeleteObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::prettyuseless.website/*\",\n        \"arn:aws:s3:::prettyuseless.website\"\n      ]\n    },\n    {\n      \"Sid\": \"VisualEditor1\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetAccountPublicAccessBlock\",\n        \"s3:ListAllMyBuckets\",\n        \"s3:ListJobs\",\n        \"s3:CreateJob\",\n        \"s3:HeadBucket\",\n        \"s3:ListObjects\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n```\n\n_Set an appropriate name. I am going to name the policy as useless-upload_\n\n_Create a new user. I am going to name it as \"S3GitlabUploader\". You can use whichever name you like.\nAnd make sure Programmatic access is enabled_\n\n\u003cimg alt=\"AWS - create a new user\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/aws-user-creation.jpg\"\u003e\n\n_Select \"Attach existing policies directly\" and select the policy you created above._\n\n_Remember to keep a copy of the Access key ID and Secret access key that will be prompted at the end of user creation_\n\n\u003cimg alt=\"AWS user access keys\" src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/keys.jpg\"\u003e\n\nNow we have the credentials to use the bucket. we can now add these access keys to the repository so we can use those values\nin our CI pipeline.\n\nGo to CI/CD Settings and create two variables for the access key and secret key. (put `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`) as the keys.\n\nOkay, with that done, we are ready to configure our CI pipeline.\n\nBelow is the configuration we gonna use.\n\n```yaml\nimage: node:10\n\nstages:\n  - build\n  - deploy\n\nvariables:\n  AWS_DEFAULT_REGION: ap-southeast-1\n  BUCKET_NAME: prettyuseless.website\n\ncache:\n  paths:\n    - vendor\n\nbuildSite:\n  only:\n    - production\n  stage: build\n  script:\n    - npm install -g parcel-bundler --unsafe-perm=true --allow-root\n    - parcel build index.html\n  artifacts:\n    paths:\n      - dist/\n\ndeploys3:\n  only:\n    - production\n  image: \"python:latest\"\n  stage: deploy\n  dependencies:\n    - buildSite\n  before_script:\n    - pip install awscli\n  script:\n    - aws s3 rm s3://${BUCKET_NAME}/ --recursive\n    - aws s3 cp ./dist s3://${BUCKET_NAME}/ --recursive\n  environment:\n    name: ${CI_COMMIT_REF_SLUG}\n    url: http://${BUCKET_NAME}.s3-website.${AWS_DEFAULT_REGION}.amazonaws.com/\n```\n\n_Change the `AWS_DEFAULT_REGION` and `BUCKET_NAME` and save as a file named `.gitlab-ci.yml` in the root of your repository_\n\nThis will instructs Gitlab to build and deploy the website whenever something is pushed to the `production` branch.\nYou can change this behavior if you want.\n\nOkay, now our CI pipeline is ready. I now you can continue developing the website. you just have to push the latest code to the `production` branch,\nIt will deploy the code to S3.\n\n\u003cimg alt=\"Pipelines preview\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/pipelines.jpg\"\u003e\n\n\u003cimg alt=\"Gitlab Job\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/job.jpg\"\u003e\n\n\u003cimg alt=\"Preview of the final website\"  src=\"$$base_url/post-data/2019-08-14-building-a-website-on-s3/final-website.jpg\"\u003e\n","parsedContent":"\u003cp\u003e\u003cimg alt=\"Page banner\" class=\"Post_banner__soX4H\" src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/banner.png\" \u003e\u003c/p\u003e\n\u003cp\u003eS3 supports static site hosting, In this post, I am going to show you how you can set up a website on S3 and configure\na deployment workflow using Gitlab.\u003c/p\u003e\n\u003cp\u003eWhat we can expect from the site that we gonna create?\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIt should be fast\u003c/li\u003e\n\u003cli\u003eShould have a proper SSL certificate\u003c/li\u003e\n\u003cli\u003eShould be able to update the site right from GIT\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"whatwearegoingtouse\"\u003eWhat we are Going to use\u003c/h3\u003e\n\u003cp\u003eLet's see what tools we are going to use to make this happen, Most of these tools are either free or very cost-effective for a\nsimple website. So you can give this a try without any worries. Anyway, it's better to check the pricing and get an understanding before proceeding.\u003c/p\u003e\n\u003cp\u003eWe are going to spend most of the time in AWS. so if you have not used AWS before, create an account if you want to follow\nalone.\u003c/p\u003e\n\u003ch5 id=\"adomainnameservice\"\u003eA domain name service\u003c/h5\u003e\n\u003cp\u003eI am going to use Godaddy. but you can use any service for this. We use this only to buy the domain.\nafter adding the name server records, we won't touch this much.\u003c/p\u003e\n\u003ch5 id=\"amazonroute53\"\u003eAmazon Route 53\u003c/h5\u003e\n\u003cp\u003eWe are going to use Amazon Route 53 as the name server for our domain.\u003c/p\u003e\n\u003ch5 id=\"amazoncertificatemanager\"\u003eAmazon Certificate Manager\u003c/h5\u003e\n\u003cp\u003eWe will need the Certificate Manager to get an SSL certificate for our website\u003c/p\u003e\n\u003ch5 id=\"amazoncloudfront\"\u003eAmazon Cloudfront\u003c/h5\u003e\n\u003cp\u003eWe have to use a Cloudfront distribution for our website.\u003c/p\u003e\n\u003ch5 id=\"amazons3\"\u003eAmazon S3\u003c/h5\u003e\n\u003cp\u003eWe are going to use S3 to put the files of the website (the site itself)\u003c/p\u003e\n\u003ch5 id=\"gitlab\"\u003eGitlab\u003c/h5\u003e\n\u003cp\u003eWe will use Gitlab to host our code and create the CI pipeline. create a new account if you haven't used it before if you want to follow along. its free.\u003c/p\u003e\n\u003ch3 id=\"gettingadomainnameready\"\u003eGetting a Domain Name Ready\u003c/h3\u003e\n\u003cp\u003eIf you have a domain name already, skip this step. You can use any domain name service as you like such as NameCheap, BlueHost.\u003c/p\u003e\n\u003cp\u003eI already have a domain that can be used in this which is \u003ccode\u003eprettyuseless.website\u003c/code\u003e.\nThe name is awful but let's continue with it.\u003c/p\u003e\n\u003cp\u003eSo I have my domain name with me, make sure you have your one ready at this point if you follow along.\u003c/p\u003e\n\u003ch3 id=\"creatingthes3bucket\"\u003eCreating the S3 Bucket\u003c/h3\u003e\n\u003cp\u003eOkay, we need a place to put the files of our website (such as \u003ccode\u003eindex.html\u003c/code\u003e). we are going to use Amazon S3 for this.\nFirst, we have to create a bucket for our website. Make sure to set the domain name as the name of the new bucket.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eGo to S3 home page, and start creating the bucket. put your domain name as the name and choose your preferred region.\n(I am choosing Singapore) and go head\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Create a bucket\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/create-bucket-step-one.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eAfter creating the bucket, It should immediately show up in the S3 home page.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eClick the bucket you just created and go to permissions tab. Click the \"Bucket Policy\" button and paste the configuration below\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs json language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Version\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;2012-10-17\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Statement\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Sid\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;AddPerm\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Effect\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Allow\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Principal\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;*\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Action\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:GetObject\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Resource\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;arn:aws:s3:::yourbucketname/*\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003eAnd don't forget to replace \u003ccode\u003eyourbucketname\u003c/code\u003e with the name of the bucket you created which has the same name as your domain name.\nAnd don't forget to save the change.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Bucket policy\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/create-bucket-policy.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eNow we have to turn on Static Website Hosting in our bucket\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eGo to the properties tab and click Static Website Hosting section. Select \"Use this bucket to host a website\" option and put\n\u003ccode\u003eindex.html\u003c/code\u003e as the \"Index Document\". you can also put a file name for the \"Error Document\" and save.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Bucket hosting settings\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/bucket-hosting-settings.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eOkay, as you can see now we have an address (Endpoint) that can be used to access our hosted website.\nGive it a try and it should return a not found response. that is because we don't have an \u003ccode\u003eindex.html\u003c/code\u003e file on our website.\nSo let's add that so we can easily test our website.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eCreate two files (\u003ccode\u003eindex.html\u003c/code\u003e, \u003ccode\u003eerror.html\u003c/code\u003e) and upload it to the root of the bucket.\nI am going to upload files with the content below.\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs html language-html\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;text-align: center; margin-top: 100px;\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      We are under construction. please try again later.\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs html language-html\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;text-align: center; margin-top: 100px;\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      The page you are trying to access it not available right now\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow if you try the website now, it should return the HTML you have just added. like below. and if you try to access any other file\nIt should return the error page.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Simple HTML page\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/simple-html-page.jpg\"\u003e\u003c/p\u003e\n\u003ch4 id=\"ssl\"\u003eSSL\u003c/h4\u003e\n\u003cp\u003eWe need SSL for our website. we can use the AWS Certificate Manager to get a free certificate. we will need\nthis when we are creating the Cloudfront distribution.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eGo to the Certificate Manager and create a new Provision Certificate. Make sure you have selected the \"US East (N. Virginia)\" region\nbefore requesting the certificate.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eIt will ask you for the domain names to cover with the certificate when you are going ahead. make sure you add your domain name and the domain name with \u003ccode\u003ewww\u003c/code\u003e prefix\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Adding domains to the certificate\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/adding-domains-to-the-certificate.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eAnd go ahead and select DNS validation as the validation method. and request the certificate\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eWhile you are in the validation step, you can complete it easily by clicking \"Create record in Route 53\" for each domain name. this will\nautomatically add the required CNAME records to your Route 53 hosted zone.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Certificate validation\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/certificate-validation.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eAnd complete the request.\u003c/p\u003e\n\u003cp\u003eIt will take some time for Amazon to issue the certificate (about 10 minutes).\u003c/p\u003e\n\u003ch3 id=\"cdnwithcloudfront\"\u003eCDN With Cloudfront\u003c/h3\u003e\n\u003cp\u003eOkay, now our bucket is ready, let's create the Cloudfront distribution for our site.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eGo to the Cloudfront home page and start creating a new \u003cstrong\u003eWeb\u003c/strong\u003e distribution.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eCopy the URL for our bucket from S3 and paste it \u003cstrong\u003ewithout\u003c/strong\u003e the \u003ccode\u003ehttp://\u003c/code\u003e part into the \"Origin Domain Name\" input.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"S3 bucket URL\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/bucket-url.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eMark the \"Redirect HTTP to HTTPS\" option\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"S3 Bucket redirect HTTP to HTTPS\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/redirect-http-to-https.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eChange \"Compress Objects Automatically\" to Yes\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003ePut the domain name with and without www prefix in two lines in the \"Alternate Domain Names\" input.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eSelect the certificate you created in Certificate Manager as the custom SSL certificate\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Cloudfront settings\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/cloudfront-settings.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eAnd save changes and wait for it to finish. It will take about 20-30 minutes to deploy the distribution\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eAfter the deployment is done, you can check if the website is working by accessing the domain name provided by\nthe distribution.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Cloudfront default domain\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/cloudfront-domain.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eAlso make sure that the SSL is working in that domain.\u003c/em\u003e\u003c/p\u003e\n\u003ch3 id=\"settingupthenameserver\"\u003eSetting up the Name Server\u003c/h3\u003e\n\u003cp\u003eWe have our domain ready but it is not working as we have not configured it. So now we are going to configure the name server for the domain name. We can use Route 53 to do this.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eGo to the Route 53 \u003ca target=\"_blank\" href=\"https://console.aws.amazon.com/route53/home#hosted-zones:\"\u003eHosted Zones\u003c/a\u003e page and create a new hosted zone.\u003c/em\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEnter the domain name, and keep the type as \u003ccode\u003ePublic Hosted Zone\u003c/code\u003e Like below.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg alt=\"Cloudfront creating hosted zone\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/creating-hosted-zone.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eAnd press \u003ccode\u003eCreate\u003c/code\u003e to create the hosted zone.\u003c/em\u003e\nNow you will be redirected to the properties page of the newly created hosted zone.\u003c/p\u003e\n\u003cp\u003eHere you can see they have added some records already. Now we have to let the domain know what is our name server is.\nTo do that we have to add name server records to our domain name.\u003c/p\u003e\n\u003cp\u003eTo do this we just have to Copy the value of the only NS record in the hosted zone and add them as name server records in our domain.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eSelect the name server RecordSet and copy the values (each row represent one NS record)\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Copying NS records\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/copying-ns-records.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eGo to your domain name provider website's management screen and add the name server records you just copied one by one.\nRemove the dot at the end of each record if it gives you an error.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Add name servers\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/added-name-servers.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eIt will take some time to switch the name servers depending on your domain name provider. You can check if the name server\nrecords are applied using a tool like \u003ca href=\"https://network-tools.com/nslookup\" target=\"_blank\"\u003eNS lookup \u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eNow we just have to point our domain name to the Cloudfront distribution that we just created. To do this, we can create an\nA record that will point to the distribution.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eGo to the hosted zone you created and create a new RecordSet. keep the name empty, Type should be A, Check the Alias option\nand select the CloudFront distribution you created.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Cloudfront A record config\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/a-record-config.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eAlso add a new CNAME Record Set to redirect the www subdomain to the root domain So we don't have to configure another\nbucket for that\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Cloudfront CNAME record config\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/cname-record.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eThis will take some time to get registered.\u003c/p\u003e\n\u003chr /\u003e\n\u003cp\u003eOkay, now we are mostly done with our AWS setup, now we can go ahead and start setting up our deployment workflow.\nI will keep this website simple with only 4 files,\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eerror.html\u003c/li\u003e\n\u003cli\u003eindex.html\u003c/li\u003e\n\u003cli\u003eindex.css\u003c/li\u003e\n\u003cli\u003eindex.js\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ePretty basic setup. And I am going to use Parcel to bundle the files.\u003c/p\u003e\n\u003cp\u003eThe first thing we have to do is to create a new repository in Gitlab.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eGo ahead and create a new repository\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Create new repository in Gitlab\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/creating-repository.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eIn order to access our bucket from Gitlab CI, we will need permissions. for this, we can create a new user\nfor Gitlab CI and assign policies that will allow accessing the bucket we created.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eGo to the AWS IAM console and create a new policy with the below JSON. Don't forget to replace the bucket name (prettyuseless.website) with yours\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs json language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Version\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;2012-10-17\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Statement\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Sid\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;VisualEditor0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Effect\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Allow\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Action\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:PutObject\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:GetObjectAcl\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:GetObject\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:ListBucket\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:DeleteObject\u0026quot;\u003c/span\u003e\n      \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Resource\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;arn:aws:s3:::prettyuseless.website/*\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;arn:aws:s3:::prettyuseless.website\u0026quot;\u003c/span\u003e\n      \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Sid\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;VisualEditor1\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Effect\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Allow\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Action\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:GetAccountPublicAccessBlock\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:ListAllMyBuckets\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:ListJobs\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:CreateJob\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:HeadBucket\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3:ListObjects\u0026quot;\u003c/span\u003e\n      \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;Resource\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;*\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003eSet an appropriate name. I am going to name the policy as useless-upload\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eCreate a new user. I am going to name it as \"S3GitlabUploader\". You can use whichever name you like.\nAnd make sure Programmatic access is enabled\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"AWS - create a new user\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/aws-user-creation.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eSelect \"Attach existing policies directly\" and select the policy you created above.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eRemember to keep a copy of the Access key ID and Secret access key that will be prompted at the end of user creation\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"AWS user access keys\" src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/keys.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eNow we have the credentials to use the bucket. we can now add these access keys to the repository so we can use those values\nin our CI pipeline.\u003c/p\u003e\n\u003cp\u003eGo to CI/CD Settings and create two variables for the access key and secret key. (put \u003ccode\u003eAWS_ACCESS_KEY_ID\u003c/code\u003e and \u003ccode\u003eAWS_SECRET_ACCESS_KEY\u003c/code\u003e) as the keys.\u003c/p\u003e\n\u003cp\u003eOkay, with that done, we are ready to configure our CI pipeline.\u003c/p\u003e\n\u003cp\u003eBelow is the configuration we gonna use.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs yaml language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enode:10\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003estages:\u003c/span\u003e\n  \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuild\u003c/span\u003e\n  \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edeploy\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003evariables:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eAWS_DEFAULT_REGION:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eap-southeast-1\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eBUCKET_NAME:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eprettyuseless.website\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003ecache:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epaths:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003evendor\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003ebuildSite:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eonly:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eproduction\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003estage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuild\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003escript:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enpm\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003einstall\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e-g\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eparcel-bundler\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--unsafe-perm=true\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--allow-root\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eparcel\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuild\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eindex.html\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eartifacts:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003epaths:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edist/\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003edeploys3:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eonly:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eproduction\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;python:latest\u0026quot;\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003estage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edeploy\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003edependencies:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuildSite\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ebefore_script:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003epip\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003einstall\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eawscli\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003escript:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eaws\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003es3\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003erm\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003es3://${BUCKET_NAME}/\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--recursive\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eaws\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003es3\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecp\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./dist\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003es3://${BUCKET_NAME}/\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--recursive\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e${CI_COMMIT_REF_SLUG}\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eurl:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehttp://${BUCKET_NAME}.s3-website.${AWS_DEFAULT_REGION}.amazonaws.com/\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003eChange the \u003ccode\u003eAWS_DEFAULT_REGION\u003c/code\u003e and \u003ccode\u003eBUCKET_NAME\u003c/code\u003e and save as a file named \u003ccode\u003e.gitlab-ci.yml\u003c/code\u003e in the root of your repository\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eThis will instructs Gitlab to build and deploy the website whenever something is pushed to the \u003ccode\u003eproduction\u003c/code\u003e branch.\nYou can change this behavior if you want.\u003c/p\u003e\n\u003cp\u003eOkay, now our CI pipeline is ready. I now you can continue developing the website. you just have to push the latest code to the \u003ccode\u003eproduction\u003c/code\u003e branch,\nIt will deploy the code to S3.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Pipelines preview\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/pipelines.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Gitlab Job\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/job.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Preview of the final website\"  src=\"https://rusith.me/post-data/2019-08-14-building-a-website-on-s3/final-website.jpg\"\u003e\u003c/p\u003e"},"page":"Post","topTags":["programming","aws","web","machineLearning","react","javascript","dataScience","typescript","r","csharp"],"relatedPosts":[{"title":"Deploying an app on AWS ECS with CDK","tags":["programming","nextJS","react","aws","ecs","typescript","cdk","devops"],"fullUrl":"https://rusith.me/blog/deploy-app-on-aws-ecs-with-cdk-auto-scaling-and-load-balancing","date":"Wed, Feb 15, 2023","description":"How to deploy an application on AWS ECS with load-balancing and auto-scaling using CDK by writing the CDK code in TypeScript","banner":"/post-data/2023-02-15-deploying-react-app-on-ecs/banner.png"},{"title":"Running a Nuget Feed on S3 with Automated Deployments","tags":["programming","dotnet","s3","aws","nuget"],"fullUrl":"https://rusith.me/blog/nuget-feed-on-s3","date":"Sat, Nov 2, 2019","description":"There are many ways of creating a Nuget feed. but did you know that you can run a Nuget feed on S3 without any computing infrastructure? In this post, I will show you how you can create a Nuget feed on S3 using Sleet and automate the deployment process for packages.","banner":"/post-data/2019-11-03-nuget-feed-s3/banner.png"},{"title":"Creating a Re-Usable Presto Worker Image in EC2","tags":["programming","bigdata","aws","cloud"],"fullUrl":"https://rusith.me/blog/re-usable-presto-worker-image-ec2","date":"Thu, Jul 25, 2019","description":"Creating a machine image that can be used to spin up presto worker instances without configuring each one. this could be helpful when you don't want to use any  orchestration tool","banner":"/post-data/2019-07-25-re-usable-presto-worker/5-workers-dashboard.png"}]},"__N_SSG":true},"page":"/[[...path]]","query":{"path":["blog","building-a-website-on-s3"]},"buildId":"PaoTT2YDvwYY_jbobaNoC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>